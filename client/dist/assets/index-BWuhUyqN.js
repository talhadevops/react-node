import{j as e,T as ds,c as bt,p as hs,_ as se,t as E,r as l,a as xs,$ as vt,O as Ns,b as fs,d as ps,e as gs,S as bs,f as Re,R as Ct,g as G,u as Dt,L as D,A as ne,h as M,i as I,k as de,l as vs,H as Et,U as Cs,m as it,n as Y,o as Ds,C as Es,q as Us,D as ys,s as js,v as ws,P as Vs,w as Rs,x as ks,y as ve,z as ke,B as Ut,E as Ce,X as nt,F as Ss,G as Ts,I as ae,J as yt,K as jt,M as wt,N as Ls,Q as Ps,V as Vt,W as As,Y as Rt,Z as Ms,a0 as kt,a1 as St,a2 as Is,a3 as Fs,a4 as He,a5 as Be,a6 as Ke,a7 as Tt,a8 as $s,a9 as Os,aa as _s,ab as zs,ac as qs,ad as Bs,ae as Ks,af as dt,ag as Qs,ah as Hs,ai as Js,aj as Ws,ak as Lt,al as Ys,am as Pt,an as Se,ao as At,ap as Gs,aq as Mt,ar as Xs,as as It,at as Ft,au as $t,av as Ot,aw as _t,ax as Zs,ay as zt,az as qt,aA as eo,aB as to,aC as so,aD as oo,aE as Je,aF as We,aG as ro,aH as io,aI as no,aJ as ao,aK as lo,aL as Bt,aM as co,aN as Ye,aO as mo,aP as Ge,aQ as ht,aR as uo,aS as ho,aT as xo,aU as Kt,aV as Qt,aW as No,aX as fo,aY as Qe,aZ as po,a_ as go,a$ as bo,b0 as vo,b1 as Co,b2 as Do,b3 as Eo,b4 as Uo,b5 as yo,b6 as jo,b7 as wo,b8 as Vo}from"./vendor-CiRWZkIe.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const a of i)if(a.type==="childList")for(const n of a.addedNodes)n.tagName==="LINK"&&n.rel==="modulepreload"&&r(n)}).observe(document,{childList:!0,subtree:!0});function s(i){const a={};return i.integrity&&(a.integrity=i.integrity),i.referrerPolicy&&(a.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?a.credentials="include":i.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(i){if(i.ep)return;i.ep=!0;const a=s(i);fetch(i.href,a)}})();const Ro=({...o})=>e.jsxDEV(ds,{theme:"light",className:"toaster group",style:{"--normal-bg":"var(--popover)","--normal-text":"var(--popover-foreground)","--normal-border":"var(--border)"},...o},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/components/ui/sonner.tsx",lineNumber:5,columnNumber:5},void 0);function at(o){try{if(!o||typeof o!="string")return null;const t=o.split(".");if(t.length!==3)return null;const s=t[1],r=s+"=".repeat((4-s.length%4)%4),i=atob(r),a=JSON.parse(i);return!a.userId||!a.exp||!a.iat?(console.warn("JWT payload missing required fields:",a),null):a}catch(t){return console.warn("Failed to decode JWT token:",t),null}}function X(o){const t=at(o);if(!t)return!0;const s=Math.floor(Date.now()/1e3);return t.exp<=s}function Ee(o){const t=at(o);if(!t)return null;const s=Date.now(),r=Math.floor(s/1e3),i=new Date(t.exp*1e3),a=new Date(t.iat*1e3),n=t.exp*1e3-s,c=t.exp<=r,m=5*60*1e3,u=n<=m&&n>0;return{payload:t,isExpired:c,expiresAt:i,issuedAt:a,timeUntilExpiry:n,isNearExpiry:u}}function Ht(o,t=5){const s=Ee(o);if(!s||s.isExpired)return!0;const r=t*60*1e3;return s.timeUntilExpiry<=r}function _(o){try{if(!o||typeof o!="string"||o.split(".").length!==3)return!1;const s=at(o);if(!s)return!1;const r=["userId","email","username","tokenVersion","iat","exp"];for(const i of r)if(!(i in s))return!1;return!(s.exp<=s.iat)}catch{return!1}}var z=(o=>(o.EXPIRED="expired",o.NEAR_EXPIRY="near_expiry",o.REFRESHED="refreshed",o.INVALID="invalid",o))(z||{});const ko={checkInterval:30*1e3,warningThreshold:5,autoRefreshThreshold:2},L=bt()(hs((o,t)=>({user:null,isAuthenticated:!1,tokens:null,setUser:s=>{o({user:s})},setAuthenticated:s=>{o({isAuthenticated:s})},setTokens:s=>{if(s.accessToken&&!_(s.accessToken)){console.warn("Invalid access token structure, not setting tokens");return}if(s.refreshToken&&!_(s.refreshToken)){console.warn("Invalid refresh token structure, not setting tokens");return}if(s.accessToken&&X(s.accessToken)){console.warn("Access token is expired, not setting tokens");return}o({tokens:s});const r=s.accessToken&&!X(s.accessToken);r!==t().isAuthenticated&&o({isAuthenticated:r})},logout:()=>{console.log("Auth store: Logging out user"),o({user:null,isAuthenticated:!1,tokens:null});try{localStorage.removeItem("auth-storage")}catch(s){console.warn("Failed to clear auth storage:",s)}},isTokenValid:()=>{const{tokens:s}=t();return s?.accessToken?_(s.accessToken)&&!X(s.accessToken):!1},checkTokenExpiration:()=>{const{tokens:s,logout:r}=t();return s?.accessToken?X(s.accessToken)?(console.log("Auth store: Access token expired, logging out"),r(),!1):!0:!1},getTokenInfo:()=>{const{tokens:s}=t();return s?.accessToken?Ee(s.accessToken):null},login:async(s,r)=>(await new Promise(i=>setTimeout(i,1e3)),s==="demo@example.com"&&r==="password"?(o({user:{id:"1",name:"Demo User",email:"demo@example.com",avatar:"/api/placeholder/120/120"},isAuthenticated:!0}),!0):!1),register:async(s,r,i)=>{await new Promise(n=>setTimeout(n,1e3));const a={id:Date.now().toString(),name:s,email:r,avatar:"/api/placeholder/120/120"};return o({user:a,isAuthenticated:!0}),!0}}),{name:"auth-storage",partialize:o=>({user:o.user,isAuthenticated:o.isAuthenticated,tokens:o.tokens})})),Xe=Object.freeze(Object.defineProperty({__proto__:null,useAuthStore:L},Symbol.toStringTag,{value:"Module"}));class So{intervalId=null;config;callbacks=new Set;lastWarningTime=0;lastRefreshAttempt=0;isMonitoring=!1;constructor(t={}){this.config={...ko,...t},this.checkTokenExpiration=this.checkTokenExpiration.bind(this),this.handleTokenExpired=this.handleTokenExpired.bind(this),this.handleTokenNearExpiry=this.handleTokenNearExpiry.bind(this),this.handleTokenRefreshed=this.handleTokenRefreshed.bind(this),this.handleTokenInvalid=this.handleTokenInvalid.bind(this)}start(){if(this.isMonitoring){console.log("Token monitor already running");return}console.log("Starting token expiration monitoring...",{checkInterval:this.config.checkInterval,warningThreshold:this.config.warningThreshold,autoRefreshThreshold:this.config.autoRefreshThreshold}),this.isMonitoring=!0,this.intervalId=setInterval(this.checkTokenExpiration,this.config.checkInterval),this.checkTokenExpiration()}stop(){this.intervalId&&(clearInterval(this.intervalId),this.intervalId=null),this.isMonitoring=!1,console.log("Token expiration monitoring stopped")}addCallback(t){this.callbacks.add(t)}removeCallback(t){this.callbacks.delete(t)}updateConfig(t){this.config={...this.config,...t},this.isMonitoring&&(this.stop(),this.start())}getStatus(){return{isMonitoring:this.isMonitoring,config:{...this.config}}}checkTokenExpiration(){try{const t=this.getTokensFromStorage();if(!t.accessToken)return;if(!_(t.accessToken)){console.warn("Invalid access token structure detected"),this.handleTokenInvalid();return}const s=Ee(t.accessToken);if(!s){console.warn("Unable to get token info"),this.handleTokenInvalid();return}if(s.isExpired){console.log("Access token has expired"),this.handleTokenExpired();return}if(Ht(t.accessToken,this.config.autoRefreshThreshold)){const r=Date.now();r-this.lastRefreshAttempt>3e4&&(console.log("Token needs refresh, attempting automatic refresh..."),this.lastRefreshAttempt=r,this.attemptTokenRefresh());return}if(s.isNearExpiry){const r=Date.now();r-this.lastWarningTime>6e4&&(this.lastWarningTime=r,this.handleTokenNearExpiry(s.timeUntilExpiry))}}catch(t){console.error("Error checking token expiration:",t)}}getTokensFromStorage(){try{const t=localStorage.getItem("auth-storage");if(t){const r=JSON.parse(t).state?.tokens;return{accessToken:r?.accessToken||null,refreshToken:r?.refreshToken||null}}}catch(t){console.warn("Failed to get tokens from storage:",t)}return{accessToken:null,refreshToken:null}}async attemptTokenRefresh(){try{const{httpClient:t}=await se(async()=>{const{httpClient:s}=await Promise.resolve().then(()=>De);return{httpClient:s}},void 0);await t.get("/auth/me"),console.log("Token refresh successful"),this.handleTokenRefreshed()}catch(t){console.error("Token refresh failed:",t),this.handleTokenExpired()}}handleTokenExpired(){console.log("Handling token expiration - logging out user"),this.notifyCallbacks(z.EXPIRED),E.error("Your session has expired. Please log in again.",{duration:5e3,action:{label:"Login",onClick:()=>{window.location.href="/login"}}}),this.config.onTokenExpired&&this.config.onTokenExpired(),this.triggerLogout()}handleTokenNearExpiry(t){const s=Math.floor(t/6e4),r=s>0?`${s} minute${s>1?"s":""}`:"less than a minute";console.log(`Token near expiry: ${r} remaining`),this.notifyCallbacks(z.NEAR_EXPIRY,{timeUntilExpiry:t,timeLeftText:r}),E.warning(`Your session will expire in ${r}. Please save your work.`,{duration:1e4,action:{label:"Extend Session",onClick:()=>{this.attemptTokenRefresh()}}}),this.config.onTokenNearExpiry&&this.config.onTokenNearExpiry(r)}handleTokenRefreshed(){console.log("Token refreshed successfully"),this.lastWarningTime=0,this.notifyCallbacks(z.REFRESHED),E.success("Session extended successfully",{duration:3e3}),this.config.onTokenRefreshed&&this.config.onTokenRefreshed()}handleTokenInvalid(){console.log("Invalid token detected - logging out user"),this.notifyCallbacks(z.INVALID),E.error("Your session is invalid. Please log in again.",{duration:5e3}),this.config.onTokenInvalid&&this.config.onTokenInvalid(),this.triggerLogout()}notifyCallbacks(t,s){this.callbacks.forEach(r=>{try{r(t,s)}catch(i){console.error("Error in token monitor callback:",i)}})}async triggerLogout(){try{const{useAuthStore:t}=await se(async()=>{const{useAuthStore:a}=await Promise.resolve().then(()=>Xe);return{useAuthStore:a}},void 0);t.getState().logout();const{httpClient:r}=await se(async()=>{const{httpClient:a}=await Promise.resolve().then(()=>De);return{httpClient:a}},void 0);r.clearAuth();const i=window.location.pathname+window.location.search;i!=="/login"&&(window.location.href=`/login?redirect=${encodeURIComponent(i)}`)}catch(t){console.error("Error during logout:",t),localStorage.removeItem("auth-storage"),window.location.href="/login"}}}const ge=new So;function To(o={}){const{autoStart:t=!0,showNotifications:s=!0,onTokenEvent:r,autoLogout:i=!0,checkInterval:a=3e4,warningThreshold:n=5,autoRefreshThreshold:c=2}=o,{isAuthenticated:m,tokens:u,logout:b,checkTokenExpiration:h,getTokenInfo:g,isTokenValid:y}=L(),R=l.useRef(null),w=l.useRef(!1),x=l.useCallback((f,v)=>{if(console.log("Token event:",f,v),r)try{r(f,v)}catch(O){console.error("Error in custom token event callback:",O)}switch(f){case z.EXPIRED:s&&E.error("Your session has expired. Please log in again.",{duration:5e3,action:{label:"Login",onClick:()=>{window.location.href="/login"}}}),i&&b();break;case z.NEAR_EXPIRY:s&&v?.timeLeftText&&E.warning(`Your session will expire in ${v.timeLeftText}. Please save your work.`,{duration:1e4,action:{label:"Extend Session",onClick:async()=>{try{await S(),E.success("Session extended successfully")}catch{E.error("Failed to extend session")}}}});break;case z.REFRESHED:s&&E.success("Session extended successfully",{duration:3e3});break;case z.INVALID:s&&E.error("Your session is invalid. Please log in again.",{duration:5e3}),i&&b();break}},[r,s,i,b]),U=l.useCallback(()=>{w.current||(console.log("Starting token monitoring..."),ge.updateConfig({checkInterval:a,warningThreshold:n,autoRefreshThreshold:c}),R.current=x,ge.addCallback(R.current),ge.start(),w.current=!0)},[a,n,c,x]),N=l.useCallback(()=>{w.current&&(console.log("Stopping token monitoring..."),R.current&&(ge.removeCallback(R.current),R.current=null),ge.stop(),w.current=!1)},[]),S=l.useCallback(async()=>{try{const{httpClient:f}=await se(async()=>{const{httpClient:v}=await Promise.resolve().then(()=>De);return{httpClient:v}},void 0);await f.forceRefresh()}catch(f){throw console.error("Failed to force refresh token:",f),f}},[]);return l.useEffect(()=>(t&&m&&u?.accessToken?h()&&U():N(),()=>{N()}),[t,m,u?.accessToken,U,N,h]),l.useEffect(()=>{m&&u?.accessToken&&(h()||N())},[u?.accessToken,m,h,N]),{isMonitoring:w.current,startMonitoring:U,stopMonitoring:N,getTokenInfo:g,isTokenValid:y,forceRefresh:S}}function Lo({debug:o=!1,messages:t={},autoRedirect:s=!0}){const{isAuthenticated:r}=L(),a={...{expired:"Your session has expired. Please log in again.",nearExpiry:"Your session will expire soon. Please save your work.",refreshed:"Session extended successfully.",invalid:"Your session is invalid. Please log in again."},...t},n=(u,b)=>{switch(o&&console.log("TokenMonitor: Token event received:",u,b),u){case z.EXPIRED:E.error(a.expired,{duration:8e3,action:s?{label:"Login",onClick:()=>{const h=window.location.pathname+window.location.search;window.location.href=`/login?redirect=${encodeURIComponent(h)}`}}:void 0});break;case z.NEAR_EXPIRY:b?.timeLeftText?E.warning(`${a.nearExpiry} Time remaining: ${b.timeLeftText}`,{duration:15e3,action:{label:"Extend Session",onClick:async()=>{try{const{httpClient:h}=await se(async()=>{const{httpClient:g}=await Promise.resolve().then(()=>De);return{httpClient:g}},void 0);await h.forceRefresh(),E.success("Session extended successfully")}catch{E.error("Failed to extend session. Please save your work and log in again.")}}}}):E.warning(a.nearExpiry,{duration:1e4});break;case z.REFRESHED:o&&E.success(a.refreshed,{duration:3e3});break;case z.INVALID:E.error(a.invalid,{duration:8e3,action:s?{label:"Login",onClick:()=>{window.location.href="/login"}}:void 0});break}},{isMonitoring:c,getTokenInfo:m}=To({autoStart:!0,showNotifications:!1,autoLogout:!0,onTokenEvent:n,checkInterval:3e4,warningThreshold:5,autoRefreshThreshold:2});return l.useEffect(()=>{if(o&&r){const u=m();u&&console.log("TokenMonitor: Current token info:",{isMonitoring:c,expiresAt:u.expiresAt,timeUntilExpiry:u.timeUntilExpiry,isNearExpiry:u.isNearExpiry,isExpired:u.isExpired})}},[o,r,c,m]),l.useEffect(()=>{o&&(c&&r?E.info("Token monitoring started",{duration:2e3}):!c&&!r&&E.info("Token monitoring stopped",{duration:2e3}))},[o,c,r]),null}const W=xs({component:()=>e.jsxDEV(vt.Fragment,{children:[e.jsxDEV(Ns,{},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/routes/__root.tsx",lineNumber:9,columnNumber:9},void 0),e.jsxDEV(Ro,{},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/routes/__root.tsx",lineNumber:10,columnNumber:9},void 0),e.jsxDEV(Lo,{},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/routes/__root.tsx",lineNumber:11,columnNumber:9},void 0),e.jsxDEV(fs,{},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/routes/__root.tsx",lineNumber:12,columnNumber:9},void 0)]},void 0,!0,{fileName:"C:/Users/thudao/coding/example-react/client/src/routes/__root.tsx",lineNumber:8,columnNumber:12},void 0)});function p(...o){return ps(gs(o))}const lt=Re("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",{variants:{variant:{default:"bg-primary text-primary-foreground shadow-xs hover:bg-primary/90",destructive:"bg-destructive text-white shadow-xs hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"border bg-background shadow-xs hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50",secondary:"bg-secondary text-secondary-foreground shadow-xs hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2 has-[>svg]:px-3",sm:"h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5",lg:"h-10 rounded-md px-6 has-[>svg]:px-4",icon:"size-9"}},defaultVariants:{variant:"default",size:"default"}});function d({className:o,variant:t,size:s,asChild:r=!1,...i}){const a=r?bs:"button";return e.jsxDEV(a,{"data-slot":"button",className:p(lt({variant:t,size:s,className:o})),...i},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/components/ui/button.tsx",lineNumber:51,columnNumber:5},this)}const K=l.forwardRef(({className:o,...t},s)=>e.jsxDEV("div",{ref:s,className:p("rounded-xl border bg-card text-card-foreground shadow",o),...t},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/components/ui/card.tsx",lineNumber:9,columnNumber:3},void 0));K.displayName="Card";const H=l.forwardRef(({className:o,...t},s)=>e.jsxDEV("div",{ref:s,className:p("flex flex-col space-y-1.5 p-6",o),...t},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/components/ui/card.tsx",lineNumber:24,columnNumber:3},void 0));H.displayName="CardHeader";const J=l.forwardRef(({className:o,...t},s)=>e.jsxDEV("div",{ref:s,className:p("font-semibold leading-none tracking-tight",o),...t},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/components/ui/card.tsx",lineNumber:36,columnNumber:3},void 0));J.displayName="CardTitle";const ie=l.forwardRef(({className:o,...t},s)=>e.jsxDEV("div",{ref:s,className:p("text-sm text-muted-foreground",o),...t},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/components/ui/card.tsx",lineNumber:48,columnNumber:3},void 0));ie.displayName="CardDescription";const Q=l.forwardRef(({className:o,...t},s)=>e.jsxDEV("div",{ref:s,className:p("p-6 pt-0",o),...t},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/components/ui/card.tsx",lineNumber:60,columnNumber:3},void 0));Q.displayName="CardContent";const Po=l.forwardRef(({className:o,...t},s)=>e.jsxDEV("div",{ref:s,className:p("flex items-center p-6 pt-0",o),...t},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/components/ui/card.tsx",lineNumber:68,columnNumber:3},void 0));Po.displayName="CardFooter";const P=l.forwardRef(({className:o,type:t,...s},r)=>e.jsxDEV("input",{type:t,className:p("flex h-9 w-full rounded-md border border-input bg-transparent px-3 py-1 text-base shadow-sm transition-colors file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",o),ref:r,...s},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/components/ui/input.tsx",lineNumber:8,columnNumber:7},void 0));P.displayName="Input";const Ao=Re("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),A=l.forwardRef(({className:o,...t},s)=>e.jsxDEV(Ct,{ref:s,className:p(Ao(),o),...t},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/components/ui/label.tsx",lineNumber:16,columnNumber:3},void 0));A.displayName=Ct.displayName;const Mo=G("/verify-otp")({component:Io,validateSearch:o=>({e:o.e||""})});function Io(){const o=Dt({from:"/verify-otp"}),[t,s]=l.useState(""),r=()=>{console.log("Verifying OTP:",t,"for email:",o.e)};return e.jsxDEV("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 relative",children:[e.jsxDEV(D,{to:"/forgot-password",className:"absolute top-4 left-4",children:e.jsxDEV(d,{variant:"ghost",size:"sm",children:[e.jsxDEV(ne,{className:"w-4 h-4 mr-2"},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/routes/verify-otp.tsx",lineNumber:27,columnNumber:11},this),"Back"]},void 0,!0,{fileName:"C:/Users/thudao/coding/example-react/client/src/routes/verify-otp.tsx",lineNumber:26,columnNumber:9},this)},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/routes/verify-otp.tsx",lineNumber:25,columnNumber:7},this),e.jsxDEV(K,{className:"w-full max-w-md",children:[e.jsxDEV(H,{className:"text-center",children:[e.jsxDEV(J,{className:"text-2xl",children:"Verify OTP"},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/routes/verify-otp.tsx",lineNumber:34,columnNumber:11},this),e.jsxDEV(ie,{children:["Enter the 6-digit code sent to ",o.e||"your email"]},void 0,!0,{fileName:"C:/Users/thudao/coding/example-react/client/src/routes/verify-otp.tsx",lineNumber:35,columnNumber:11},this)]},void 0,!0,{fileName:"C:/Users/thudao/coding/example-react/client/src/routes/verify-otp.tsx",lineNumber:33,columnNumber:9},this),e.jsxDEV(Q,{className:"space-y-4",children:[e.jsxDEV("div",{className:"space-y-2",children:[e.jsxDEV(A,{htmlFor:"otp",children:"OTP Code"},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/routes/verify-otp.tsx",lineNumber:41,columnNumber:13},this),e.jsxDEV(P,{id:"otp",type:"text",placeholder:"Enter 6-digit code",value:t,onChange:i=>s(i.target.value),maxLength:6,className:"text-center text-lg tracking-widest",required:!0},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/routes/verify-otp.tsx",lineNumber:42,columnNumber:13},this)]},void 0,!0,{fileName:"C:/Users/thudao/coding/example-react/client/src/routes/verify-otp.tsx",lineNumber:40,columnNumber:11},this),e.jsxDEV(d,{className:"w-full",onClick:r,disabled:t.length!==6,children:"Verify OTP"},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/routes/verify-otp.tsx",lineNumber:44,columnNumber:11},this),e.jsxDEV("div",{className:"text-center space-y-2",children:[e.jsxDEV(D,{to:"/forgot-password",className:"text-sm text-blue-600 hover:underline",children:"Resend Code"},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/routes/verify-otp.tsx",lineNumber:48,columnNumber:13},this),e.jsxDEV("div",{children:e.jsxDEV(D,{to:"/login",search:{redirect:"/"},className:"text-sm text-blue-600 hover:underline",children:"Back to Sign In"},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/routes/verify-otp.tsx",lineNumber:52,columnNumber:15},this)},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/routes/verify-otp.tsx",lineNumber:51,columnNumber:13},this)]},void 0,!0,{fileName:"C:/Users/thudao/coding/example-react/client/src/routes/verify-otp.tsx",lineNumber:47,columnNumber:11},this)]},void 0,!0,{fileName:"C:/Users/thudao/coding/example-react/client/src/routes/verify-otp.tsx",lineNumber:39,columnNumber:9},this)]},void 0,!0,{fileName:"C:/Users/thudao/coding/example-react/client/src/routes/verify-otp.tsx",lineNumber:32,columnNumber:7},this)]},void 0,!0,{fileName:"C:/Users/thudao/coding/example-react/client/src/routes/verify-otp.tsx",lineNumber:23,columnNumber:10},this)}const Fo={BASE_URL:"/",DEV:!0,MODE:"production",PROD:!1,SSR:!1,VITE_API_BASE_URL:"http://localhost:3000/api",VITE_APP_DESCRIPTION:"Modern MERN stack application with real-time features",VITE_APP_NAME:"React Todo & Chat App 2025",VITE_APP_VERSION:"1.0.0",VITE_CLIENT_PORT:"5173",VITE_ENABLE_CHAT:"true",VITE_ENABLE_DARK_MODE:"true",VITE_ENABLE_NOTIFICATIONS:"true",VITE_SERVER_PORT:"3000",VITE_WS_URL:"http://localhost:3000"},$o=()=>"3000",Oo=()=>"5173",_o=()=>"http://localhost:3000/api",zo=()=>"http://localhost:3000",qo=()=>({enableChat:!0,enableNotifications:!0,enableDarkMode:!0}),te={serverPort:$o(),clientPort:Oo(),apiBaseUrl:_o(),socketUrl:zo(),appName:"React Todo & Chat App 2025",appVersion:"1.0.0",appDescription:"Modern MERN stack application with real-time features",features:qo(),isDevelopment:!0,isProduction:!1,mode:"production",debug:{showTokenStatus:!0,enableVerboseLogging:!0,showPerformanceMetrics:!0}},Bo=()=>{const t=["VITE_SERVER_PORT","VITE_CLIENT_PORT"].filter(s=>{const r=Fo[s];return!r||r===""});return{isValid:t.length===0,missingVars:t}};{console.log("🔧 Client Configuration:",{apiBaseUrl:te.apiBaseUrl,socketUrl:te.socketUrl,appName:te.appName,features:te.features,environment:te.mode});const o=Bo();o.isValid||console.warn("⚠️ Missing environment variables:",o.missingVars)}class Jt{baseURL;accessToken=null;refreshToken=null;refreshAttempts=0;maxRefreshAttempts=3;isRefreshing=!1;refreshPromise=null;constructor(t=te.apiBaseUrl){this.baseURL=t,this.loadTokensFromStorage(),console.log("HTTP Client initialized:",{baseURL:this.baseURL,hasAccessToken:!!this.accessToken,hasRefreshToken:!!this.refreshToken})}loadTokensFromStorage(){try{const t=localStorage.getItem("auth-storage");if(t){const s=JSON.parse(t),r=s.state?.tokens||s.tokens;this.accessToken=r?.accessToken||null,this.refreshToken=r?.refreshToken||null,console.log("Loading tokens from storage:",{hasAuthData:!!t,hasState:!!s.state,hasTokens:!!r,hasAccessToken:!!this.accessToken})}}catch(t){console.warn("Failed to load tokens from storage:",t)}}saveTokensToStorage(t,s){this.accessToken=t,this.refreshToken=s,this.refreshAttempts=0;try{let r=localStorage.getItem("auth-storage"),i;r?i=JSON.parse(r):i={state:{user:null,isAuthenticated:!1,tokens:null},version:0},i.state||(i.state={}),i.state.tokens={accessToken:t,refreshToken:s},t&&(i.state.isAuthenticated=!0),localStorage.setItem("auth-storage",JSON.stringify(i)),console.log("Saved tokens to localStorage:",{hasAccessToken:!!t,hasRefreshToken:!!s,accessTokenPreview:t?`${t.substring(0,20)}...`:null,fullStructure:i});const a=localStorage.getItem("auth-storage");if(a){const n=JSON.parse(a);console.log("Verification - tokens in storage:",{hasTokens:!!n.state?.tokens,hasAccessToken:!!n.state?.tokens?.accessToken})}}catch(r){console.error("Failed to save tokens to storage:",r)}}clearTokens(){this.accessToken=null,this.refreshToken=null,this.refreshAttempts=0;try{const t=localStorage.getItem("auth-storage");if(t){const s=JSON.parse(t);delete s.state.tokens,localStorage.setItem("auth-storage",JSON.stringify(s))}}catch(t){console.warn("Failed to clear tokens from storage:",t)}}syncTokensFromAuthStore(){try{const t=localStorage.getItem("auth-storage");if(t){const r=JSON.parse(t).state?.tokens;if(r?.accessToken&&r?.refreshToken)return this.accessToken=r.accessToken,this.refreshToken=r.refreshToken,console.log("Synced tokens from authStore:",{hasAccessToken:!!this.accessToken,accessTokenLength:this.accessToken?.length}),!0}}catch(t){console.warn("Failed to sync tokens from authStore:",t)}return!1}async request(t,s={}){this.accessToken||this.syncTokensFromAuthStore(),await this.ensureValidToken(t);const r=`${this.baseURL}${t}`,i={...s.headers};s.body instanceof FormData||(i["Content-Type"]="application/json"),this.accessToken?(i.Authorization=`Bearer ${this.accessToken}`,console.log("Adding Authorization header:",`Bearer ${this.accessToken.substring(0,20)}...`)):console.warn("No access token available for request to:",t),console.log("this.accessToken",this.accessToken);try{const a=await fetch(r,{...s,headers:i}),n=await a.json();if(!a.ok){if(a.status===401&&this.refreshToken&&t!=="/auth/refresh"&&this.refreshAttempts<this.maxRefreshAttempts)try{return this.refreshAttempts++,console.log(`Attempting token refresh (${this.refreshAttempts}/${this.maxRefreshAttempts})`),await this.refreshAccessToken(),this.request(t,s)}catch(c){throw console.error(`Token refresh failed (attempt ${this.refreshAttempts}):`,c),this.refreshAttempts>=this.maxRefreshAttempts&&(console.log("Max refresh attempts reached, logging out user"),this.handleAuthFailure()),new ee("Session expired. Please login again.",401)}else a.status===401&&this.handleAuthFailure();throw new ee(n.message||`HTTP ${a.status}: ${a.statusText}`,a.status,n.errors)}return n}catch(a){throw a instanceof ee?a:new ee(a instanceof Error?a.message:"Network error occurred",0)}}async ensureValidToken(t){if(!t.startsWith("/auth/")&&(this.accessToken||this.syncTokensFromAuthStore(),!!this.accessToken)){if(!_(this.accessToken))throw console.warn("Invalid access token structure, clearing tokens"),this.handleAuthFailure(),new ee("Invalid token structure",401);if(X(this.accessToken)){console.log("Access token is expired, attempting refresh..."),await this.handleExpiredToken();return}if(Ht(this.accessToken,2)){console.log("Access token near expiry, proactively refreshing...");try{await this.proactiveTokenRefresh()}catch(s){console.warn("Proactive token refresh failed, will retry on 401:",s)}}}}async handleExpiredToken(){if(!this.refreshToken)throw console.log("No refresh token available, logging out"),this.handleAuthFailure(),new ee("Session expired",401);try{await this.refreshAccessToken(),console.log("Successfully refreshed expired token")}catch(t){throw console.error("Failed to refresh expired token:",t),this.handleAuthFailure(),new ee("Session expired",401)}}async proactiveTokenRefresh(){if(this.isRefreshing){this.refreshPromise&&await this.refreshPromise;return}this.isRefreshing=!0,this.refreshPromise=this.refreshAccessToken().finally(()=>{this.isRefreshing=!1,this.refreshPromise=null}),await this.refreshPromise}handleAuthFailure(){console.log("Authentication failed, clearing tokens and redirecting to login"),this.clearTokens(),this.isRefreshing=!1,this.refreshPromise=null,this.refreshAttempts=0;try{se(async()=>{const{useAuthStore:t}=await Promise.resolve().then(()=>Xe);return{useAuthStore:t}},void 0).then(({useAuthStore:t})=>{t.getState().logout()})}catch(t){console.warn("Failed to clear auth store:",t),localStorage.removeItem("auth-storage")}if(typeof window<"u"&&window.location.pathname!=="/login"){const t=window.location.pathname+window.location.search;window.location.href=`/login?redirect=${encodeURIComponent(t)}`}}async refreshAccessToken(){if(!this.refreshToken)throw new Error("No refresh token available");if(!_(this.refreshToken))throw console.warn("Invalid refresh token structure"),new Error("Invalid refresh token structure");if(X(this.refreshToken))throw console.warn("Refresh token is expired"),new Error("Refresh token expired");try{console.log("Attempting to refresh access token...");const t=await fetch(`${this.baseURL}/auth/refresh`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({refreshToken:this.refreshToken})});if(!t.ok){const n=(await t.json().catch(()=>({}))).message||`HTTP ${t.status}: ${t.statusText}`;throw new Error(`Failed to refresh token: ${n}`)}const s=await t.json();if(!s.success||!s.data?.tokens)throw new Error("Invalid refresh token response format");const{accessToken:r,refreshToken:i}=s.data.tokens;if(!_(r)||!_(i))throw new Error("Received invalid token structure from server");this.saveTokensToStorage(r,i),this.refreshAttempts=0,console.log("Token refresh successful");try{const{useAuthStore:a}=await se(async()=>{const{useAuthStore:c}=await Promise.resolve().then(()=>Xe);return{useAuthStore:c}},void 0);a.getState().setTokens({accessToken:r,refreshToken:i})}catch(a){console.warn("Failed to update auth store with new tokens:",a)}}catch(t){throw console.error("Token refresh failed:",t),this.clearTokens(),t}}async get(t){return this.request(t,{method:"GET"})}async post(t,s){return this.request(t,{method:"POST",body:s instanceof FormData?s:s?JSON.stringify(s):void 0})}async put(t,s){return this.request(t,{method:"PUT",body:s instanceof FormData?s:s?JSON.stringify(s):void 0})}async delete(t){return this.request(t,{method:"DELETE"})}setTokens(t,s){this.saveTokensToStorage(t,s)}reloadTokens(){this.loadTokensFromStorage()}forceSetTokens(t,s){console.log("Force setting tokens:",{hasAccessToken:!!t,hasRefreshToken:!!s}),this.accessToken=t,this.refreshToken=s}clearAuth(){this.clearTokens()}getTokenInfo(){if(!this.accessToken)return null;const t=Ee(this.accessToken);return t?{...t,hasRefreshToken:!!this.refreshToken,refreshAttempts:this.refreshAttempts,isRefreshing:this.isRefreshing}:null}isTokenValid(){return this.accessToken?_(this.accessToken)&&!X(this.accessToken):!1}async forceRefresh(){if(!this.refreshToken)throw new Error("No refresh token available");await this.refreshAccessToken()}}class ee extends Error{constructor(t,s,r){super(t),this.status=s,this.errors=r,this.name="ApiError"}}const j=new Jt,De=Object.freeze(Object.defineProperty({__proto__:null,ApiError:ee,HttpClient:Jt,httpClient:j},Symbol.toStringTag,{value:"Module"}));class Ko{async login(t){const s=await j.post("/auth/login",t);if(s.success&&s.data)return console.log("Login successful, storing tokens:",{hasAccessToken:!!s.data.tokens.accessToken,hasRefreshToken:!!s.data.tokens.refreshToken,accessTokenLength:s.data.tokens.accessToken?.length}),j.setTokens(s.data.tokens.accessToken,s.data.tokens.refreshToken),s.data;throw new Error(s.message||"Login failed")}async register(t){const s=await j.post("/auth/register",t);if(s.success&&s.data)return j.setTokens(s.data.tokens.accessToken,s.data.tokens.refreshToken),s.data;throw new Error(s.message||"Registration failed")}async logout(){try{await j.post("/auth/logout")}catch(t){console.warn("Logout request failed:",t)}finally{j.clearAuth()}}async getCurrentUser(){const t=await j.get("/auth/me");if(t.success&&t.data)return t.data;throw new Error(t.message||"Failed to get user profile")}async forgotPassword(t){const s=await j.post("/auth/forgot-password",t);if(s.success&&s.data)return s.data;throw new Error(s.message||"Failed to send reset email")}async verifyOtp(t){const s=await j.post("/auth/verify-otp",t);if(!s.success)throw new Error(s.message||"OTP verification failed")}async resetPassword(t){const s=await j.post("/auth/reset-password",t);if(!s.success)throw new Error(s.message||"Password reset failed")}async changePassword(t){const s=await j.post("/auth/change-password",t);if(!s.success)throw new Error(s.message||"Password change failed")}isAuthenticated(){try{const t=localStorage.getItem("auth-storage");if(t){const s=JSON.parse(t);return s.state?.isAuthenticated===!0&&!!s.state?.tokens?.accessToken}}catch(t){console.warn("Failed to check authentication status:",t)}return!1}async updateProfile(t){const s=await j.put("/auth/profile",t);if(s.success&&s.data)return s.data.user;throw new Error(s.message||"Failed to update profile")}}const he=new Ko,oe={all:["auth"],me:()=>[...oe.all,"me"]},Qo=()=>{const{isAuthenticated:o}=L();return de({queryKey:oe.me(),queryFn:he.getCurrentUser,enabled:o,staleTime:5*60*1e3,retry:(t,s)=>s?.status===401?!1:t<3})},Ho=()=>{const o=M(),{setUser:t,setAuthenticated:s,setTokens:r}=L();return I({mutationFn:i=>he.login(i),onSuccess:i=>{console.log("Login mutation onSuccess, received data:",{hasUser:!!i.user,hasTokens:!!i.tokens,accessTokenLength:i.tokens?.accessToken?.length}),t({id:i.user.id,name:i.user.username,email:i.user.email,avatar:i.user.avatarUrl}),s(!0),r(i.tokens),j.forceSetTokens(i.tokens.accessToken,i.tokens.refreshToken),j.setTokens(i.tokens.accessToken,i.tokens.refreshToken),o.setQueryData(oe.me(),i.user),o.invalidateQueries({queryKey:oe.all})},onError:i=>{console.error("Login failed:",i)}})},Jo=()=>{const o=M(),{setUser:t,setAuthenticated:s,setTokens:r}=L();return I({mutationFn:i=>he.register(i),onSuccess:i=>{t({id:i.user.id,name:i.user.username,email:i.user.email,avatar:i.user.avatarUrl}),s(!0),r(i.tokens),o.setQueryData(oe.me(),i.user),o.invalidateQueries({queryKey:oe.all})},onError:i=>{console.error("Registration failed:",i)}})},Wo=()=>{const o=M(),{setUser:t}=L();return I({mutationFn:s=>he.updateProfile(s),onSuccess:s=>{t({id:s.id,name:s.username,email:s.email,avatar:s.avatarUrl}),o.setQueryData(oe.me(),s),o.invalidateQueries({queryKey:oe.all}),E.success("Profile updated successfully!")},onError:s=>{console.error("Profile update failed:",s),E.error(s.message||"Failed to update profile")}})},Yo=()=>I({mutationFn:o=>he.changePassword(o),onSuccess:()=>{E.success("Password changed successfully!")},onError:o=>{console.error("Password change failed:",o),E.error(o.message||"Failed to change password")}}),Wt=()=>{const o=M(),{logout:t}=L();return I({mutationFn:he.logout,onSuccess:()=>{t(),o.clear()},onError:s=>{console.error("Logout failed:",s),t(),o.clear()}})};function ue({showBackButton:o=!1,title:t,transparent:s=!1}){const r=vs(),{isAuthenticated:i,user:a}=L(),n=Wt(),c=u=>r.pathname===u,m=()=>{n.mutate()};return e.jsxDEV("nav",{className:`${s?"bg-white/95 backdrop-blur-sm":"bg-white"} shadow-sm border-b sticky top-0 z-50`,children:[e.jsxDEV("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:e.jsxDEV("div",{className:"flex justify-between items-center h-16",children:[e.jsxDEV("div",{className:"flex items-center",children:[o&&e.jsxDEV(D,{to:"/",className:"mr-4",children:e.jsxDEV(d,{variant:"ghost",size:"sm",children:[e.jsxDEV(ne,{className:"w-4 h-4 mr-2"},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/components/Navigation.tsx",lineNumber:35,columnNumber:19},this),"Back"]},void 0,!0,{fileName:"C:/Users/thudao/coding/example-react/client/src/components/Navigation.tsx",lineNumber:34,columnNumber:17},this)},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/components/Navigation.tsx",lineNumber:33,columnNumber:15},this),e.jsxDEV("div",{className:"flex items-center",children:[e.jsxDEV("div",{className:"flex-shrink-0",children:e.jsxDEV("div",{className:"w-8 h-8 bg-gradient-to-r from-blue-500 to-purple-600 rounded-lg flex items-center justify-center",children:e.jsxDEV("span",{className:"text-white font-bold text-sm",children:"MS"},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/components/Navigation.tsx",lineNumber:43,columnNumber:19},this)},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/components/Navigation.tsx",lineNumber:42,columnNumber:17},this)},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/components/Navigation.tsx",lineNumber:41,columnNumber:15},this),e.jsxDEV("div",{className:"ml-3",children:e.jsxDEV("h1",{className:"text-xl font-semibold text-gray-900",children:t||"MERN Stack"},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/components/Navigation.tsx",lineNumber:47,columnNumber:17},this)},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/components/Navigation.tsx",lineNumber:46,columnNumber:15},this)]},void 0,!0,{fileName:"C:/Users/thudao/coding/example-react/client/src/components/Navigation.tsx",lineNumber:40,columnNumber:13},this)]},void 0,!0,{fileName:"C:/Users/thudao/coding/example-react/client/src/components/Navigation.tsx",lineNumber:31,columnNumber:11},this),e.jsxDEV("div",{className:"hidden md:block",children:e.jsxDEV("div",{className:"ml-10 flex items-baseline space-x-4",children:[e.jsxDEV(D,{to:"/",className:`px-3 py-2 rounded-md text-sm font-medium transition-colors ${c("/")?"text-blue-600 bg-blue-50":"text-gray-600 hover:text-blue-600"}`,children:[e.jsxDEV(Et,{className:"w-4 h-4 inline mr-1"},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/components/Navigation.tsx",lineNumber:64,columnNumber:17},this),"Home"]},void 0,!0,{fileName:"C:/Users/thudao/coding/example-react/client/src/components/Navigation.tsx",lineNumber:56,columnNumber:15},this),e.jsxDEV(D,{to:"/todo",className:`px-3 py-2 rounded-md text-sm font-medium transition-colors ${c("/todo")?"text-blue-600 bg-blue-50":"text-gray-600 hover:text-blue-600"}`,children:"Todo"},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/components/Navigation.tsx",lineNumber:67,columnNumber:15},this),e.jsxDEV(D,{to:"/chat",className:`px-3 py-2 rounded-md text-sm font-medium transition-colors ${c("/chat")?"text-blue-600 bg-blue-50":"text-gray-600 hover:text-blue-600"}`,children:"Chat"},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/components/Navigation.tsx",lineNumber:77,columnNumber:15},this),e.jsxDEV(D,{to:"/profile",className:`px-3 py-2 rounded-md text-sm font-medium transition-colors ${c("/profile")?"text-blue-600 bg-blue-50":"text-gray-600 hover:text-blue-600"}`,children:"Profile"},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/components/Navigation.tsx",lineNumber:87,columnNumber:15},this)]},void 0,!0,{fileName:"C:/Users/thudao/coding/example-react/client/src/components/Navigation.tsx",lineNumber:55,columnNumber:13},this)},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/components/Navigation.tsx",lineNumber:54,columnNumber:11},this),e.jsxDEV("div",{className:"flex items-center space-x-4",children:i?e.jsxDEV("div",{className:"flex items-center space-x-3",children:[e.jsxDEV("span",{className:"text-sm text-gray-600",children:["Welcome, ",a?.name]},void 0,!0,{fileName:"C:/Users/thudao/coding/example-react/client/src/components/Navigation.tsx",lineNumber:103,columnNumber:17},this),e.jsxDEV(D,{to:"/profile",children:e.jsxDEV(d,{variant:"outline",size:"sm",children:[e.jsxDEV(Cs,{className:"w-4 h-4 mr-2"},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/components/Navigation.tsx",lineNumber:108,columnNumber:21},this),"Profile"]},void 0,!0,{fileName:"C:/Users/thudao/coding/example-react/client/src/components/Navigation.tsx",lineNumber:107,columnNumber:19},this)},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/components/Navigation.tsx",lineNumber:106,columnNumber:17},this),e.jsxDEV(d,{variant:"outline",size:"sm",onClick:m,disabled:n.isPending,children:[e.jsxDEV(it,{className:"w-4 h-4 mr-2"},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/components/Navigation.tsx",lineNumber:118,columnNumber:19},this),n.isPending?"Signing Out...":"Sign Out"]},void 0,!0,{fileName:"C:/Users/thudao/coding/example-react/client/src/components/Navigation.tsx",lineNumber:112,columnNumber:17},this)]},void 0,!0,{fileName:"C:/Users/thudao/coding/example-react/client/src/components/Navigation.tsx",lineNumber:102,columnNumber:15},this):e.jsxDEV(e.Fragment,{children:[e.jsxDEV(D,{to:"/login",search:{redirect:"/"},children:e.jsxDEV(d,{variant:"outline",size:"sm",children:"Sign In"},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/components/Navigation.tsx",lineNumber:125,columnNumber:19},this)},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/components/Navigation.tsx",lineNumber:124,columnNumber:17},this),e.jsxDEV(D,{to:"/register",children:e.jsxDEV(d,{size:"sm",children:"Get Started"},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/components/Navigation.tsx",lineNumber:130,columnNumber:19},this)},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/components/Navigation.tsx",lineNumber:129,columnNumber:17},this)]},void 0,!0,{fileName:"C:/Users/thudao/coding/example-react/client/src/components/Navigation.tsx",lineNumber:123,columnNumber:15},this)},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/components/Navigation.tsx",lineNumber:100,columnNumber:11},this)]},void 0,!0,{fileName:"C:/Users/thudao/coding/example-react/client/src/components/Navigation.tsx",lineNumber:30,columnNumber:9},this)},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/components/Navigation.tsx",lineNumber:29,columnNumber:7},this),e.jsxDEV("div",{className:"md:hidden",children:e.jsxDEV("div",{className:"px-2 pt-2 pb-3 space-y-1 sm:px-3 border-t",children:[e.jsxDEV(D,{to:"/",className:`block px-3 py-2 rounded-md text-base font-medium transition-colors ${c("/")?"text-blue-600 bg-blue-50":"text-gray-600 hover:text-blue-600"}`,children:"Home"},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/components/Navigation.tsx",lineNumber:143,columnNumber:11},this),e.jsxDEV(D,{to:"/todo",className:`block px-3 py-2 rounded-md text-base font-medium transition-colors ${c("/todo")?"text-blue-600 bg-blue-50":"text-gray-600 hover:text-blue-600"}`,children:"Todo"},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/components/Navigation.tsx",lineNumber:153,columnNumber:11},this),e.jsxDEV(D,{to:"/chat",className:`block px-3 py-2 rounded-md text-base font-medium transition-colors ${c("/chat")?"text-blue-600 bg-blue-50":"text-gray-600 hover:text-blue-600"}`,children:"Chat"},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/components/Navigation.tsx",lineNumber:163,columnNumber:11},this),e.jsxDEV(D,{to:"/profile",className:`block px-3 py-2 rounded-md text-base font-medium transition-colors ${c("/profile")?"text-blue-600 bg-blue-50":"text-gray-600 hover:text-blue-600"}`,children:"Profile"},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/components/Navigation.tsx",lineNumber:173,columnNumber:11},this)]},void 0,!0,{fileName:"C:/Users/thudao/coding/example-react/client/src/components/Navigation.tsx",lineNumber:142,columnNumber:9},this)},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/components/Navigation.tsx",lineNumber:141,columnNumber:7},this)]},void 0,!0,{fileName:"C:/Users/thudao/coding/example-react/client/src/components/Navigation.tsx",lineNumber:28,columnNumber:5},this)}class Go{async getTodos(t){const s=new URLSearchParams;t?.page&&s.append("page",t.page.toString()),t?.limit&&s.append("limit",t.limit.toString()),t?.status&&s.append("status",t.status),t?.sortBy&&s.append("sortBy",t.sortBy),t?.sortOrder&&s.append("sortOrder",t.sortOrder);const r=s.toString(),i=`/todos${r?`?${r}`:""}`,a=await j.get(i);if(a.success&&a.data)return a.data;throw new Error(a.message||"Failed to fetch todos")}async getTodoById(t){const s=await j.get(`/todos/${t}`);if(s.success&&s.data)return s.data;throw new Error(s.message||"Failed to fetch todo")}async createTodo(t){const s=await j.post("/todos",t);if(s.success&&s.data)return s.data.todo;throw new Error(s.message||"Failed to create todo")}async updateTodo(t,s){const r=await j.put(`/todos/${t}`,s);if(r.success&&r.data)return r.data.todo;throw new Error(r.message||"Failed to update todo")}async updateTodoStatus(t,s){const r=await j.put(`/todos/${t}/status`,s);if(r.success&&r.data)return r.data.todo;throw new Error(r.message||"Failed to update todo status")}async deleteTodo(t){const s=await j.delete(`/todos/${t}`);if(!s.success)throw new Error(s.message||"Failed to delete todo")}}const Ue=new Go,q={all:["todos"],lists:()=>[...q.all,"list"],list:o=>[...q.lists(),o],details:()=>[...q.all,"detail"],detail:o=>[...q.details(),o]},Xo=o=>de({queryKey:q.list(o),queryFn:()=>Ue.getTodos(o),staleTime:30*1e3,retry:(t,s)=>s?.status===401?!1:t<3}),Zo=()=>{const o=M();return I({mutationFn:t=>Ue.createTodo(t),onSuccess:t=>{o.invalidateQueries({queryKey:q.lists()}),o.setQueryData(q.detail(t.id),t),E.success("Todo created successfully!")},onError:t=>{console.error("Failed to create todo:",t),E.error(t.message||"Failed to create todo")}})},er=()=>{const o=M();return I({mutationFn:({id:t,data:s})=>Ue.updateTodo(t,s),onSuccess:t=>{o.setQueryData(q.detail(t.id),t),o.invalidateQueries({queryKey:q.lists()}),E.success("Todo updated successfully!")},onError:t=>{console.error("Failed to update todo:",t),E.error(t.message||"Failed to update todo")}})},tr=()=>{const o=M();return I({mutationFn:({id:t,data:s})=>Ue.updateTodoStatus(t,s),onSuccess:t=>{o.setQueryData(q.detail(t.id),t),o.invalidateQueries({queryKey:q.lists()}),E.success("Todo status updated successfully!")},onError:t=>{console.error("Failed to update todo status:",t),E.error(t.message||"Failed to update todo status")}})},sr=()=>{const o=M();return I({mutationFn:t=>Ue.deleteTodo(t),onSuccess:(t,s)=>{o.removeQueries({queryKey:q.detail(s)}),o.invalidateQueries({queryKey:q.lists()}),E.success("Todo deleted successfully!")},onError:t=>{console.error("Failed to delete todo:",t),E.error(t.message||"Failed to delete todo")}})};var F=(o=>(o.INITIAL="initial",o.TODO="todo",o.DOING="doing",o.REVIEW="review",o.DONE="done",o.KEEPING="keeping",o.CANCELLED="cancelled",o))(F||{});const or=({size:o="md",className:t})=>{const s={sm:"w-4 h-4",md:"w-6 h-6",lg:"w-8 h-8"};return e.jsxDEV(Y,{className:p("animate-spin",s[o],t)},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/components/ui/loading.tsx",lineNumber:21,columnNumber:5},void 0)},rr=({message:o="Loading...",size:t="md",className:s})=>e.jsxDEV("div",{className:p("flex items-center justify-center py-8",s),children:[e.jsxDEV(or,{size:t},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/components/ui/loading.tsx",lineNumber:44,columnNumber:7},void 0),e.jsxDEV("span",{className:"ml-2 text-gray-600",children:o},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/components/ui/loading.tsx",lineNumber:45,columnNumber:7},void 0)]},void 0,!0,{fileName:"C:/Users/thudao/coding/example-react/client/src/components/ui/loading.tsx",lineNumber:43,columnNumber:5},void 0),ir=({message:o="Something went wrong",error:t,onRetry:s,className:r})=>e.jsxDEV("div",{className:p("text-center py-8 text-red-600",r),children:[e.jsxDEV("p",{className:"font-medium",children:o},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/components/ui/loading.tsx",lineNumber:65,columnNumber:7},void 0),t?.message&&e.jsxDEV("p",{className:"text-sm mt-2 text-red-500",children:t.message},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/components/ui/loading.tsx",lineNumber:67,columnNumber:9},void 0),s&&e.jsxDEV("button",{onClick:s,className:"mt-4 px-4 py-2 bg-red-600 text-white rounded-md hover:bg-red-700 transition-colors",children:"Try Again"},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/components/ui/loading.tsx",lineNumber:70,columnNumber:9},void 0)]},void 0,!0,{fileName:"C:/Users/thudao/coding/example-react/client/src/components/ui/loading.tsx",lineNumber:64,columnNumber:5},void 0),nr=({message:o="No data found",description:t,icon:s,action:r,className:i})=>e.jsxDEV("div",{className:p("text-center py-8 text-gray-500",i),children:[s&&e.jsxDEV("div",{className:"mb-4",children:s},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/components/ui/loading.tsx",lineNumber:98,columnNumber:16},void 0),e.jsxDEV("p",{className:"font-medium",children:o},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/components/ui/loading.tsx",lineNumber:99,columnNumber:7},void 0),t&&e.jsxDEV("p",{className:"text-sm mt-2",children:t},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/components/ui/loading.tsx",lineNumber:101,columnNumber:9},void 0),r&&e.jsxDEV("div",{className:"mt-4",children:r},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/components/ui/loading.tsx",lineNumber:104,columnNumber:9},void 0)]},void 0,!0,{fileName:"C:/Users/thudao/coding/example-react/client/src/components/ui/loading.tsx",lineNumber:97,columnNumber:5},void 0);function Te({...o}){return e.jsxDEV(Ds,{"data-slot":"alert-dialog",...o},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/components/ui/alert-dialog.tsx",lineNumber:10,columnNumber:10},this)}function ar({...o}){return e.jsxDEV(ks,{"data-slot":"alert-dialog-trigger",...o},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/components/ui/alert-dialog.tsx",lineNumber:17,columnNumber:5},this)}function lr({...o}){return e.jsxDEV(Vs,{"data-slot":"alert-dialog-portal",...o},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/components/ui/alert-dialog.tsx",lineNumber:25,columnNumber:5},this)}function cr({className:o,...t}){return e.jsxDEV(Rs,{"data-slot":"alert-dialog-overlay",className:p("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50",o),...t},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/components/ui/alert-dialog.tsx",lineNumber:34,columnNumber:5},this)}function Le({className:o,...t}){return e.jsxDEV(lr,{children:[e.jsxDEV(cr,{},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/components/ui/alert-dialog.tsx",lineNumber:51,columnNumber:7},this),e.jsxDEV(Es,{"data-slot":"alert-dialog-content",className:p("bg-background data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 fixed top-[50%] left-[50%] z-50 grid w-full max-w-[calc(100%-2rem)] translate-x-[-50%] translate-y-[-50%] gap-4 rounded-lg border p-6 shadow-lg duration-200 sm:max-w-lg",o),...t},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/components/ui/alert-dialog.tsx",lineNumber:52,columnNumber:7},this)]},void 0,!0,{fileName:"C:/Users/thudao/coding/example-react/client/src/components/ui/alert-dialog.tsx",lineNumber:50,columnNumber:5},this)}function Pe({className:o,...t}){return e.jsxDEV("div",{"data-slot":"alert-dialog-header",className:p("flex flex-col gap-2 text-center sm:text-left",o),...t},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/components/ui/alert-dialog.tsx",lineNumber:69,columnNumber:5},this)}function Ae({className:o,...t}){return e.jsxDEV("div",{"data-slot":"alert-dialog-footer",className:p("flex flex-col-reverse gap-2 sm:flex-row sm:justify-end",o),...t},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/components/ui/alert-dialog.tsx",lineNumber:82,columnNumber:5},this)}function Me({className:o,...t}){return e.jsxDEV(Us,{"data-slot":"alert-dialog-title",className:p("text-lg font-semibold",o),...t},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/components/ui/alert-dialog.tsx",lineNumber:98,columnNumber:5},this)}function Ie({className:o,...t}){return e.jsxDEV(ys,{"data-slot":"alert-dialog-description",className:p("text-muted-foreground text-sm",o),...t},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/components/ui/alert-dialog.tsx",lineNumber:111,columnNumber:5},this)}function Fe({className:o,...t}){return e.jsxDEV(ws,{className:p(lt(),o),...t},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/components/ui/alert-dialog.tsx",lineNumber:124,columnNumber:5},this)}function $e({className:o,...t}){return e.jsxDEV(js,{className:p(lt({variant:"outline"}),o),...t},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/components/ui/alert-dialog.tsx",lineNumber:136,columnNumber:5},this)}function mr({open:o,onOpenChange:t,onConfirm:s,title:r="Are you sure?",description:i="This action cannot be undone.",isLoading:a=!1}){return e.jsxDEV(Te,{open:o,onOpenChange:t,children:e.jsxDEV(Le,{children:[e.jsxDEV(Pe,{children:[e.jsxDEV(Me,{className:"flex items-center gap-2",children:[e.jsxDEV(ve,{className:"w-5 h-5 text-red-500"},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/components/ui/delete-dialog.tsx",lineNumber:36,columnNumber:13},this),r]},void 0,!0,{fileName:"C:/Users/thudao/coding/example-react/client/src/components/ui/delete-dialog.tsx",lineNumber:35,columnNumber:11},this),e.jsxDEV(Ie,{children:i},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/components/ui/delete-dialog.tsx",lineNumber:39,columnNumber:11},this)]},void 0,!0,{fileName:"C:/Users/thudao/coding/example-react/client/src/components/ui/delete-dialog.tsx",lineNumber:34,columnNumber:9},this),e.jsxDEV(Ae,{children:[e.jsxDEV($e,{disabled:a,children:"Cancel"},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/components/ui/delete-dialog.tsx",lineNumber:44,columnNumber:11},this),e.jsxDEV(Fe,{onClick:s,disabled:a,className:"bg-red-600 hover:bg-red-700 focus:ring-red-600",children:a?e.jsxDEV(e.Fragment,{children:[e.jsxDEV(Y,{className:"w-4 h-4 mr-2 animate-spin"},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/components/ui/delete-dialog.tsx",lineNumber:54,columnNumber:17},this),"Deleting..."]},void 0,!0,{fileName:"C:/Users/thudao/coding/example-react/client/src/components/ui/delete-dialog.tsx",lineNumber:53,columnNumber:15},this):e.jsxDEV(e.Fragment,{children:[e.jsxDEV(ve,{className:"w-4 h-4 mr-2"},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/components/ui/delete-dialog.tsx",lineNumber:59,columnNumber:17},this),"Delete"]},void 0,!0,{fileName:"C:/Users/thudao/coding/example-react/client/src/components/ui/delete-dialog.tsx",lineNumber:58,columnNumber:15},this)},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/components/ui/delete-dialog.tsx",lineNumber:47,columnNumber:11},this)]},void 0,!0,{fileName:"C:/Users/thudao/coding/example-react/client/src/components/ui/delete-dialog.tsx",lineNumber:43,columnNumber:9},this)]},void 0,!0,{fileName:"C:/Users/thudao/coding/example-react/client/src/components/ui/delete-dialog.tsx",lineNumber:33,columnNumber:7},this)},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/components/ui/delete-dialog.tsx",lineNumber:32,columnNumber:5},this)}const ur=G("/todo")({beforeLoad:({context:o,location:t})=>{if(!L.getState().isAuthenticated)throw ke({to:"/login",search:{redirect:t.href}})},component:dr});function dr(){const[o,t]=l.useState(""),[s,r]=l.useState(""),[i,a]=l.useState(""),[n,c]=l.useState(void 0),[m,u]=l.useState("createdAt"),[b,h]=l.useState("desc"),[g,y]=l.useState(null),[R,w]=l.useState(""),[x,U]=l.useState(!1),[N,S]=l.useState(null),f=l.useMemo(()=>({status:n,sortBy:m,sortOrder:b,limit:50}),[n,m,b]),{data:v,isLoading:O,error:Z,refetch:re}=Xo(f),V=Zo(),je=er(),we=tr(),qe=sr(),ns=()=>o.trim()?o.trim().length<3?(a("Title must be at least 3 characters long"),!1):o.trim().length>200?(a("Title must be less than 200 characters"),!1):s.trim().length>2e3?(a("Content must be less than 2000 characters"),!1):(a(""),!0):(a("Title is required"),!1),as=C=>{C.preventDefault(),ns()&&V.mutate({title:o.trim(),content:s.trim()||o.trim()},{onSuccess:()=>{t(""),r(""),a("")},onError:$=>{a($.message||"Failed to create todo")}})},ls=(C,$)=>{we.mutate({id:C,data:{status:$}})},ct=(C,$)=>{y(C),w($)},mt=C=>{R.trim()&&R.trim()!==""&&je.mutate({id:C,data:{title:R.trim()}},{onSuccess:()=>{y(null),w("")},onError:$=>{console.error("Failed to update todo title:",$)}})},ut=()=>{y(null),w("")},cs=C=>{S(C),U(!0)},ms=()=>{N&&qe.mutate(N,{onSuccess:()=>{U(!1),S(null)},onError:()=>{}})};return e.jsxDEV("div",{className:"min-h-screen bg-gray-50",children:[e.jsxDEV(ue,{title:"Todo App"},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/routes/todo.tsx",lineNumber:151,columnNumber:7},this),e.jsxDEV("div",{className:"py-8",children:e.jsxDEV("div",{className:"max-w-2xl mx-auto px-4",children:[e.jsxDEV("div",{className:"text-center mb-8",children:[e.jsxDEV("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Todo Manager"},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/routes/todo.tsx",lineNumber:155,columnNumber:13},this),e.jsxDEV("p",{className:"text-gray-600",children:"Organize your tasks and boost productivity"},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/routes/todo.tsx",lineNumber:156,columnNumber:13},this)]},void 0,!0,{fileName:"C:/Users/thudao/coding/example-react/client/src/routes/todo.tsx",lineNumber:154,columnNumber:11},this),e.jsxDEV(K,{className:"mb-6",children:[e.jsxDEV(H,{children:e.jsxDEV(J,{children:"Add New Task"},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/routes/todo.tsx",lineNumber:161,columnNumber:13},this)},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/routes/todo.tsx",lineNumber:160,columnNumber:11},this),e.jsxDEV(Q,{children:e.jsxDEV("form",{onSubmit:as,className:"space-y-4",children:[(i||V.error)&&e.jsxDEV("div",{className:"p-3 text-sm text-red-600 bg-red-50 border border-red-200 rounded-md",children:i||V.error?.message||"Failed to create todo"},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/routes/todo.tsx",lineNumber:165,columnNumber:65},this),e.jsxDEV("div",{className:"flex gap-2",children:[e.jsxDEV(P,{placeholder:"Enter task title...",value:o,onChange:C=>{t(C.target.value),i&&a("")},className:"flex-1",required:!0,maxLength:200},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/routes/todo.tsx",lineNumber:169,columnNumber:17},this),e.jsxDEV(d,{type:"submit",disabled:V.isPending||!o.trim(),children:V.isPending?e.jsxDEV(Y,{className:"w-4 h-4 animate-spin"},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/routes/todo.tsx",lineNumber:174,columnNumber:51},this):e.jsxDEV(e.Fragment,{children:[e.jsxDEV(Ut,{className:"w-4 h-4 mr-2"},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/routes/todo.tsx",lineNumber:175,columnNumber:23},this),"Add Task"]},void 0,!0,{fileName:"C:/Users/thudao/coding/example-react/client/src/routes/todo.tsx",lineNumber:174,columnNumber:98},this)},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/routes/todo.tsx",lineNumber:173,columnNumber:17},this)]},void 0,!0,{fileName:"C:/Users/thudao/coding/example-react/client/src/routes/todo.tsx",lineNumber:168,columnNumber:15},this),e.jsxDEV(P,{placeholder:"Enter task description (optional)...",value:s,onChange:C=>r(C.target.value),maxLength:2e3},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/routes/todo.tsx",lineNumber:180,columnNumber:15},this),e.jsxDEV("div",{className:"text-xs text-gray-500",children:["Title: ",o.length,"/200 characters",s&&` • Description: ${s.length}/2000 characters`]},void 0,!0,{fileName:"C:/Users/thudao/coding/example-react/client/src/routes/todo.tsx",lineNumber:181,columnNumber:15},this)]},void 0,!0,{fileName:"C:/Users/thudao/coding/example-react/client/src/routes/todo.tsx",lineNumber:164,columnNumber:13},this)},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/routes/todo.tsx",lineNumber:163,columnNumber:11},this)]},void 0,!0,{fileName:"C:/Users/thudao/coding/example-react/client/src/routes/todo.tsx",lineNumber:159,columnNumber:9},this),e.jsxDEV(K,{children:[e.jsxDEV(H,{children:e.jsxDEV("div",{className:"flex items-center justify-between",children:[e.jsxDEV("div",{children:[e.jsxDEV(J,{children:"Your Tasks"},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/routes/todo.tsx",lineNumber:193,columnNumber:17},this),v&&e.jsxDEV("p",{className:"text-sm text-gray-600 mt-1",children:[v.total," total • ",v.todos.filter(C=>C.status===F.DONE).length," completed"]},void 0,!0,{fileName:"C:/Users/thudao/coding/example-react/client/src/routes/todo.tsx",lineNumber:194,columnNumber:31},this)]},void 0,!0,{fileName:"C:/Users/thudao/coding/example-react/client/src/routes/todo.tsx",lineNumber:192,columnNumber:15},this),e.jsxDEV("div",{className:"flex items-center gap-2 text-sm",children:[e.jsxDEV("select",{value:n||"",onChange:C=>c(C.target.value||void 0),className:"px-2 py-1 border rounded",children:[e.jsxDEV("option",{value:"",children:"All Status"},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/routes/todo.tsx",lineNumber:200,columnNumber:19},this),e.jsxDEV("option",{value:F.INITIAL,children:"Initial"},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/routes/todo.tsx",lineNumber:201,columnNumber:19},this),e.jsxDEV("option",{value:F.TODO,children:"Todo"},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/routes/todo.tsx",lineNumber:202,columnNumber:19},this),e.jsxDEV("option",{value:F.DOING,children:"Doing"},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/routes/todo.tsx",lineNumber:203,columnNumber:19},this),e.jsxDEV("option",{value:F.REVIEW,children:"Review"},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/routes/todo.tsx",lineNumber:204,columnNumber:19},this),e.jsxDEV("option",{value:F.DONE,children:"Done"},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/routes/todo.tsx",lineNumber:205,columnNumber:19},this),e.jsxDEV("option",{value:F.KEEPING,children:"Keeping"},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/routes/todo.tsx",lineNumber:206,columnNumber:19},this),e.jsxDEV("option",{value:F.CANCELLED,children:"Cancelled"},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/routes/todo.tsx",lineNumber:207,columnNumber:19},this)]},void 0,!0,{fileName:"C:/Users/thudao/coding/example-react/client/src/routes/todo.tsx",lineNumber:199,columnNumber:17},this),e.jsxDEV("select",{value:`${m}-${b}`,onChange:C=>{const[$,us]=C.target.value.split("-");u($),h(us)},className:"px-2 py-1 border rounded",children:[e.jsxDEV("option",{value:"createdAt-desc",children:"Newest First"},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/routes/todo.tsx",lineNumber:214,columnNumber:19},this),e.jsxDEV("option",{value:"createdAt-asc",children:"Oldest First"},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/routes/todo.tsx",lineNumber:215,columnNumber:19},this),e.jsxDEV("option",{value:"title-asc",children:"Title A-Z"},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/routes/todo.tsx",lineNumber:216,columnNumber:19},this),e.jsxDEV("option",{value:"title-desc",children:"Title Z-A"},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/routes/todo.tsx",lineNumber:217,columnNumber:19},this),e.jsxDEV("option",{value:"status-asc",children:"Status A-Z"},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/routes/todo.tsx",lineNumber:218,columnNumber:19},this)]},void 0,!0,{fileName:"C:/Users/thudao/coding/example-react/client/src/routes/todo.tsx",lineNumber:209,columnNumber:17},this)]},void 0,!0,{fileName:"C:/Users/thudao/coding/example-react/client/src/routes/todo.tsx",lineNumber:198,columnNumber:15},this)]},void 0,!0,{fileName:"C:/Users/thudao/coding/example-react/client/src/routes/todo.tsx",lineNumber:191,columnNumber:13},this)},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/routes/todo.tsx",lineNumber:190,columnNumber:11},this),e.jsxDEV(Q,{children:O?e.jsxDEV(rr,{message:"Loading tasks..."},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/routes/todo.tsx",lineNumber:224,columnNumber:26},this):Z?e.jsxDEV(ir,{message:"Failed to load tasks",error:Z,onRetry:()=>re()},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/routes/todo.tsx",lineNumber:224,columnNumber:80},this):v?.todos&&v.todos.length>0?e.jsxDEV("div",{className:"space-y-3",children:v.todos.map(C=>e.jsxDEV("div",{className:"flex items-center space-x-3 p-3 border rounded-lg",children:[e.jsxDEV("select",{value:C.status,onChange:$=>ls(C.id,$.target.value),disabled:we.isPending,className:"px-2 py-1 border rounded text-xs min-w-[100px]",children:[e.jsxDEV("option",{value:F.INITIAL,children:"Initial"},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/routes/todo.tsx",lineNumber:228,columnNumber:23},this),e.jsxDEV("option",{value:F.TODO,children:"Todo"},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/routes/todo.tsx",lineNumber:229,columnNumber:23},this),e.jsxDEV("option",{value:F.DOING,children:"Doing"},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/routes/todo.tsx",lineNumber:230,columnNumber:23},this),e.jsxDEV("option",{value:F.REVIEW,children:"Review"},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/routes/todo.tsx",lineNumber:231,columnNumber:23},this),e.jsxDEV("option",{value:F.DONE,children:"Done"},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/routes/todo.tsx",lineNumber:232,columnNumber:23},this),e.jsxDEV("option",{value:F.KEEPING,children:"Keeping"},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/routes/todo.tsx",lineNumber:233,columnNumber:23},this),e.jsxDEV("option",{value:F.CANCELLED,children:"Cancelled"},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/routes/todo.tsx",lineNumber:234,columnNumber:23},this)]},void 0,!0,{fileName:"C:/Users/thudao/coding/example-react/client/src/routes/todo.tsx",lineNumber:227,columnNumber:21},this),e.jsxDEV("div",{className:"flex-1",children:[g===C.id?e.jsxDEV("div",{className:"flex items-center space-x-2",children:[e.jsxDEV(P,{value:R,onChange:$=>w($.target.value),className:"text-sm",onKeyDown:$=>{$.key==="Enter"?mt(C.id):$.key==="Escape"&&ut()},autoFocus:!0},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/routes/todo.tsx",lineNumber:240,columnNumber:27},this),e.jsxDEV(d,{size:"sm",variant:"outline",onClick:()=>mt(C.id),disabled:je.isPending,children:e.jsxDEV(Ce,{className:"w-3 h-3"},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/routes/todo.tsx",lineNumber:248,columnNumber:29},this)},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/routes/todo.tsx",lineNumber:247,columnNumber:27},this),e.jsxDEV(d,{size:"sm",variant:"outline",onClick:ut,children:e.jsxDEV(nt,{className:"w-3 h-3"},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/routes/todo.tsx",lineNumber:251,columnNumber:29},this)},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/routes/todo.tsx",lineNumber:250,columnNumber:27},this)]},void 0,!0,{fileName:"C:/Users/thudao/coding/example-react/client/src/routes/todo.tsx",lineNumber:239,columnNumber:50},this):e.jsxDEV("div",{className:`text-sm font-medium cursor-pointer ${C.status===F.DONE?"line-through text-gray-500":"text-gray-900"}`,onClick:()=>ct(C.id,C.title),children:C.title},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/routes/todo.tsx",lineNumber:253,columnNumber:34},this),C.content!==C.title&&e.jsxDEV("p",{className:"text-xs text-gray-600 mt-1",children:C.content},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/routes/todo.tsx",lineNumber:257,columnNumber:55},this),e.jsxDEV("p",{className:"text-xs text-gray-400 mt-1",children:["Created: ",new Date(C.createdAt).toLocaleDateString()]},void 0,!0,{fileName:"C:/Users/thudao/coding/example-react/client/src/routes/todo.tsx",lineNumber:258,columnNumber:23},this)]},void 0,!0,{fileName:"C:/Users/thudao/coding/example-react/client/src/routes/todo.tsx",lineNumber:237,columnNumber:21},this),g!==C.id&&e.jsxDEV(e.Fragment,{children:[e.jsxDEV(d,{variant:"outline",size:"sm",onClick:()=>ct(C.id,C.title),children:e.jsxDEV(Ss,{className:"w-4 h-4"},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/routes/todo.tsx",lineNumber:265,columnNumber:27},this)},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/routes/todo.tsx",lineNumber:264,columnNumber:25},this),e.jsxDEV(d,{variant:"destructive",size:"sm",onClick:()=>cs(C.id),disabled:qe.isPending,children:e.jsxDEV(ve,{className:"w-4 h-4"},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/routes/todo.tsx",lineNumber:268,columnNumber:27},this)},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/routes/todo.tsx",lineNumber:267,columnNumber:25},this)]},void 0,!0,{fileName:"C:/Users/thudao/coding/example-react/client/src/routes/todo.tsx",lineNumber:263,columnNumber:49},this)]},C.id,!0,{fileName:"C:/Users/thudao/coding/example-react/client/src/routes/todo.tsx",lineNumber:225,columnNumber:46},this))},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/routes/todo.tsx",lineNumber:224,columnNumber:217},this):e.jsxDEV(nr,{message:"No tasks yet",description:"Create your first task above to get started!",icon:e.jsxDEV(Ts,{className:"w-12 h-12 mx-auto text-gray-400"},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/routes/todo.tsx",lineNumber:272,columnNumber:124},this)},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/routes/todo.tsx",lineNumber:272,columnNumber:24},this)},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/routes/todo.tsx",lineNumber:223,columnNumber:11},this)]},void 0,!0,{fileName:"C:/Users/thudao/coding/example-react/client/src/routes/todo.tsx",lineNumber:189,columnNumber:9},this)]},void 0,!0,{fileName:"C:/Users/thudao/coding/example-react/client/src/routes/todo.tsx",lineNumber:153,columnNumber:9},this)},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/routes/todo.tsx",lineNumber:152,columnNumber:7},this),e.jsxDEV(mr,{open:x,onOpenChange:C=>{U(C),C||S(null)},onConfirm:ms,title:"Delete Todo",description:"Are you sure you want to delete this todo? This action cannot be undone.",isLoading:qe.isPending},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/routes/todo.tsx",lineNumber:279,columnNumber:7},this)]},void 0,!0,{fileName:"C:/Users/thudao/coding/example-react/client/src/routes/todo.tsx",lineNumber:150,columnNumber:10},this)}const hr=G("/register")({component:xr});function xr(){const o=ae(),t=Jo(),[s,r]=l.useState({username:"",email:"",password:"",confirmPassword:""}),[i,a]=l.useState(""),n=async c=>{if(c.preventDefault(),a(""),s.password!==s.confirmPassword){a("Passwords do not match");return}t.mutate({username:s.username,email:s.email,password:s.password},{onSuccess:()=>{o({to:"/"})},onError:m=>{a(m.message||"Registration failed. Please try again.")}})};return e.jsxDEV("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 relative",children:[e.jsxDEV(D,{to:"/",className:"absolute top-4 left-4",children:e.jsxDEV(d,{variant:"ghost",size:"sm",children:[e.jsxDEV(ne,{className:"w-4 h-4 mr-2"},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/routes/register.tsx",lineNumber:48,columnNumber:11},this),"Back to Home"]},void 0,!0,{fileName:"C:/Users/thudao/coding/example-react/client/src/routes/register.tsx",lineNumber:47,columnNumber:9},this)},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/routes/register.tsx",lineNumber:46,columnNumber:7},this),e.jsxDEV(K,{className:"w-full max-w-md",children:[e.jsxDEV(H,{className:"text-center",children:[e.jsxDEV(J,{className:"text-2xl",children:"Sign Up"},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/routes/register.tsx",lineNumber:55,columnNumber:11},this),e.jsxDEV(ie,{children:"Create a new account to get started"},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/routes/register.tsx",lineNumber:56,columnNumber:11},this)]},void 0,!0,{fileName:"C:/Users/thudao/coding/example-react/client/src/routes/register.tsx",lineNumber:54,columnNumber:9},this),e.jsxDEV(Q,{children:[e.jsxDEV("form",{onSubmit:n,className:"space-y-4",children:[(i||t.error)&&e.jsxDEV("div",{className:"p-3 text-sm text-red-600 bg-red-50 border border-red-200 rounded-md",children:i||t.error?.message||"Registration failed. Please try again."},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/routes/register.tsx",lineNumber:60,columnNumber:51},this),e.jsxDEV("div",{className:"space-y-2",children:[e.jsxDEV(A,{htmlFor:"username",children:"Username"},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/routes/register.tsx",lineNumber:65,columnNumber:15},this),e.jsxDEV(P,{id:"username",type:"text",placeholder:"Enter your username",value:s.username,onChange:c=>r({...s,username:c.target.value}),required:!0},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/routes/register.tsx",lineNumber:66,columnNumber:15},this)]},void 0,!0,{fileName:"C:/Users/thudao/coding/example-react/client/src/routes/register.tsx",lineNumber:64,columnNumber:13},this),e.jsxDEV("div",{className:"space-y-2",children:[e.jsxDEV(A,{htmlFor:"email",children:"Email"},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/routes/register.tsx",lineNumber:73,columnNumber:15},this),e.jsxDEV(P,{id:"email",type:"email",placeholder:"Enter your email",value:s.email,onChange:c=>r({...s,email:c.target.value}),required:!0},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/routes/register.tsx",lineNumber:74,columnNumber:15},this)]},void 0,!0,{fileName:"C:/Users/thudao/coding/example-react/client/src/routes/register.tsx",lineNumber:72,columnNumber:13},this),e.jsxDEV("div",{className:"space-y-2",children:[e.jsxDEV(A,{htmlFor:"password",children:"Password"},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/routes/register.tsx",lineNumber:81,columnNumber:15},this),e.jsxDEV(P,{id:"password",type:"password",placeholder:"Enter your password",value:s.password,onChange:c=>r({...s,password:c.target.value}),required:!0},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/routes/register.tsx",lineNumber:82,columnNumber:15},this)]},void 0,!0,{fileName:"C:/Users/thudao/coding/example-react/client/src/routes/register.tsx",lineNumber:80,columnNumber:13},this),e.jsxDEV("div",{className:"space-y-2",children:[e.jsxDEV(A,{htmlFor:"confirmPassword",children:"Confirm Password"},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/routes/register.tsx",lineNumber:89,columnNumber:15},this),e.jsxDEV(P,{id:"confirmPassword",type:"password",placeholder:"Confirm your password",value:s.confirmPassword,onChange:c=>r({...s,confirmPassword:c.target.value}),required:!0},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/routes/register.tsx",lineNumber:90,columnNumber:15},this)]},void 0,!0,{fileName:"C:/Users/thudao/coding/example-react/client/src/routes/register.tsx",lineNumber:88,columnNumber:13},this),e.jsxDEV(d,{type:"submit",className:"w-full",disabled:t.isPending,children:t.isPending?"Creating Account...":"Sign Up"},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/routes/register.tsx",lineNumber:96,columnNumber:13},this)]},void 0,!0,{fileName:"C:/Users/thudao/coding/example-react/client/src/routes/register.tsx",lineNumber:59,columnNumber:11},this),e.jsxDEV("div",{className:"text-center",children:e.jsxDEV("div",{className:"text-sm text-gray-600",children:["Already have an account?"," ",e.jsxDEV(D,{to:"/login",className:"text-blue-600 hover:underline",search:{redirect:"/"},children:"Sign in"},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/routes/register.tsx",lineNumber:103,columnNumber:15},this)]},void 0,!0,{fileName:"C:/Users/thudao/coding/example-react/client/src/routes/register.tsx",lineNumber:101,columnNumber:13},this)},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/routes/register.tsx",lineNumber:100,columnNumber:11},this)]},void 0,!0,{fileName:"C:/Users/thudao/coding/example-react/client/src/routes/register.tsx",lineNumber:58,columnNumber:9},this)]},void 0,!0,{fileName:"C:/Users/thudao/coding/example-react/client/src/routes/register.tsx",lineNumber:53,columnNumber:7},this)]},void 0,!0,{fileName:"C:/Users/thudao/coding/example-react/client/src/routes/register.tsx",lineNumber:44,columnNumber:10},this)}const le=l.forwardRef(({className:o,...t},s)=>e.jsxDEV(yt,{ref:s,className:p("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",o),...t},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/components/ui/avatar.tsx",lineNumber:10,columnNumber:3},void 0));le.displayName=yt.displayName;const ce=l.forwardRef(({className:o,...t},s)=>e.jsxDEV(jt,{ref:s,className:p("aspect-square h-full w-full",o),...t},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/components/ui/avatar.tsx",lineNumber:25,columnNumber:3},void 0));ce.displayName=jt.displayName;const me=l.forwardRef(({className:o,...t},s)=>e.jsxDEV(wt,{ref:s,className:p("flex h-full w-full items-center justify-center rounded-full bg-muted",o),...t},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/components/ui/avatar.tsx",lineNumber:37,columnNumber:3},void 0));me.displayName=wt.displayName;function Nr({onUpload:o,accept:t="image/*",maxSize:s=5,children:r,className:i="",disabled:a=!1}){const n=l.useRef(null),[c,m]=l.useState(!1),u=async h=>{const g=h.target.files?.[0];if(g){if(g.size>s*1024*1024){E.error(`File size must be less than ${s}MB`);return}if(t&&t!=="*/*"&&!t.split(",").map(w=>w.trim()).some(w=>{if(w.includes("*")){const x=w.split("/")[0];return g.type.startsWith(x+"/")}return g.type===w})){E.error("Invalid file type");return}m(!0);try{const y=await o(g);E.success("File uploaded successfully!")}catch(y){E.error(y.message||"Upload failed")}finally{m(!1),n.current&&(n.current.value="")}}},b=()=>{!a&&!c&&n.current?.click()};return e.jsxDEV(e.Fragment,{children:[e.jsxDEV("input",{ref:n,type:"file",accept:t,onChange:u,className:"hidden",disabled:a||c},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/components/ui/file-upload.tsx",lineNumber:77,columnNumber:7},this),r?e.jsxDEV("div",{onClick:b,className:`cursor-pointer ${i}`,children:r},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/components/ui/file-upload.tsx",lineNumber:87,columnNumber:9},this):e.jsxDEV(d,{type:"button",variant:"outline",onClick:b,disabled:a||c,className:i,children:c?e.jsxDEV(e.Fragment,{children:[e.jsxDEV(Y,{className:"w-4 h-4 mr-2 animate-spin"},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/components/ui/file-upload.tsx",lineNumber:100,columnNumber:15},this),"Uploading..."]},void 0,!0,{fileName:"C:/Users/thudao/coding/example-react/client/src/components/ui/file-upload.tsx",lineNumber:99,columnNumber:13},this):e.jsxDEV(e.Fragment,{children:[e.jsxDEV(Ps,{className:"w-4 h-4 mr-2"},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/components/ui/file-upload.tsx",lineNumber:105,columnNumber:15},this),"Upload File"]},void 0,!0,{fileName:"C:/Users/thudao/coding/example-react/client/src/components/ui/file-upload.tsx",lineNumber:104,columnNumber:13},this)},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/components/ui/file-upload.tsx",lineNumber:91,columnNumber:9},this)]},void 0,!0,{fileName:"C:/Users/thudao/coding/example-react/client/src/components/ui/file-upload.tsx",lineNumber:76,columnNumber:5},this)}function fr({onUpload:o,disabled:t=!1,className:s=""}){return e.jsxDEV(Nr,{onUpload:o,accept:"image/*",maxSize:2,disabled:t,className:s,children:e.jsxDEV(d,{type:"button",size:"sm",variant:"outline",className:"absolute -bottom-2 -right-2 rounded-full w-8 h-8 p-0",disabled:t,children:e.jsxDEV(Ls,{className:"w-4 h-4"},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/components/ui/file-upload.tsx",lineNumber:137,columnNumber:9},this)},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/components/ui/file-upload.tsx",lineNumber:130,columnNumber:7},this)},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/components/ui/file-upload.tsx",lineNumber:123,columnNumber:5},this)}class pr{async uploadFile(t){if(!t.type.startsWith("image/"))throw new Error("Only image files are allowed");if(t.size>5*1024*1024)throw new Error("File size must be less than 5MB");const s=new FormData;s.append("file",t);try{const r=await j.post("/upload/image",s);if(r.success&&r.data)return r.data.file.url;throw new Error(r.message||"Upload failed")}catch(r){throw new Error(r.message||"Upload failed")}}async uploadAvatar(t){if(!t.type.startsWith("image/"))throw new Error("Only image files are allowed for avatars");if(t.size>2*1024*1024)throw new Error("Avatar file size must be less than 2MB");const s=new FormData;s.append("file",t);try{const r=await j.post("/upload/avatar",s);if(r.success&&r.data)return r.data.avatarUrl||r.data.file.url;throw new Error(r.message||"Avatar upload failed")}catch(r){throw new Error(r.message||"Avatar upload failed")}}}const gr=new pr,ye=Is,Yt=Fs,br=As,Gt=l.forwardRef(({className:o,...t},s)=>e.jsxDEV(Vt,{ref:s,className:p("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",o),...t},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/components/ui/dialog.tsx",lineNumber:19,columnNumber:3},void 0));Gt.displayName=Vt.displayName;const xe=l.forwardRef(({className:o,children:t,...s},r)=>e.jsxDEV(br,{children:[e.jsxDEV(Gt,{},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/components/ui/dialog.tsx",lineNumber:35,columnNumber:5},void 0),e.jsxDEV(Rt,{ref:r,className:p("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",o),...s,children:[t,e.jsxDEV(Ms,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[e.jsxDEV(nt,{className:"h-4 w-4"},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/components/ui/dialog.tsx",lineNumber:46,columnNumber:9},void 0),e.jsxDEV("span",{className:"sr-only",children:"Close"},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/components/ui/dialog.tsx",lineNumber:47,columnNumber:9},void 0)]},void 0,!0,{fileName:"C:/Users/thudao/coding/example-react/client/src/components/ui/dialog.tsx",lineNumber:45,columnNumber:7},void 0)]},void 0,!0,{fileName:"C:/Users/thudao/coding/example-react/client/src/components/ui/dialog.tsx",lineNumber:36,columnNumber:5},void 0)]},void 0,!0,{fileName:"C:/Users/thudao/coding/example-react/client/src/components/ui/dialog.tsx",lineNumber:34,columnNumber:3},void 0));xe.displayName=Rt.displayName;const Ne=({className:o,...t})=>e.jsxDEV("div",{className:p("flex flex-col space-y-1.5 text-center sm:text-left",o),...t},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/components/ui/dialog.tsx",lineNumber:58,columnNumber:3},void 0);Ne.displayName="DialogHeader";const Oe=({className:o,...t})=>e.jsxDEV("div",{className:p("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",o),...t},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/components/ui/dialog.tsx",lineNumber:72,columnNumber:3},void 0);Oe.displayName="DialogFooter";const fe=l.forwardRef(({className:o,...t},s)=>e.jsxDEV(kt,{ref:s,className:p("text-lg font-semibold leading-none tracking-tight",o),...t},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/components/ui/dialog.tsx",lineNumber:86,columnNumber:3},void 0));fe.displayName=kt.displayName;const pe=l.forwardRef(({className:o,...t},s)=>e.jsxDEV(St,{ref:s,className:p("text-sm text-muted-foreground",o),...t},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/components/ui/dialog.tsx",lineNumber:101,columnNumber:3},void 0));pe.displayName=St.displayName;function vr({open:o,onOpenChange:t,onSubmit:s,isLoading:r=!1}){const[i,a]=l.useState(""),[n,c]=l.useState(""),[m,u]=l.useState(""),[b,h]=l.useState(!1),[g,y]=l.useState(!1),[R,w]=l.useState(!1),[x,U]=l.useState({}),N=()=>{const v={};return i||(v.currentPassword="Current password is required"),n?n.length<8?v.newPassword="Password must be at least 8 characters":/(?=.*[a-z])(?=.*[A-Z])(?=.*\d)/.test(n)||(v.newPassword="Password must contain uppercase, lowercase, and number"):v.newPassword="New password is required",m?n!==m&&(v.confirmPassword="Passwords do not match"):v.confirmPassword="Please confirm your new password",i===n&&(v.newPassword="New password must be different from current password"),U(v),Object.keys(v).length===0},S=async v=>{if(v.preventDefault(),!!N())try{await s({currentPassword:i,newPassword:n}),a(""),c(""),u(""),U({}),E.success("Password changed successfully!"),t(!1)}catch(O){E.error(O.message||"Failed to change password")}},f=()=>{r||(a(""),c(""),u(""),U({}),t(!1))};return e.jsxDEV(ye,{open:o,onOpenChange:f,children:e.jsxDEV(xe,{className:"sm:max-w-md",children:[e.jsxDEV(Ne,{children:[e.jsxDEV(fe,{className:"flex items-center gap-2",children:[e.jsxDEV(He,{className:"w-5 h-5"},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/components/ui/change-password-dialog.tsx",lineNumber:102,columnNumber:13},this),"Change Password"]},void 0,!0,{fileName:"C:/Users/thudao/coding/example-react/client/src/components/ui/change-password-dialog.tsx",lineNumber:101,columnNumber:11},this),e.jsxDEV(pe,{children:"Enter your current password and choose a new secure password."},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/components/ui/change-password-dialog.tsx",lineNumber:105,columnNumber:11},this)]},void 0,!0,{fileName:"C:/Users/thudao/coding/example-react/client/src/components/ui/change-password-dialog.tsx",lineNumber:100,columnNumber:9},this),e.jsxDEV("form",{onSubmit:S,className:"space-y-4",children:[e.jsxDEV("div",{className:"space-y-2",children:[e.jsxDEV(A,{htmlFor:"currentPassword",children:"Current Password"},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/components/ui/change-password-dialog.tsx",lineNumber:113,columnNumber:13},this),e.jsxDEV("div",{className:"relative",children:[e.jsxDEV(P,{id:"currentPassword",type:b?"text":"password",value:i,onChange:v=>{a(v.target.value),x.currentPassword&&U({...x,currentPassword:""})},placeholder:"Enter current password",disabled:r,className:x.currentPassword?"border-red-500":""},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/components/ui/change-password-dialog.tsx",lineNumber:115,columnNumber:15},this),e.jsxDEV(d,{type:"button",variant:"ghost",size:"sm",className:"absolute right-0 top-0 h-full px-3 py-2 hover:bg-transparent",onClick:()=>h(!b),disabled:r,children:b?e.jsxDEV(Be,{className:"h-4 w-4"},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/components/ui/change-password-dialog.tsx",lineNumber:138,columnNumber:19},this):e.jsxDEV(Ke,{className:"h-4 w-4"},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/components/ui/change-password-dialog.tsx",lineNumber:140,columnNumber:19},this)},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/components/ui/change-password-dialog.tsx",lineNumber:129,columnNumber:15},this)]},void 0,!0,{fileName:"C:/Users/thudao/coding/example-react/client/src/components/ui/change-password-dialog.tsx",lineNumber:114,columnNumber:13},this),x.currentPassword&&e.jsxDEV("p",{className:"text-sm text-red-600",children:x.currentPassword},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/components/ui/change-password-dialog.tsx",lineNumber:145,columnNumber:15},this)]},void 0,!0,{fileName:"C:/Users/thudao/coding/example-react/client/src/components/ui/change-password-dialog.tsx",lineNumber:112,columnNumber:11},this),e.jsxDEV("div",{className:"space-y-2",children:[e.jsxDEV(A,{htmlFor:"newPassword",children:"New Password"},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/components/ui/change-password-dialog.tsx",lineNumber:151,columnNumber:13},this),e.jsxDEV("div",{className:"relative",children:[e.jsxDEV(P,{id:"newPassword",type:g?"text":"password",value:n,onChange:v=>{c(v.target.value),x.newPassword&&U({...x,newPassword:""})},placeholder:"Enter new password",disabled:r,className:x.newPassword?"border-red-500":""},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/components/ui/change-password-dialog.tsx",lineNumber:153,columnNumber:15},this),e.jsxDEV(d,{type:"button",variant:"ghost",size:"sm",className:"absolute right-0 top-0 h-full px-3 py-2 hover:bg-transparent",onClick:()=>y(!g),disabled:r,children:g?e.jsxDEV(Be,{className:"h-4 w-4"},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/components/ui/change-password-dialog.tsx",lineNumber:176,columnNumber:19},this):e.jsxDEV(Ke,{className:"h-4 w-4"},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/components/ui/change-password-dialog.tsx",lineNumber:178,columnNumber:19},this)},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/components/ui/change-password-dialog.tsx",lineNumber:167,columnNumber:15},this)]},void 0,!0,{fileName:"C:/Users/thudao/coding/example-react/client/src/components/ui/change-password-dialog.tsx",lineNumber:152,columnNumber:13},this),x.newPassword&&e.jsxDEV("p",{className:"text-sm text-red-600",children:x.newPassword},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/components/ui/change-password-dialog.tsx",lineNumber:183,columnNumber:15},this)]},void 0,!0,{fileName:"C:/Users/thudao/coding/example-react/client/src/components/ui/change-password-dialog.tsx",lineNumber:150,columnNumber:11},this),e.jsxDEV("div",{className:"space-y-2",children:[e.jsxDEV(A,{htmlFor:"confirmPassword",children:"Confirm New Password"},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/components/ui/change-password-dialog.tsx",lineNumber:189,columnNumber:13},this),e.jsxDEV("div",{className:"relative",children:[e.jsxDEV(P,{id:"confirmPassword",type:R?"text":"password",value:m,onChange:v=>{u(v.target.value),x.confirmPassword&&U({...x,confirmPassword:""})},placeholder:"Confirm new password",disabled:r,className:x.confirmPassword?"border-red-500":""},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/components/ui/change-password-dialog.tsx",lineNumber:191,columnNumber:15},this),e.jsxDEV(d,{type:"button",variant:"ghost",size:"sm",className:"absolute right-0 top-0 h-full px-3 py-2 hover:bg-transparent",onClick:()=>w(!R),disabled:r,children:R?e.jsxDEV(Be,{className:"h-4 w-4"},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/components/ui/change-password-dialog.tsx",lineNumber:214,columnNumber:19},this):e.jsxDEV(Ke,{className:"h-4 w-4"},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/components/ui/change-password-dialog.tsx",lineNumber:216,columnNumber:19},this)},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/components/ui/change-password-dialog.tsx",lineNumber:205,columnNumber:15},this)]},void 0,!0,{fileName:"C:/Users/thudao/coding/example-react/client/src/components/ui/change-password-dialog.tsx",lineNumber:190,columnNumber:13},this),x.confirmPassword&&e.jsxDEV("p",{className:"text-sm text-red-600",children:x.confirmPassword},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/components/ui/change-password-dialog.tsx",lineNumber:221,columnNumber:15},this)]},void 0,!0,{fileName:"C:/Users/thudao/coding/example-react/client/src/components/ui/change-password-dialog.tsx",lineNumber:188,columnNumber:11},this),e.jsxDEV(Oe,{children:[e.jsxDEV(d,{type:"button",variant:"outline",onClick:f,disabled:r,children:"Cancel"},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/components/ui/change-password-dialog.tsx",lineNumber:226,columnNumber:13},this),e.jsxDEV(d,{type:"submit",disabled:r,children:r?e.jsxDEV(e.Fragment,{children:[e.jsxDEV(Y,{className:"w-4 h-4 mr-2 animate-spin"},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/components/ui/change-password-dialog.tsx",lineNumber:237,columnNumber:19},this),"Changing..."]},void 0,!0,{fileName:"C:/Users/thudao/coding/example-react/client/src/components/ui/change-password-dialog.tsx",lineNumber:236,columnNumber:17},this):"Change Password"},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/components/ui/change-password-dialog.tsx",lineNumber:234,columnNumber:13},this)]},void 0,!0,{fileName:"C:/Users/thudao/coding/example-react/client/src/components/ui/change-password-dialog.tsx",lineNumber:225,columnNumber:11},this)]},void 0,!0,{fileName:"C:/Users/thudao/coding/example-react/client/src/components/ui/change-password-dialog.tsx",lineNumber:110,columnNumber:9},this)]},void 0,!0,{fileName:"C:/Users/thudao/coding/example-react/client/src/components/ui/change-password-dialog.tsx",lineNumber:99,columnNumber:7},this)},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/components/ui/change-password-dialog.tsx",lineNumber:98,columnNumber:5},this)}const Cr=G("/profile")({beforeLoad:({location:o})=>{if(!L.getState().isAuthenticated)throw ke({to:"/login",search:{redirect:o.href}})},component:Dr});function Dr(){const{data:o,isLoading:t,error:s}=Qo(),r=Wo(),i=Wt(),a=Yo(),[n,c]=l.useState({name:"",email:"",bio:"Software developer passionate about creating amazing user experiences.",avatar:""}),[m,u]=l.useState(""),[b,h]=l.useState(!1);vt.useEffect(()=>{if(o){const N=localStorage.getItem(`user_bio_${o.id}`)||"Software developer passionate about creating amazing user experiences.";c({name:o.username||"",email:o.email||"",bio:N,avatar:o.avatarUrl||"/api/placeholder/120/120"})}},[o]);const g=()=>n.name.trim()?n.name.trim().length<3?(u("Name must be at least 3 characters long"),!1):n.name.trim().length>50?(u("Name must be less than 50 characters"),!1):/^[a-zA-Z0-9_-]+$/.test(n.name.trim())?n.avatar.trim()&&!y(n.avatar.trim())?(u("Avatar URL must be a valid URL"),!1):(u(""),!0):(u("Name can only contain letters, numbers, underscores, and hyphens"),!1):(u("Name is required"),!1),y=N=>{try{return new URL(N),!0}catch{return!1}},R=()=>{if(!g())return;const N={};let S=!1;if(n.name!==o?.username&&(N.username=n.name.trim(),S=!0),n.avatar!==o?.avatarUrl&&(N.avatarUrl=n.avatar.trim()||void 0,S=!0),o){const f=localStorage.getItem(`user_bio_${o.id}`)||"Software developer passionate about creating amazing user experiences.";n.bio!==f&&(localStorage.setItem(`user_bio_${o.id}`,n.bio),S=!0,E.success("Bio updated successfully!"))}if(Object.keys(N).length===0)if(S){u("");return}else{u("No changes to save");return}r.mutate(N,{onSuccess:()=>{u("")},onError:f=>{u(f.message||"Failed to update profile")}})},w=async N=>{try{const S=await gr.uploadAvatar(N);return c({...n,avatar:S}),E.success("Avatar uploaded successfully!"),S}catch(S){throw E.error(S.message||"Failed to upload avatar"),S}},x=()=>{i.mutate()},U=async N=>{await a.mutateAsync(N)};return t?e.jsxDEV("div",{className:"min-h-screen bg-gray-50",children:[e.jsxDEV(ue,{title:"My Profile"},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/routes/profile.tsx",lineNumber:166,columnNumber:9},this),e.jsxDEV("div",{className:"py-8",children:e.jsxDEV("div",{className:"max-w-2xl mx-auto px-4",children:e.jsxDEV("div",{className:"flex items-center justify-center py-8",children:[e.jsxDEV(Y,{className:"w-6 h-6 animate-spin"},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/routes/profile.tsx",lineNumber:170,columnNumber:15},this),e.jsxDEV("span",{className:"ml-2",children:"Loading profile..."},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/routes/profile.tsx",lineNumber:171,columnNumber:15},this)]},void 0,!0,{fileName:"C:/Users/thudao/coding/example-react/client/src/routes/profile.tsx",lineNumber:169,columnNumber:13},this)},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/routes/profile.tsx",lineNumber:168,columnNumber:11},this)},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/routes/profile.tsx",lineNumber:167,columnNumber:9},this)]},void 0,!0,{fileName:"C:/Users/thudao/coding/example-react/client/src/routes/profile.tsx",lineNumber:165,columnNumber:12},this):s?e.jsxDEV("div",{className:"min-h-screen bg-gray-50",children:[e.jsxDEV(ue,{title:"My Profile"},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/routes/profile.tsx",lineNumber:179,columnNumber:9},this),e.jsxDEV("div",{className:"py-8",children:e.jsxDEV("div",{className:"max-w-2xl mx-auto px-4",children:e.jsxDEV("div",{className:"text-center py-8 text-red-600",children:[e.jsxDEV("p",{children:"Failed to load profile. Please try again."},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/routes/profile.tsx",lineNumber:183,columnNumber:15},this),e.jsxDEV("p",{className:"text-sm mt-2",children:s.message},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/routes/profile.tsx",lineNumber:184,columnNumber:15},this)]},void 0,!0,{fileName:"C:/Users/thudao/coding/example-react/client/src/routes/profile.tsx",lineNumber:182,columnNumber:13},this)},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/routes/profile.tsx",lineNumber:181,columnNumber:11},this)},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/routes/profile.tsx",lineNumber:180,columnNumber:9},this)]},void 0,!0,{fileName:"C:/Users/thudao/coding/example-react/client/src/routes/profile.tsx",lineNumber:178,columnNumber:12},this):e.jsxDEV("div",{className:"min-h-screen bg-gray-50",children:[e.jsxDEV(ue,{title:"My Profile"},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/routes/profile.tsx",lineNumber:191,columnNumber:7},this),e.jsxDEV("div",{className:"py-8",children:e.jsxDEV("div",{className:"max-w-2xl mx-auto px-4",children:[e.jsxDEV("div",{className:"text-center mb-8",children:[e.jsxDEV("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"My Profile"},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/routes/profile.tsx",lineNumber:195,columnNumber:13},this),e.jsxDEV("p",{className:"text-gray-600",children:"Manage your account settings and preferences"},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/routes/profile.tsx",lineNumber:196,columnNumber:13},this)]},void 0,!0,{fileName:"C:/Users/thudao/coding/example-react/client/src/routes/profile.tsx",lineNumber:194,columnNumber:11},this),e.jsxDEV(K,{children:[e.jsxDEV(H,{children:e.jsxDEV(J,{children:"Profile Information"},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/routes/profile.tsx",lineNumber:201,columnNumber:15},this)},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/routes/profile.tsx",lineNumber:200,columnNumber:13},this),e.jsxDEV(Q,{className:"space-y-6",children:[e.jsxDEV("div",{className:"flex flex-col items-center space-y-4",children:e.jsxDEV("div",{className:"relative",children:[e.jsxDEV(le,{className:"w-24 h-24",children:[e.jsxDEV(ce,{src:n.avatar},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/routes/profile.tsx",lineNumber:208,columnNumber:21},this),e.jsxDEV(me,{className:"text-lg",children:n.name.split(" ").map(N=>N[0]).join("")},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/routes/profile.tsx",lineNumber:209,columnNumber:21},this)]},void 0,!0,{fileName:"C:/Users/thudao/coding/example-react/client/src/routes/profile.tsx",lineNumber:207,columnNumber:19},this),e.jsxDEV(fr,{onUpload:w,disabled:r.isPending},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/routes/profile.tsx",lineNumber:213,columnNumber:19},this)]},void 0,!0,{fileName:"C:/Users/thudao/coding/example-react/client/src/routes/profile.tsx",lineNumber:206,columnNumber:17},this)},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/routes/profile.tsx",lineNumber:205,columnNumber:15},this),m&&e.jsxDEV("div",{className:"p-3 text-sm text-red-600 bg-red-50 border border-red-200 rounded-md",children:m},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/routes/profile.tsx",lineNumber:218,columnNumber:35},this),e.jsxDEV("div",{className:"space-y-4",children:[e.jsxDEV("div",{className:"space-y-2",children:[e.jsxDEV(A,{htmlFor:"name",children:"Username"},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/routes/profile.tsx",lineNumber:225,columnNumber:19},this),e.jsxDEV(P,{id:"name",value:n.name,onChange:N=>{c({...n,name:N.target.value}),m&&u("")},placeholder:"Enter your username",maxLength:50},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/routes/profile.tsx",lineNumber:226,columnNumber:19},this),e.jsxDEV("p",{className:"text-xs text-gray-500",children:"Username can only contain letters, numbers, underscores, and hyphens"},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/routes/profile.tsx",lineNumber:233,columnNumber:19},this)]},void 0,!0,{fileName:"C:/Users/thudao/coding/example-react/client/src/routes/profile.tsx",lineNumber:224,columnNumber:17},this),e.jsxDEV("div",{className:"space-y-2",children:[e.jsxDEV(A,{htmlFor:"email",children:"Email"},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/routes/profile.tsx",lineNumber:239,columnNumber:19},this),e.jsxDEV(P,{id:"email",type:"email",value:n.email,disabled:!0,className:"bg-gray-50"},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/routes/profile.tsx",lineNumber:240,columnNumber:19},this),e.jsxDEV("p",{className:"text-xs text-gray-500",children:"Email cannot be changed"},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/routes/profile.tsx",lineNumber:241,columnNumber:19},this)]},void 0,!0,{fileName:"C:/Users/thudao/coding/example-react/client/src/routes/profile.tsx",lineNumber:238,columnNumber:17},this),e.jsxDEV("div",{className:"space-y-2",children:[e.jsxDEV(A,{htmlFor:"avatar",children:"Avatar URL"},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/routes/profile.tsx",lineNumber:247,columnNumber:19},this),e.jsxDEV(P,{id:"avatar",value:n.avatar,onChange:N=>{c({...n,avatar:N.target.value}),m&&u("")},placeholder:"https://example.com/avatar.jpg"},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/routes/profile.tsx",lineNumber:248,columnNumber:19},this),e.jsxDEV("p",{className:"text-xs text-gray-500",children:"Enter a valid URL for your avatar image"},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/routes/profile.tsx",lineNumber:255,columnNumber:19},this)]},void 0,!0,{fileName:"C:/Users/thudao/coding/example-react/client/src/routes/profile.tsx",lineNumber:246,columnNumber:17},this),e.jsxDEV("div",{className:"space-y-2",children:[e.jsxDEV(A,{htmlFor:"bio",children:"Bio"},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/routes/profile.tsx",lineNumber:261,columnNumber:19},this),e.jsxDEV("textarea",{id:"bio",className:"flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",value:n.bio,onChange:N=>c({...n,bio:N.target.value}),placeholder:"Tell us about yourself...",maxLength:500},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/routes/profile.tsx",lineNumber:262,columnNumber:19},this),e.jsxDEV("p",{className:"text-xs text-gray-500",children:[n.bio.length,"/500 characters • Bio is saved locally"]},void 0,!0,{fileName:"C:/Users/thudao/coding/example-react/client/src/routes/profile.tsx",lineNumber:266,columnNumber:19},this)]},void 0,!0,{fileName:"C:/Users/thudao/coding/example-react/client/src/routes/profile.tsx",lineNumber:260,columnNumber:17},this)]},void 0,!0,{fileName:"C:/Users/thudao/coding/example-react/client/src/routes/profile.tsx",lineNumber:223,columnNumber:15},this),e.jsxDEV("div",{className:"flex justify-end pt-4",children:e.jsxDEV(d,{onClick:R,disabled:r.isPending,className:"flex items-center gap-2",children:[r.isPending?e.jsxDEV(Y,{className:"w-4 h-4 animate-spin"},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/routes/profile.tsx",lineNumber:275,columnNumber:54},this):e.jsxDEV(Tt,{className:"w-4 h-4"},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/routes/profile.tsx",lineNumber:275,columnNumber:101},this),r.isPending?"Saving...":"Save Changes"]},void 0,!0,{fileName:"C:/Users/thudao/coding/example-react/client/src/routes/profile.tsx",lineNumber:274,columnNumber:17},this)},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/routes/profile.tsx",lineNumber:273,columnNumber:15},this)]},void 0,!0,{fileName:"C:/Users/thudao/coding/example-react/client/src/routes/profile.tsx",lineNumber:203,columnNumber:13},this)]},void 0,!0,{fileName:"C:/Users/thudao/coding/example-react/client/src/routes/profile.tsx",lineNumber:199,columnNumber:11},this),e.jsxDEV(K,{className:"mt-6",children:[e.jsxDEV(H,{children:e.jsxDEV(J,{children:"Account Settings"},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/routes/profile.tsx",lineNumber:285,columnNumber:15},this)},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/routes/profile.tsx",lineNumber:284,columnNumber:13},this),e.jsxDEV(Q,{className:"space-y-4",children:[e.jsxDEV(d,{variant:"outline",className:"w-full",onClick:()=>h(!0),children:"Change Password"},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/routes/profile.tsx",lineNumber:288,columnNumber:15},this),e.jsxDEV(d,{variant:"outline",className:"w-full",children:"Privacy Settings"},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/routes/profile.tsx",lineNumber:291,columnNumber:15},this),e.jsxDEV(d,{variant:"outline",className:"w-full flex items-center gap-2",onClick:x,disabled:i.isPending,children:[i.isPending?e.jsxDEV(Y,{className:"w-4 h-4 animate-spin"},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/routes/profile.tsx",lineNumber:295,columnNumber:45},this):e.jsxDEV(it,{className:"w-4 h-4"},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/routes/profile.tsx",lineNumber:295,columnNumber:92},this),"Sign Out"]},void 0,!0,{fileName:"C:/Users/thudao/coding/example-react/client/src/routes/profile.tsx",lineNumber:294,columnNumber:15},this),e.jsxDEV(d,{variant:"destructive",className:"w-full",children:"Delete Account"},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/routes/profile.tsx",lineNumber:298,columnNumber:15},this)]},void 0,!0,{fileName:"C:/Users/thudao/coding/example-react/client/src/routes/profile.tsx",lineNumber:287,columnNumber:13},this)]},void 0,!0,{fileName:"C:/Users/thudao/coding/example-react/client/src/routes/profile.tsx",lineNumber:283,columnNumber:11},this)]},void 0,!0,{fileName:"C:/Users/thudao/coding/example-react/client/src/routes/profile.tsx",lineNumber:193,columnNumber:9},this)},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/routes/profile.tsx",lineNumber:192,columnNumber:7},this),e.jsxDEV(vr,{open:b,onOpenChange:h,onSubmit:U,isLoading:a.isPending},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/routes/profile.tsx",lineNumber:307,columnNumber:7},this)]},void 0,!0,{fileName:"C:/Users/thudao/coding/example-react/client/src/routes/profile.tsx",lineNumber:190,columnNumber:10},this)}const Er=G("/login")({validateSearch:o=>({redirect:o.redirect||"/"}),component:Ur});function Ur(){const o=ae(),t=Dt({from:"/login"}),s=Ho(),[r,i]=l.useState({email:"",password:""}),a=async n=>{n.preventDefault(),s.mutate(r,{onSuccess:()=>{o({to:t.redirect})},onError:c=>{console.error("Login error:",c)}})};return e.jsxDEV("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 relative",children:[e.jsxDEV(D,{to:"/",className:"absolute top-4 left-4",children:e.jsxDEV(d,{variant:"ghost",size:"sm",children:[e.jsxDEV(ne,{className:"w-4 h-4 mr-2"},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/routes/login.tsx",lineNumber:42,columnNumber:11},this),"Back to Home"]},void 0,!0,{fileName:"C:/Users/thudao/coding/example-react/client/src/routes/login.tsx",lineNumber:41,columnNumber:9},this)},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/routes/login.tsx",lineNumber:40,columnNumber:7},this),e.jsxDEV("div",{className:"space-y-6",children:[e.jsxDEV(K,{className:"w-full max-w-md bg-blue-50 border-blue-200",children:e.jsxDEV(Q,{className:"p-4",children:e.jsxDEV("div",{className:"text-center",children:[e.jsxDEV("h3",{className:"font-semibold text-blue-900 mb-2",children:"Demo Account"},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/routes/login.tsx",lineNumber:52,columnNumber:15},this),e.jsxDEV("p",{className:"text-sm text-blue-700 mb-3",children:"Use these credentials to test the application:"},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/routes/login.tsx",lineNumber:53,columnNumber:15},this),e.jsxDEV("div",{className:"bg-white p-3 rounded border text-left",children:[e.jsxDEV("p",{className:"text-sm",children:[e.jsxDEV("strong",{children:"Email:"},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/routes/login.tsx",lineNumber:57,columnNumber:40},this)," john@example.com"]},void 0,!0,{fileName:"C:/Users/thudao/coding/example-react/client/src/routes/login.tsx",lineNumber:57,columnNumber:17},this),e.jsxDEV("p",{className:"text-sm",children:[e.jsxDEV("strong",{children:"Password:"},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/routes/login.tsx",lineNumber:58,columnNumber:40},this)," Password123"]},void 0,!0,{fileName:"C:/Users/thudao/coding/example-react/client/src/routes/login.tsx",lineNumber:58,columnNumber:17},this)]},void 0,!0,{fileName:"C:/Users/thudao/coding/example-react/client/src/routes/login.tsx",lineNumber:56,columnNumber:15},this)]},void 0,!0,{fileName:"C:/Users/thudao/coding/example-react/client/src/routes/login.tsx",lineNumber:51,columnNumber:13},this)},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/routes/login.tsx",lineNumber:50,columnNumber:11},this)},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/routes/login.tsx",lineNumber:49,columnNumber:9},this),e.jsxDEV(K,{className:"w-full max-w-md",children:[e.jsxDEV(H,{className:"text-center",children:[e.jsxDEV(J,{className:"text-2xl",children:"Sign In"},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/routes/login.tsx",lineNumber:66,columnNumber:13},this),e.jsxDEV(ie,{children:"Sign in to your account to continue"},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/routes/login.tsx",lineNumber:67,columnNumber:13},this)]},void 0,!0,{fileName:"C:/Users/thudao/coding/example-react/client/src/routes/login.tsx",lineNumber:65,columnNumber:11},this),e.jsxDEV(Q,{children:[e.jsxDEV("form",{onSubmit:a,className:"space-y-4",children:[s.error&&e.jsxDEV("div",{className:"p-3 text-sm text-red-600 bg-red-50 border border-red-200 rounded-md",children:s.error.message||"Login failed. Please try again."},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/routes/login.tsx",lineNumber:73,columnNumber:37},this),e.jsxDEV("div",{className:"space-y-2",children:[e.jsxDEV(A,{htmlFor:"email",children:"Email"},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/routes/login.tsx",lineNumber:78,columnNumber:15},this),e.jsxDEV(P,{id:"email",type:"email",placeholder:"demo@example.com",value:r.email,onChange:n=>i({...r,email:n.target.value}),required:!0},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/routes/login.tsx",lineNumber:79,columnNumber:15},this)]},void 0,!0,{fileName:"C:/Users/thudao/coding/example-react/client/src/routes/login.tsx",lineNumber:77,columnNumber:13},this),e.jsxDEV("div",{className:"space-y-2",children:[e.jsxDEV(A,{htmlFor:"password",children:"Password"},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/routes/login.tsx",lineNumber:86,columnNumber:15},this),e.jsxDEV(P,{id:"password",type:"password",placeholder:"password",value:r.password,onChange:n=>i({...r,password:n.target.value}),required:!0},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/routes/login.tsx",lineNumber:87,columnNumber:15},this)]},void 0,!0,{fileName:"C:/Users/thudao/coding/example-react/client/src/routes/login.tsx",lineNumber:85,columnNumber:13},this),e.jsxDEV(d,{type:"submit",className:"w-full",disabled:s.isPending,children:s.isPending?"Signing In...":"Sign In"},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/routes/login.tsx",lineNumber:93,columnNumber:13},this)]},void 0,!0,{fileName:"C:/Users/thudao/coding/example-react/client/src/routes/login.tsx",lineNumber:72,columnNumber:11},this),e.jsxDEV("div",{className:"text-center space-y-2",children:[e.jsxDEV(D,{to:"/forgot-password",className:"text-sm text-blue-600 hover:underline",children:"Forgot password?"},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/routes/login.tsx",lineNumber:98,columnNumber:13},this),e.jsxDEV("div",{className:"text-sm text-gray-600",children:["Don't have an account?"," ",e.jsxDEV(D,{to:"/register",className:"text-blue-600 hover:underline",children:"Sign up"},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/routes/login.tsx",lineNumber:103,columnNumber:15},this)]},void 0,!0,{fileName:"C:/Users/thudao/coding/example-react/client/src/routes/login.tsx",lineNumber:101,columnNumber:13},this)]},void 0,!0,{fileName:"C:/Users/thudao/coding/example-react/client/src/routes/login.tsx",lineNumber:97,columnNumber:11},this)]},void 0,!0,{fileName:"C:/Users/thudao/coding/example-react/client/src/routes/login.tsx",lineNumber:71,columnNumber:9},this)]},void 0,!0,{fileName:"C:/Users/thudao/coding/example-react/client/src/routes/login.tsx",lineNumber:64,columnNumber:9},this)]},void 0,!0,{fileName:"C:/Users/thudao/coding/example-react/client/src/routes/login.tsx",lineNumber:47,columnNumber:7},this)]},void 0,!0,{fileName:"C:/Users/thudao/coding/example-react/client/src/routes/login.tsx",lineNumber:38,columnNumber:10},this)}const yr=G("/forgot-password")({component:jr});function jr(){return e.jsxDEV("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 relative",children:[e.jsxDEV(D,{to:"/login",search:{redirect:"/"},className:"absolute top-4 left-4",children:e.jsxDEV(d,{variant:"ghost",size:"sm",children:[e.jsxDEV(ne,{className:"w-4 h-4 mr-2"},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/routes/forgot-password.tsx",lineNumber:17,columnNumber:11},this),"Back to Login"]},void 0,!0,{fileName:"C:/Users/thudao/coding/example-react/client/src/routes/forgot-password.tsx",lineNumber:16,columnNumber:9},this)},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/routes/forgot-password.tsx",lineNumber:13,columnNumber:7},this),e.jsxDEV(K,{className:"w-full max-w-md",children:[e.jsxDEV(H,{className:"text-center",children:[e.jsxDEV(J,{className:"text-2xl",children:"Forgot Password"},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/routes/forgot-password.tsx",lineNumber:24,columnNumber:11},this),e.jsxDEV(ie,{children:"Enter your email to reset your password"},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/routes/forgot-password.tsx",lineNumber:25,columnNumber:11},this)]},void 0,!0,{fileName:"C:/Users/thudao/coding/example-react/client/src/routes/forgot-password.tsx",lineNumber:23,columnNumber:9},this),e.jsxDEV(Q,{className:"space-y-4",children:[e.jsxDEV("div",{className:"space-y-2",children:[e.jsxDEV(A,{htmlFor:"email",children:"Email"},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/routes/forgot-password.tsx",lineNumber:31,columnNumber:13},this),e.jsxDEV(P,{id:"email",type:"email",placeholder:"Enter your email",required:!0},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/routes/forgot-password.tsx",lineNumber:32,columnNumber:13},this)]},void 0,!0,{fileName:"C:/Users/thudao/coding/example-react/client/src/routes/forgot-password.tsx",lineNumber:30,columnNumber:11},this),e.jsxDEV(d,{className:"w-full",children:"Send Reset Link"},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/routes/forgot-password.tsx",lineNumber:34,columnNumber:11},this),e.jsxDEV("div",{className:"text-center",children:e.jsxDEV(D,{to:"/login",search:{redirect:"/"},className:"text-sm text-blue-600 hover:underline",children:"Back to Sign In"},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/routes/forgot-password.tsx",lineNumber:38,columnNumber:13},this)},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/routes/forgot-password.tsx",lineNumber:37,columnNumber:11},this)]},void 0,!0,{fileName:"C:/Users/thudao/coding/example-react/client/src/routes/forgot-password.tsx",lineNumber:29,columnNumber:9},this)]},void 0,!0,{fileName:"C:/Users/thudao/coding/example-react/client/src/routes/forgot-password.tsx",lineNumber:22,columnNumber:7},this)]},void 0,!0,{fileName:"C:/Users/thudao/coding/example-react/client/src/routes/forgot-password.tsx",lineNumber:11,columnNumber:10},this)}const wr=Re("inline-flex items-center rounded-md border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground shadow hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground shadow hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function Ve({className:o,variant:t,...s}){return e.jsxDEV("div",{className:p(wr({variant:t}),o),...s},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/components/ui/badge.tsx",lineNumber:32,columnNumber:5},this)}class Vr{baseUrl="/chat";async getRooms(t=1,s=10,r="updated_at",i="desc"){const a=new URLSearchParams({page:t.toString(),limit:s.toString(),sortBy:r,sortOrder:i});return(await j.get(`${this.baseUrl}/rooms?${a.toString()}`)).data||{rooms:[],total:0,page:1,limit:10,totalPages:0}}async getRoom(t){return(await j.get(`${this.baseUrl}/rooms/${t}`)).data?.room||{}}async createRoom(t){return(await j.post(`${this.baseUrl}/rooms`,t)).data?.room||{}}async updateRoom(t,s){return(await j.put(`${this.baseUrl}/rooms/${t}`,s)).data?.room||{}}async deleteRoom(t){await j.delete(`${this.baseUrl}/rooms/${t}`)}async joinRoom(t){return(await j.post(`${this.baseUrl}/rooms/${t}/join`)).data?.room||{}}async leaveRoom(t){await j.post(`${this.baseUrl}/rooms/${t}/leave`)}async inviteUsers(t,s){return(await j.post(`${this.baseUrl}/rooms/${t}/invite`,{userIds:s})).data||{invitedUsers:[],alreadyMembers:[],notFound:[]}}async getRoomMembers(t){return(await j.get(`${this.baseUrl}/rooms/${t}/members`)).data||{members:[],totalMembers:0,roomInfo:{id:"",name:"",authorId:"",createdAt:""}}}async removeMember(t,s){await j.delete(`${this.baseUrl}/rooms/${t}/members/${s}`)}async getMessages(t,s=1,r=50){return(await j.get(`${this.baseUrl}/rooms/${t}/messages?page=${s}&limit=${r}`)).data||{messages:[],total:0,page:1,limit:50,totalPages:0}}async updateMessage(t,s,r){return(await j.put(`${this.baseUrl}/rooms/${t}/messages/${s}`,r)).data?.message||{}}async deleteMessage(t,s){await j.delete(`${this.baseUrl}/rooms/${t}/messages/${s}`)}}const B=new Vr;class Rr{socket=null;isConnected=!1;reconnectAttempts=0;maxReconnectAttempts=5;reconnectDelay=1e3;connectionPromise=null;reconnectTimeout=null;connectionRefCount=0;messageListeners=[];messageUpdateListeners=[];messageDeleteListeners=[];typingListeners=[];userJoinedListeners=[];userLeftListeners=[];userOfflineInRoomListeners=[];roomDeletedListeners=[];roomUpdatedListeners=[];roomListUpdatedListeners=[];userRemovedFromRoomListeners=[];memberRemovedListeners=[];connectionListeners=[];connect(){return this.connectionRefCount++,this.isConnected?Promise.resolve():this.connectionPromise?this.connectionPromise:(this.connectionPromise=new Promise((t,s)=>{try{this.reconnectTimeout&&(clearTimeout(this.reconnectTimeout),this.reconnectTimeout=null);const i=L.getState().tokens?.accessToken;if(!i){this.connectionPromise=null,s(new Error("No authentication token available"));return}if(!_(i)){console.warn("Socket: Invalid token structure, cannot connect"),this.connectionPromise=null,s(new Error("Invalid authentication token structure"));return}if(X(i)){console.warn("Socket: Token is expired, attempting refresh before connection"),this.connectionPromise=null,this.handleTokenRefreshAndReconnect().then(()=>t()).catch(s);return}Ee(i)?.isNearExpiry&&console.log("Socket: Token near expiry, will monitor for refresh during connection"),this.socket&&(this.socket.removeAllListeners(),this.socket.disconnect()),this.socket=$s(te.socketUrl,{auth:{token:i},transports:["websocket","polling"],timeout:1e4,forceNew:!0}),this.socket.on("connect",()=>{console.log("Socket connected:",this.socket?.id),this.isConnected=!0,this.reconnectAttempts=0,this.connectionPromise=null,this.notifyConnectionListeners(!0),t()}),this.socket.on("disconnect",n=>{if(console.log("Socket disconnected:",n),this.isConnected=!1,this.connectionPromise=null,this.notifyConnectionListeners(!1),this.connectionRefCount>0){if(n==="io server disconnect"||n==="io client disconnect")return;this.handleReconnect()}}),this.socket.on("connect_error",n=>{console.error("Socket connection error:",n),this.isConnected=!1,this.connectionPromise=null,this.notifyConnectionListeners(!1),this.isAuthenticationError(n)?(console.log("Socket: Authentication error detected, attempting token refresh"),this.handleTokenRefreshAndReconnect().catch(c=>{console.error("Socket: Token refresh failed:",c),this.reconnectAttempts===0&&s(new Error(`Authentication failed: ${n.message}`))})):(this.reconnectAttempts===0&&s(n),this.connectionRefCount>0&&this.handleReconnect())}),this.socket.on("new-message",n=>{this.notifyMessageListeners(n.message)}),this.socket.on("message-updated",n=>{this.notifyMessageUpdateListeners(n)}),this.socket.on("message-deleted",n=>{this.notifyMessageDeleteListeners(n)}),this.socket.on("user-typing",n=>{this.notifyTypingListeners(n)}),this.socket.on("user-joined",n=>{this.notifyUserJoinedListeners(n)}),this.socket.on("user-left",n=>{this.notifyUserLeftListeners(n)}),this.socket.on("user-offline-in-room",n=>{this.notifyUserOfflineInRoomListeners(n)}),this.socket.on("room-deleted",n=>{this.notifyRoomDeletedListeners(n)}),this.socket.on("room-updated",n=>{this.notifyRoomUpdatedListeners(n)}),this.socket.on("room-list-updated",n=>{this.notifyRoomListUpdatedListeners(n)}),this.socket.on("user-removed-from-room",n=>{this.notifyUserRemovedFromRoomListeners(n)}),this.socket.on("member-removed",n=>{this.notifyMemberRemovedListeners(n)}),this.socket.on("error",n=>{console.error("Socket error:",n)})}catch(r){this.connectionPromise=null,s(r)}}),this.connectionPromise)}disconnect(){this.connectionRefCount=Math.max(0,this.connectionRefCount-1),this.connectionRefCount===0&&this.forceDisconnect()}forceDisconnect(){this.reconnectTimeout&&(clearTimeout(this.reconnectTimeout),this.reconnectTimeout=null),this.socket&&(this.socket.removeAllListeners(),this.socket.disconnect(),this.socket=null),this.isConnected=!1,this.connectionPromise=null,this.reconnectAttempts=0,this.notifyConnectionListeners(!1)}handleReconnect(){if(this.reconnectAttempts>=this.maxReconnectAttempts){console.error("Max reconnection attempts reached");return}if(this.connectionRefCount===0)return;this.reconnectAttempts++;const t=this.reconnectDelay*Math.pow(2,this.reconnectAttempts-1);console.log(`Attempting to reconnect in ${t}ms (attempt ${this.reconnectAttempts}/${this.maxReconnectAttempts})`),this.reconnectTimeout=setTimeout(()=>{!this.isConnected&&this.connectionRefCount>0&&(this.connectionPromise=null,this.connect().catch(console.error))},t)}async handleTokenRefreshAndReconnect(){try{console.log("Socket: Attempting token refresh for reconnection...");const t=L.getState(),s=t.tokens?.refreshToken;if(!s)throw new Error("No refresh token available");if(!_(s))throw new Error("Invalid refresh token structure");if(X(s))throw new Error("Refresh token is expired");try{const{httpClient:r}=await se(async()=>{const{httpClient:i}=await Promise.resolve().then(()=>De);return{httpClient:i}},void 0);await r.forceRefresh(),console.log("Socket: Token refresh successful via httpClient")}catch(r){console.warn("Socket: httpClient refresh failed, trying direct API call:",r);const i=await fetch(`${te.socketUrl}/api/auth/refresh`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({refreshToken:s})});if(!i.ok){const m=await i.json().catch(()=>({}));throw new Error(`Token refresh failed: ${i.status} - ${m.message||i.statusText}`)}const a=await i.json();if(!a.success||!a.data?.tokens)throw new Error("Invalid refresh token response format");const{accessToken:n,refreshToken:c}=a.data.tokens;if(!_(n)||!_(c))throw new Error("Received invalid token structure from server");t.setTokens(a.data.tokens),console.log("Socket: Token refresh successful via direct API")}this.connectionPromise=null,this.reconnectAttempts=0,this.connectionRefCount>0&&(console.log("Socket: Attempting reconnection with new token..."),await this.connect())}catch(t){throw console.error("Socket: Token refresh failed:",t),L.getState().logout(),this.connectionPromise=null,this.isConnected=!1,t}}isAuthenticationError(t){if(!t||!t.message)return!1;const s=t.message.toLowerCase();return["authentication","token","unauthorized","expired","invalid","jwt","auth","forbidden"].some(i=>s.includes(i))}joinRoom(t){if(this.socket&&this.isConnected){const s=L.getState();this.socket.emit("join-room",{roomId:t,userId:s.user?.id})}}leaveRoom(t){if(this.socket&&this.isConnected){const s=L.getState();this.socket.emit("leave-room",{roomId:t,userId:s.user?.id})}}sendMessage(t,s){this.socket&&this.isConnected&&this.socket.emit("send-message",{roomId:t,content:s})}sendTyping(t,s){if(this.socket&&this.isConnected){const r=L.getState();this.socket.emit("typing",{roomId:t,userId:r.user?.id,username:r.user?.name,isTyping:s})}}onNewMessage(t){return this.messageListeners.push(t),()=>{this.messageListeners=this.messageListeners.filter(s=>s!==t)}}onMessageUpdate(t){return this.messageUpdateListeners.push(t),()=>{this.messageUpdateListeners=this.messageUpdateListeners.filter(s=>s!==t)}}onMessageDelete(t){return this.messageDeleteListeners.push(t),()=>{this.messageDeleteListeners=this.messageDeleteListeners.filter(s=>s!==t)}}onTyping(t){return this.typingListeners.push(t),()=>{this.typingListeners=this.typingListeners.filter(s=>s!==t)}}onUserJoined(t){return this.userJoinedListeners.push(t),()=>{this.userJoinedListeners=this.userJoinedListeners.filter(s=>s!==t)}}onUserLeft(t){return this.userLeftListeners.push(t),()=>{this.userLeftListeners=this.userLeftListeners.filter(s=>s!==t)}}onUserOfflineInRoom(t){return this.userOfflineInRoomListeners.push(t),()=>{this.userOfflineInRoomListeners=this.userOfflineInRoomListeners.filter(s=>s!==t)}}onRoomDeleted(t){return this.roomDeletedListeners.push(t),()=>{this.roomDeletedListeners=this.roomDeletedListeners.filter(s=>s!==t)}}onRoomUpdated(t){return this.roomUpdatedListeners.push(t),()=>{this.roomUpdatedListeners=this.roomUpdatedListeners.filter(s=>s!==t)}}onRoomListUpdated(t){return this.roomListUpdatedListeners.push(t),()=>{this.roomListUpdatedListeners=this.roomListUpdatedListeners.filter(s=>s!==t)}}onUserRemovedFromRoom(t){return this.userRemovedFromRoomListeners.push(t),()=>{this.userRemovedFromRoomListeners=this.userRemovedFromRoomListeners.filter(s=>s!==t)}}onMemberRemoved(t){return this.memberRemovedListeners.push(t),()=>{this.memberRemovedListeners=this.memberRemovedListeners.filter(s=>s!==t)}}onConnectionChange(t){return this.connectionListeners.push(t),()=>{this.connectionListeners=this.connectionListeners.filter(s=>s!==t)}}notifyMessageListeners(t){this.messageListeners.forEach(s=>s(t))}notifyMessageUpdateListeners(t){this.messageUpdateListeners.forEach(s=>s(t))}notifyMessageDeleteListeners(t){this.messageDeleteListeners.forEach(s=>s(t))}notifyTypingListeners(t){this.typingListeners.forEach(s=>s(t))}notifyUserJoinedListeners(t){this.userJoinedListeners.forEach(s=>s(t))}notifyUserLeftListeners(t){this.userLeftListeners.forEach(s=>s(t))}notifyUserOfflineInRoomListeners(t){this.userOfflineInRoomListeners.forEach(s=>s(t))}notifyRoomDeletedListeners(t){this.roomDeletedListeners.forEach(s=>s(t))}notifyRoomUpdatedListeners(t){this.roomUpdatedListeners.forEach(s=>s(t))}notifyRoomListUpdatedListeners(t){this.roomListUpdatedListeners.forEach(s=>s(t))}notifyUserRemovedFromRoomListeners(t){this.userRemovedFromRoomListeners.forEach(s=>s(t))}notifyMemberRemovedListeners(t){this.memberRemovedListeners.forEach(s=>s(t))}notifyConnectionListeners(t){this.connectionListeners.forEach(s=>s(t))}reset(){this.connectionRefCount=0,this.forceDisconnect()}get connected(){return this.isConnected}get socketId(){return this.socket?.id}}const T=new Rr,_e=bt()(Os((o,t)=>({currentRoomId:null,isConnected:!1,rooms:[],messagesByRoom:{},typingUsersByRoom:{},isTyping:{},typingTimeouts:{},setCurrentRoom:s=>{o({currentRoomId:s}),s&&t().clearUnreadCount(s)},setConnected:s=>{o({isConnected:s})},setRooms:s=>{o({rooms:s})},addRoom:s=>{o(r=>({rooms:[s,...r.rooms.filter(i=>i.id!==s.id)]}))},updateRoom:(s,r)=>{o(i=>({rooms:i.rooms.map(a=>a.id===s?{...a,...r}:a)}))},removeRoom:s=>{o(r=>{const i={...r.messagesByRoom};delete i[s];const a={...r.typingUsersByRoom};return delete a[s],{rooms:r.rooms.filter(n=>n.id!==s),messagesByRoom:i,typingUsersByRoom:a,currentRoomId:r.currentRoomId===s?null:r.currentRoomId}})},setMessages:(s,r)=>{o(i=>({messagesByRoom:{...i.messagesByRoom,[s]:r}}))},addMessage:s=>{o(n=>{const c=n.messagesByRoom[s.roomId]||[];return c.find(u=>u.id===s.id)?n:{messagesByRoom:{...n.messagesByRoom,[s.roomId]:[...c,s]}}});const{currentRoomId:r,updateLastActivity:i,incrementUnreadCount:a}=t();i(s.roomId),r!==s.roomId&&a(s.roomId)},updateMessage:(s,r)=>{o(i=>{const a={...i.messagesByRoom};return Object.keys(a).forEach(n=>{a[n]=a[n].map(c=>c.id===s?{...c,...r}:c)}),{messagesByRoom:a}})},removeMessage:s=>{o(r=>{const i={...r.messagesByRoom};return Object.keys(i).forEach(a=>{i[a]=i[a].filter(n=>n.id!==s)}),{messagesByRoom:i}})},markMessageError:(s,r)=>{t().updateMessage(s,{error:r})},setTyping:(s,r)=>{const i=t();if(i.typingTimeouts[s]&&clearTimeout(i.typingTimeouts[s]),T.sendTyping(s,r),r){const a=window.setTimeout(()=>{t().setTyping(s,!1)},3e3);o(n=>({isTyping:{...n.isTyping,[s]:!0},typingTimeouts:{...n.typingTimeouts,[s]:a}}))}else o(a=>{const n={...a.isTyping};delete n[s];const c={...a.typingTimeouts};return delete c[s],{isTyping:n,typingTimeouts:c}})},addTypingUser:s=>{o(r=>({typingUsersByRoom:{...r.typingUsersByRoom,[s.roomId]:[...(r.typingUsersByRoom[s.roomId]||[]).filter(i=>i.userId!==s.userId),s]}}))},removeTypingUser:(s,r)=>{o(i=>({typingUsersByRoom:{...i.typingUsersByRoom,[r]:(i.typingUsersByRoom[r]||[]).filter(a=>a.userId!==s)}}))},clearTypingUsers:s=>{o(r=>({typingUsersByRoom:{...r.typingUsersByRoom,[s]:[]}}))},incrementUnreadCount:s=>{o(r=>({rooms:r.rooms.map(i=>i.id===s?{...i,unreadCount:(i.unreadCount||0)+1}:i)}))},clearUnreadCount:s=>{o(r=>({rooms:r.rooms.map(i=>i.id===s?{...i,unreadCount:0}:i)}))},updateLastActivity:s=>{const r=new Date().toISOString();o(i=>({rooms:i.rooms.map(a=>a.id===s?{...a,lastActivity:r}:a)}))},sendMessage:(s,r)=>{const i=r.trim();if(!i)return;const n=t().messagesByRoom[s]||[],c=n[n.length-1];c&&Math.abs(new Date().getTime()-new Date(c.createdAt).getTime())<500||(T.sendMessage(s,i),t().updateLastActivity(s))},joinRoom:s=>{T.joinRoom(s)},leaveRoom:s=>{T.leaveRoom(s)},cleanup:()=>{const s=t();Object.values(s.typingTimeouts).forEach(r=>{clearTimeout(r)}),o({currentRoomId:null,isConnected:!1,rooms:[],messagesByRoom:{},typingUsersByRoom:{},isTyping:{},typingTimeouts:{}})}}),{name:"chat-store"})),k={all:["chat"],rooms:()=>[...k.all,"rooms"],room:o=>[...k.all,"room",o],roomMembers:o=>[...k.all,"room",o,"members"],messages:o=>[...k.all,"messages",o]};function kr(o=1,t=10,s="updated_at",r="desc"){return de({queryKey:[...k.rooms(),o,t,s,r],queryFn:()=>B.getRooms(o,t,s,r),staleTime:5*60*1e3})}function Sr(o){return de({queryKey:k.room(o),queryFn:()=>B.getRoom(o),enabled:!!o,staleTime:5*60*1e3})}function Tr(){const o=M();return I({mutationFn:t=>B.createRoom(t),onSuccess:()=>{o.invalidateQueries({queryKey:k.rooms()})}})}function Lr(o){const t=M();return I({mutationFn:s=>B.updateRoom(o,s),onSuccess:s=>{t.setQueryData(k.room(o),s),t.invalidateQueries({queryKey:k.rooms()})}})}function Pr(){const o=M();return I({mutationFn:t=>B.deleteRoom(t),onSuccess:(t,s)=>{o.removeQueries({queryKey:k.room(s)}),o.invalidateQueries({queryKey:k.rooms()})}})}function Ar(){const o=M();return I({mutationFn:t=>B.joinRoom(t),onSuccess:(t,s)=>{o.setQueryData(k.room(s),t),o.invalidateQueries({queryKey:k.rooms()}),T.joinRoom(s)}})}function Mr(){const o=M();return I({mutationFn:t=>B.leaveRoom(t),onSuccess:(t,s)=>{T.leaveRoom(s),o.invalidateQueries({queryKey:k.rooms()})}})}function Ir(){const o=M();return I({mutationFn:({roomId:t,userIds:s})=>B.inviteUsers(t,s),onSuccess:(t,s)=>{o.invalidateQueries({queryKey:k.rooms()}),o.invalidateQueries({queryKey:k.room(s.roomId)}),console.log(`Successfully invited ${t.invitedUsers.length} users`),t.alreadyMembers.length>0&&console.log(`${t.alreadyMembers.length} users were already members`),t.notFound.length>0&&console.log(`${t.notFound.length} users were not found`)}})}function Fr(o){return de({queryKey:k.roomMembers(o),queryFn:()=>B.getRoomMembers(o),enabled:!!o,staleTime:2*60*1e3})}function $r(){const o=M();return I({mutationFn:({roomId:t,memberId:s})=>B.removeMember(t,s),onSuccess:(t,s)=>{o.invalidateQueries({queryKey:k.roomMembers(s.roomId)}),o.invalidateQueries({queryKey:k.room(s.roomId)})}})}function Or(o,t=50){return _s({queryKey:[...k.messages(o),"infinite"],queryFn:({pageParam:s=1})=>B.getMessages(o,s,t),enabled:!!o,initialPageParam:1,getNextPageParam:s=>{if(s.page<s.totalPages)return s.page+1},staleTime:1*60*1e3})}function _r(o){const t=M();return I({mutationFn:({messageId:s,data:r})=>B.updateMessage(o,s,r),onSuccess:()=>{t.invalidateQueries({queryKey:k.messages(o)})}})}function zr(o){const t=M();return I({mutationFn:s=>B.deleteMessage(o,s),onSuccess:()=>{t.invalidateQueries({queryKey:k.messages(o)})}})}function qr(o){const t=M(),s=l.useCallback(a=>{a.roomId===o&&(t.setQueryData([...k.messages(o),"infinite"],n=>{if(!n)return n;const c=[...n.pages];return c.length>0&&(c[0]={...c[0],messages:[...c[0].messages,a],total:c[0].total+1}),{...n,pages:c}}),t.invalidateQueries({queryKey:k.messages(o)}))},[t,o]),r=l.useCallback(a=>{a.roomId===o&&t.setQueryData([...k.messages(o),"infinite"],n=>{if(!n)return n;const c=n.pages.map(m=>({...m,messages:m.messages.map(u=>u.id===a.messageId?{...u,content:a.content,updatedAt:new Date().toISOString()}:u)}));return{...n,pages:c}})},[t,o]),i=l.useCallback(a=>{a.roomId===o&&t.setQueryData([...k.messages(o),"infinite"],n=>{if(!n)return n;const c=n.pages.map(m=>({...m,messages:m.messages.filter(u=>u.id!==a.messageId),total:Math.max(0,m.total-1)}));return{...n,pages:c}})},[t,o]);l.useEffect(()=>{if(!o)return;const a=T.onNewMessage(s),n=T.onMessageUpdate(r),c=T.onMessageDelete(i);return()=>{a(),n(),c()}},[o,s,r,i])}function Br(o){const{addTypingUser:t,removeTypingUser:s}=_e(),r=l.useCallback(i=>{i.roomId===o&&(i.isTyping?t({userId:i.userId,username:i.username,roomId:i.roomId}):s(i.userId,i.roomId))},[o,t,s]);l.useEffect(()=>T.onTyping(r),[r])}function Kr(){const o=M(),t=l.useCallback(s=>{o.invalidateQueries({queryKey:k.roomMembers(s.roomId)}),console.log(`${s.username} went offline in room ${s.roomId}`)},[o]);l.useEffect(()=>T.onUserOfflineInRoom(t),[t])}function Qr(){const o=M(),t=l.useCallback(s=>{o.invalidateQueries({queryKey:k.rooms()}),console.log(`Room deleted: ${s.message}`)},[o]);l.useEffect(()=>T.onRoomDeleted(t),[t])}function Hr(o){const t=ae(),s=l.useCallback(r=>{r.roomId===o&&(alert(r.message),t({to:"/chat"}))},[o,t]);l.useEffect(()=>T.onRoomDeleted(s),[s])}function Jr(){const o=M(),t=l.useCallback(r=>{o.invalidateQueries({queryKey:k.room(r.roomId)}),console.log(`Room updated: ${r.message}`)},[o]),s=l.useCallback(r=>{o.invalidateQueries({queryKey:k.rooms()}),console.log(`Room list updated: ${r.action} room ${r.room?.name||""}`)},[o]);l.useEffect(()=>{const r=T.onRoomUpdated(t),i=T.onRoomListUpdated(s);return()=>{r(),i()}},[t,s])}function Wr(o){const t=l.useCallback(s=>{s.roomId===o&&console.log(`Current room updated: ${s.message}`)},[o]);l.useEffect(()=>T.onRoomUpdated(t),[t])}function Yr(){const o=ae(),t=l.useCallback(s=>{alert(s.message),o({to:"/chat"})},[o]);l.useEffect(()=>T.onUserRemovedFromRoom(t),[t])}function Gr(){const o=M(),t=l.useCallback(s=>{o.invalidateQueries({queryKey:k.roomMembers(s.roomId)}),o.invalidateQueries({queryKey:k.room(s.roomId)}),console.log(`Member removed: ${s.message}`)},[o]);l.useEffect(()=>T.onMemberRemoved(t),[t])}function Xr(){const[o,t]=l.useState(T.connected);return l.useEffect(()=>T.onConnectionChange(t),[]),{connected:o}}const Zr=qs,Xt=l.createContext({}),xt=({...o})=>e.jsxDEV(Xt.Provider,{value:{name:o.name},children:e.jsxDEV(Bs,{...o},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/components/ui/form.tsx",lineNumber:29,columnNumber:7},void 0)},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/components/ui/form.tsx",lineNumber:28,columnNumber:5},void 0),ze=()=>{const o=l.useContext(Xt),t=l.useContext(Zt),{getFieldState:s,formState:r}=zs(),i=s(o.name,r);if(!o)throw new Error("useFormField should be used within <FormField>");const{id:a}=t;return{id:a,name:o.name,formItemId:`${a}-form-item`,formDescriptionId:`${a}-form-item-description`,formMessageId:`${a}-form-item-message`,...i}},Zt=l.createContext({}),Ze=l.forwardRef(({className:o,...t},s)=>{const r=l.useId();return e.jsxDEV(Zt.Provider,{value:{id:r},children:e.jsxDEV("div",{ref:s,className:p("space-y-2",o),...t},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/components/ui/form.tsx",lineNumber:73,columnNumber:7},void 0)},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/components/ui/form.tsx",lineNumber:72,columnNumber:5},void 0)});Ze.displayName="FormItem";const et=l.forwardRef(({className:o,...t},s)=>{const{error:r,formItemId:i}=ze();return e.jsxDEV(A,{ref:s,className:p(r&&"text-destructive",o),htmlFor:i,...t},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/components/ui/form.tsx",lineNumber:86,columnNumber:5},void 0)});et.displayName="FormLabel";const tt=l.forwardRef(({...o},t)=>{const{error:s,formItemId:r,formDescriptionId:i,formMessageId:a}=ze();return e.jsxDEV("div",{ref:t,id:r,"aria-describedby":s?`${i} ${a}`:`${i}`,"aria-invalid":!!s,...o},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/components/ui/form.tsx",lineNumber:103,columnNumber:5},void 0)});tt.displayName="FormControl";const st=l.forwardRef(({className:o,...t},s)=>{const{formDescriptionId:r}=ze();return e.jsxDEV("p",{ref:s,id:r,className:p("text-sm text-muted-foreground",o),...t},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/components/ui/form.tsx",lineNumber:125,columnNumber:5},void 0)});st.displayName="FormDescription";const ot=l.forwardRef(({className:o,children:t,...s},r)=>{const{error:i,formMessageId:a}=ze(),n=i?String(i?.message):t;return n?e.jsxDEV("p",{ref:r,id:a,className:p("text-sm font-medium text-destructive",o),...s,children:n},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/components/ui/form.tsx",lineNumber:147,columnNumber:5},void 0):null});ot.displayName="FormMessage";const ei=Ks({name:dt().min(1,"Room name is required").max(100,"Room name must be less than 100 characters").regex(/^[a-zA-Z0-9\s\-_]+$/,"Room name can only contain letters, numbers, spaces, hyphens, and underscores"),avatarUrl:dt().url("Must be a valid URL").optional().or(Qs(""))});function ti({open:o,onOpenChange:t}){const s=Tr(),r=Hs({resolver:Js(ei),defaultValues:{name:"",avatarUrl:""}}),i=async n=>{try{await s.mutateAsync({name:n.name,avatarUrl:n.avatarUrl||void 0}),t(!1),r.reset()}catch(c){console.error("Failed to create room:",c)}},a=()=>{s.isPending||(t(!1),r.reset())};return e.jsxDEV(ye,{open:o,onOpenChange:a,children:e.jsxDEV(xe,{className:"sm:max-w-[425px]",children:[e.jsxDEV(Ne,{children:[e.jsxDEV(fe,{children:"Create New Room"},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/components/chat/CreateRoomDialog.tsx",lineNumber:84,columnNumber:11},this),e.jsxDEV(pe,{children:"Create a new chat room to start conversations with your team."},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/components/chat/CreateRoomDialog.tsx",lineNumber:85,columnNumber:11},this)]},void 0,!0,{fileName:"C:/Users/thudao/coding/example-react/client/src/components/chat/CreateRoomDialog.tsx",lineNumber:83,columnNumber:9},this),e.jsxDEV(Zr,{...r,children:e.jsxDEV("form",{onSubmit:r.handleSubmit(i),className:"space-y-4",children:[e.jsxDEV(xt,{control:r.control,name:"name",render:({field:n})=>e.jsxDEV(Ze,{children:[e.jsxDEV(et,{children:"Room Name"},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/components/chat/CreateRoomDialog.tsx",lineNumber:97,columnNumber:19},this),e.jsxDEV(tt,{children:e.jsxDEV(P,{placeholder:"Enter room name...",...n,disabled:s.isPending},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/components/chat/CreateRoomDialog.tsx",lineNumber:99,columnNumber:21},this)},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/components/chat/CreateRoomDialog.tsx",lineNumber:98,columnNumber:19},this),e.jsxDEV(st,{children:"Choose a descriptive name for your room."},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/components/chat/CreateRoomDialog.tsx",lineNumber:105,columnNumber:19},this),e.jsxDEV(ot,{},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/components/chat/CreateRoomDialog.tsx",lineNumber:108,columnNumber:19},this)]},void 0,!0,{fileName:"C:/Users/thudao/coding/example-react/client/src/components/chat/CreateRoomDialog.tsx",lineNumber:96,columnNumber:17},this)},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/components/chat/CreateRoomDialog.tsx",lineNumber:92,columnNumber:13},this),e.jsxDEV(xt,{control:r.control,name:"avatarUrl",render:({field:n})=>e.jsxDEV(Ze,{children:[e.jsxDEV(et,{children:"Avatar URL (Optional)"},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/components/chat/CreateRoomDialog.tsx",lineNumber:118,columnNumber:19},this),e.jsxDEV(tt,{children:e.jsxDEV(P,{placeholder:"https://example.com/avatar.jpg",...n,disabled:s.isPending},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/components/chat/CreateRoomDialog.tsx",lineNumber:120,columnNumber:21},this)},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/components/chat/CreateRoomDialog.tsx",lineNumber:119,columnNumber:19},this),e.jsxDEV(st,{children:"Provide a URL for the room's avatar image."},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/components/chat/CreateRoomDialog.tsx",lineNumber:126,columnNumber:19},this),e.jsxDEV(ot,{},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/components/chat/CreateRoomDialog.tsx",lineNumber:129,columnNumber:19},this)]},void 0,!0,{fileName:"C:/Users/thudao/coding/example-react/client/src/components/chat/CreateRoomDialog.tsx",lineNumber:117,columnNumber:17},this)},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/components/chat/CreateRoomDialog.tsx",lineNumber:113,columnNumber:13},this),e.jsxDEV(Oe,{children:[e.jsxDEV(d,{type:"button",variant:"outline",onClick:a,disabled:s.isPending,children:"Cancel"},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/components/chat/CreateRoomDialog.tsx",lineNumber:135,columnNumber:15},this),e.jsxDEV(d,{type:"submit",disabled:s.isPending,children:s.isPending?"Creating...":"Create Room"},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/components/chat/CreateRoomDialog.tsx",lineNumber:143,columnNumber:15},this)]},void 0,!0,{fileName:"C:/Users/thudao/coding/example-react/client/src/components/chat/CreateRoomDialog.tsx",lineNumber:134,columnNumber:13},this)]},void 0,!0,{fileName:"C:/Users/thudao/coding/example-react/client/src/components/chat/CreateRoomDialog.tsx",lineNumber:91,columnNumber:11},this)},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/components/chat/CreateRoomDialog.tsx",lineNumber:90,columnNumber:9},this)]},void 0,!0,{fileName:"C:/Users/thudao/coding/example-react/client/src/components/chat/CreateRoomDialog.tsx",lineNumber:82,columnNumber:7},this)},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/components/chat/CreateRoomDialog.tsx",lineNumber:81,columnNumber:5},this)}function si({room:o,isSelected:t,onClick:s}){const r=Ar(),{user:i}=L(),a=n=>{n.stopPropagation(),r.mutate(o.id)};return e.jsxDEV("div",{onClick:s,className:`flex items-center gap-3 p-3 cursor-pointer transition-colors hover:bg-gray-100 ${t?"bg-blue-50 border-r-2 border-blue-500":""}`,children:[e.jsxDEV("div",{className:"relative",children:[e.jsxDEV(le,{className:"w-10 h-10",children:[e.jsxDEV(ce,{src:o.avatarUrl},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/components/chat/ChatRoomList.tsx",lineNumber:41,columnNumber:11},this),e.jsxDEV(me,{children:e.jsxDEV(Ys,{className:"w-5 h-5"},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/components/chat/ChatRoomList.tsx",lineNumber:43,columnNumber:13},this)},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/components/chat/ChatRoomList.tsx",lineNumber:42,columnNumber:11},this)]},void 0,!0,{fileName:"C:/Users/thudao/coding/example-react/client/src/components/chat/ChatRoomList.tsx",lineNumber:40,columnNumber:9},this),e.jsxDEV("div",{className:"absolute -bottom-0.5 -right-0.5 w-3 h-3 bg-green-500 border-2 border-white rounded-full"},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/components/chat/ChatRoomList.tsx",lineNumber:48,columnNumber:9},this)]},void 0,!0,{fileName:"C:/Users/thudao/coding/example-react/client/src/components/chat/ChatRoomList.tsx",lineNumber:39,columnNumber:7},this),e.jsxDEV("div",{className:"flex-1 min-w-0",children:[e.jsxDEV("div",{className:"flex items-center justify-between",children:[e.jsxDEV("h3",{className:"font-medium text-gray-900 truncate",children:o.name},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/components/chat/ChatRoomList.tsx",lineNumber:53,columnNumber:11},this),e.jsxDEV("div",{className:"flex items-center gap-1",children:[o.unreadCount&&o.unreadCount>0&&e.jsxDEV(Ve,{variant:"destructive",className:"text-xs",children:o.unreadCount>99?"99+":o.unreadCount},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/components/chat/ChatRoomList.tsx",lineNumber:59,columnNumber:15},this),o.lastActivity&&e.jsxDEV("span",{className:"text-xs text-gray-500",children:Pt(new Date(o.lastActivity),{addSuffix:!0})},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/components/chat/ChatRoomList.tsx",lineNumber:65,columnNumber:15},this)]},void 0,!0,{fileName:"C:/Users/thudao/coding/example-react/client/src/components/chat/ChatRoomList.tsx",lineNumber:57,columnNumber:11},this)]},void 0,!0,{fileName:"C:/Users/thudao/coding/example-react/client/src/components/chat/ChatRoomList.tsx",lineNumber:52,columnNumber:9},this),e.jsxDEV("div",{className:"flex items-center justify-between mt-1",children:[e.jsxDEV("div",{className:"flex items-center gap-1 text-xs text-gray-500",children:[e.jsxDEV(Se,{className:"w-3 h-3"},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/components/chat/ChatRoomList.tsx",lineNumber:74,columnNumber:13},this),e.jsxDEV("span",{children:[o.participants.length," members"]},void 0,!0,{fileName:"C:/Users/thudao/coding/example-react/client/src/components/chat/ChatRoomList.tsx",lineNumber:75,columnNumber:13},this)]},void 0,!0,{fileName:"C:/Users/thudao/coding/example-react/client/src/components/chat/ChatRoomList.tsx",lineNumber:73,columnNumber:11},this),i&&!o.participants.includes(i.id)&&e.jsxDEV(d,{size:"sm",variant:"outline",onClick:a,disabled:r.isPending,className:"h-6 px-2 text-xs",children:r.isPending?"Joining...":"Join"},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/components/chat/ChatRoomList.tsx",lineNumber:80,columnNumber:13},this)]},void 0,!0,{fileName:"C:/Users/thudao/coding/example-react/client/src/components/chat/ChatRoomList.tsx",lineNumber:72,columnNumber:9},this)]},void 0,!0,{fileName:"C:/Users/thudao/coding/example-react/client/src/components/chat/ChatRoomList.tsx",lineNumber:51,columnNumber:7},this)]},void 0,!0,{fileName:"C:/Users/thudao/coding/example-react/client/src/components/chat/ChatRoomList.tsx",lineNumber:33,columnNumber:5},this)}function oi({onRoomSelect:o,selectedRoomId:t}){const[s,r]=l.useState(""),[i,a]=l.useState(!1),{data:n,isLoading:c,error:m,refetch:u}=kr(1,10,"updated_at","desc");Qr(),Jr();const b=n?.rooms||[];console.log("ChatRoomList Debug:",{isLoading:c,error:m,roomsData:n,rooms:b,roomsCount:b.length});const h=b.filter(g=>g.name.toLowerCase().includes(s.toLowerCase()));return c?e.jsxDEV("div",{className:"h-full flex items-center justify-center p-4",children:e.jsxDEV("div",{className:"text-center",children:[e.jsxDEV("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto mb-2"},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/components/chat/ChatRoomList.tsx",lineNumber:130,columnNumber:11},this),e.jsxDEV("p",{className:"text-gray-600",children:"Loading rooms..."},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/components/chat/ChatRoomList.tsx",lineNumber:131,columnNumber:11},this)]},void 0,!0,{fileName:"C:/Users/thudao/coding/example-react/client/src/components/chat/ChatRoomList.tsx",lineNumber:129,columnNumber:9},this)},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/components/chat/ChatRoomList.tsx",lineNumber:128,columnNumber:7},this):m?e.jsxDEV("div",{className:"h-full flex items-center justify-center p-4",children:e.jsxDEV("div",{className:"text-center",children:[e.jsxDEV("p",{className:"text-red-600 mb-2",children:"Failed to load rooms"},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/components/chat/ChatRoomList.tsx",lineNumber:141,columnNumber:11},this),e.jsxDEV(d,{variant:"outline",onClick:()=>window.location.reload(),children:"Retry"},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/components/chat/ChatRoomList.tsx",lineNumber:142,columnNumber:11},this)]},void 0,!0,{fileName:"C:/Users/thudao/coding/example-react/client/src/components/chat/ChatRoomList.tsx",lineNumber:140,columnNumber:9},this)},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/components/chat/ChatRoomList.tsx",lineNumber:139,columnNumber:7},this):e.jsxDEV("div",{className:"h-full flex flex-col bg-white border-r",children:[e.jsxDEV("div",{className:"p-4 border-b",children:[e.jsxDEV("div",{className:"flex items-center justify-between mb-3",children:[e.jsxDEV("h2",{className:"text-lg font-semibold text-gray-900",children:["Chat Rooms (",b.length,")"]},void 0,!0,{fileName:"C:/Users/thudao/coding/example-react/client/src/components/chat/ChatRoomList.tsx",lineNumber:155,columnNumber:11},this),e.jsxDEV("div",{className:"flex gap-2",children:[e.jsxDEV(d,{size:"sm",variant:"outline",onClick:()=>u(),className:"h-8 w-8 p-0",title:"Refresh rooms",children:e.jsxDEV(Ws,{className:"h-4 w-4"},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/components/chat/ChatRoomList.tsx",lineNumber:164,columnNumber:15},this)},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/components/chat/ChatRoomList.tsx",lineNumber:157,columnNumber:13},this),e.jsxDEV(d,{size:"sm",onClick:()=>a(!0),className:"h-8 w-8 p-0",children:e.jsxDEV(Ut,{className:"w-4 h-4"},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/components/chat/ChatRoomList.tsx",lineNumber:171,columnNumber:15},this)},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/components/chat/ChatRoomList.tsx",lineNumber:166,columnNumber:13},this)]},void 0,!0,{fileName:"C:/Users/thudao/coding/example-react/client/src/components/chat/ChatRoomList.tsx",lineNumber:156,columnNumber:11},this)]},void 0,!0,{fileName:"C:/Users/thudao/coding/example-react/client/src/components/chat/ChatRoomList.tsx",lineNumber:154,columnNumber:9},this),e.jsxDEV("div",{className:"relative",children:[e.jsxDEV(Lt,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400"},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/components/chat/ChatRoomList.tsx",lineNumber:178,columnNumber:11},this),e.jsxDEV("input",{type:"text",placeholder:"Search rooms...",value:s,onChange:g=>r(g.target.value),className:"w-full pl-9 pr-3 py-2 text-sm border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/components/chat/ChatRoomList.tsx",lineNumber:179,columnNumber:11},this)]},void 0,!0,{fileName:"C:/Users/thudao/coding/example-react/client/src/components/chat/ChatRoomList.tsx",lineNumber:177,columnNumber:9},this)]},void 0,!0,{fileName:"C:/Users/thudao/coding/example-react/client/src/components/chat/ChatRoomList.tsx",lineNumber:153,columnNumber:7},this),e.jsxDEV("div",{className:"flex-1 overflow-y-auto",children:h.length===0?e.jsxDEV("div",{className:"p-4 text-center text-gray-500",children:[s?"No rooms found":"No rooms available",!s&&e.jsxDEV("div",{className:"mt-2",children:e.jsxDEV(d,{variant:"outline",size:"sm",onClick:()=>a(!0),children:"Create your first room"},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/components/chat/ChatRoomList.tsx",lineNumber:196,columnNumber:17},this)},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/components/chat/ChatRoomList.tsx",lineNumber:195,columnNumber:15},this)]},void 0,!0,{fileName:"C:/Users/thudao/coding/example-react/client/src/components/chat/ChatRoomList.tsx",lineNumber:192,columnNumber:11},this):e.jsxDEV("div",{className:"divide-y",children:h.map(g=>e.jsxDEV(si,{room:g,isSelected:t===g.id,onClick:()=>o(g.id)},g.id,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/components/chat/ChatRoomList.tsx",lineNumber:209,columnNumber:15},this))},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/components/chat/ChatRoomList.tsx",lineNumber:207,columnNumber:11},this)},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/components/chat/ChatRoomList.tsx",lineNumber:190,columnNumber:7},this),e.jsxDEV(ti,{open:i,onOpenChange:a},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/components/chat/ChatRoomList.tsx",lineNumber:221,columnNumber:7},this)]},void 0,!0,{fileName:"C:/Users/thudao/coding/example-react/client/src/components/chat/ChatRoomList.tsx",lineNumber:151,columnNumber:5},this)}const ri=eo,ii=to,ni=l.forwardRef(({className:o,inset:t,children:s,...r},i)=>e.jsxDEV(At,{ref:i,className:p("flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent",t&&"pl-8",o),...r,children:[s,e.jsxDEV(Gs,{className:"ml-auto h-4 w-4"},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/components/ui/dropdown-menu.tsx",lineNumber:37,columnNumber:5},void 0)]},void 0,!0,{fileName:"C:/Users/thudao/coding/example-react/client/src/components/ui/dropdown-menu.tsx",lineNumber:27,columnNumber:3},void 0));ni.displayName=At.displayName;const ai=l.forwardRef(({className:o,...t},s)=>e.jsxDEV(Mt,{ref:s,className:p("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",o),...t},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/components/ui/dropdown-menu.tsx",lineNumber:47,columnNumber:3},void 0));ai.displayName=Mt.displayName;const es=l.forwardRef(({className:o,sideOffset:t=4,...s},r)=>e.jsxDEV(Xs,{children:e.jsxDEV(It,{ref:r,sideOffset:t,className:p("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",o),...s},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/components/ui/dropdown-menu.tsx",lineNumber:64,columnNumber:5},void 0)},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/components/ui/dropdown-menu.tsx",lineNumber:63,columnNumber:3},void 0));es.displayName=It.displayName;const be=l.forwardRef(({className:o,inset:t,...s},r)=>e.jsxDEV(Ft,{ref:r,className:p("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t&&"pl-8",o),...s},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/components/ui/dropdown-menu.tsx",lineNumber:83,columnNumber:3},void 0));be.displayName=Ft.displayName;const li=l.forwardRef(({className:o,children:t,checked:s,...r},i)=>e.jsxDEV($t,{ref:i,className:p("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",o),checked:s,...r,children:[e.jsxDEV("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:e.jsxDEV(Ot,{children:e.jsxDEV(Ce,{className:"h-4 w-4"},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/components/ui/dropdown-menu.tsx",lineNumber:110,columnNumber:9},void 0)},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/components/ui/dropdown-menu.tsx",lineNumber:109,columnNumber:7},void 0)},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/components/ui/dropdown-menu.tsx",lineNumber:108,columnNumber:5},void 0),t]},void 0,!0,{fileName:"C:/Users/thudao/coding/example-react/client/src/components/ui/dropdown-menu.tsx",lineNumber:99,columnNumber:3},void 0));li.displayName=$t.displayName;const ci=l.forwardRef(({className:o,children:t,...s},r)=>e.jsxDEV(_t,{ref:r,className:p("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",o),...s,children:[e.jsxDEV("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:e.jsxDEV(Ot,{children:e.jsxDEV(Zs,{className:"h-2 w-2 fill-current"},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/components/ui/dropdown-menu.tsx",lineNumber:133,columnNumber:9},void 0)},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/components/ui/dropdown-menu.tsx",lineNumber:132,columnNumber:7},void 0)},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/components/ui/dropdown-menu.tsx",lineNumber:131,columnNumber:5},void 0),t]},void 0,!0,{fileName:"C:/Users/thudao/coding/example-react/client/src/components/ui/dropdown-menu.tsx",lineNumber:123,columnNumber:3},void 0));ci.displayName=_t.displayName;const mi=l.forwardRef(({className:o,inset:t,...s},r)=>e.jsxDEV(zt,{ref:r,className:p("px-2 py-1.5 text-sm font-semibold",t&&"pl-8",o),...s},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/components/ui/dropdown-menu.tsx",lineNumber:147,columnNumber:3},void 0));mi.displayName=zt.displayName;const rt=l.forwardRef(({className:o,...t},s)=>e.jsxDEV(qt,{ref:s,className:p("-mx-1 my-1 h-px bg-muted",o),...t},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/components/ui/dropdown-menu.tsx",lineNumber:163,columnNumber:3},void 0));rt.displayName=qt.displayName;function ui({message:o,isOwner:t,onEdit:s,onDelete:r,onReply:i}){const[a,n]=l.useState(!1),c=async()=>{try{await navigator.clipboard.writeText(o.content)}catch(u){console.error("Failed to copy message:",u)}},m=()=>{r?.(o.id),n(!1)};return e.jsxDEV(e.Fragment,{children:[e.jsxDEV(ri,{children:[e.jsxDEV(ii,{asChild:!0,children:e.jsxDEV(d,{variant:"ghost",size:"sm",className:"h-6 w-6 p-0 opacity-0 group-hover:opacity-100 transition-opacity",children:e.jsxDEV(so,{className:"w-3 h-3"},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/components/chat/MessageActions.tsx",lineNumber:63,columnNumber:13},this)},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/components/chat/MessageActions.tsx",lineNumber:58,columnNumber:11},this)},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/components/chat/MessageActions.tsx",lineNumber:57,columnNumber:9},this),e.jsxDEV(es,{align:"end",className:"w-48",children:[i&&e.jsxDEV(e.Fragment,{children:[e.jsxDEV(be,{onClick:()=>i(o),children:[e.jsxDEV(oo,{className:"w-4 h-4 mr-2"},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/components/chat/MessageActions.tsx",lineNumber:71,columnNumber:17},this),"Reply"]},void 0,!0,{fileName:"C:/Users/thudao/coding/example-react/client/src/components/chat/MessageActions.tsx",lineNumber:70,columnNumber:15},this),e.jsxDEV(rt,{},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/components/chat/MessageActions.tsx",lineNumber:74,columnNumber:15},this)]},void 0,!0,{fileName:"C:/Users/thudao/coding/example-react/client/src/components/chat/MessageActions.tsx",lineNumber:69,columnNumber:13},this),e.jsxDEV(be,{onClick:c,children:[e.jsxDEV(Je,{className:"w-4 h-4 mr-2"},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/components/chat/MessageActions.tsx",lineNumber:80,columnNumber:13},this),"Copy message"]},void 0,!0,{fileName:"C:/Users/thudao/coding/example-react/client/src/components/chat/MessageActions.tsx",lineNumber:79,columnNumber:11},this),t&&e.jsxDEV(e.Fragment,{children:[e.jsxDEV(rt,{},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/components/chat/MessageActions.tsx",lineNumber:87,columnNumber:15},this),s&&e.jsxDEV(be,{onClick:()=>s(o.id),children:[e.jsxDEV(We,{className:"w-4 h-4 mr-2"},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/components/chat/MessageActions.tsx",lineNumber:92,columnNumber:19},this),"Edit message"]},void 0,!0,{fileName:"C:/Users/thudao/coding/example-react/client/src/components/chat/MessageActions.tsx",lineNumber:91,columnNumber:17},this),r&&e.jsxDEV(be,{onClick:()=>n(!0),className:"text-red-600 focus:text-red-600",children:[e.jsxDEV(ve,{className:"w-4 h-4 mr-2"},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/components/chat/MessageActions.tsx",lineNumber:103,columnNumber:19},this),"Delete message"]},void 0,!0,{fileName:"C:/Users/thudao/coding/example-react/client/src/components/chat/MessageActions.tsx",lineNumber:99,columnNumber:17},this)]},void 0,!0,{fileName:"C:/Users/thudao/coding/example-react/client/src/components/chat/MessageActions.tsx",lineNumber:86,columnNumber:13},this)]},void 0,!0,{fileName:"C:/Users/thudao/coding/example-react/client/src/components/chat/MessageActions.tsx",lineNumber:66,columnNumber:9},this)]},void 0,!0,{fileName:"C:/Users/thudao/coding/example-react/client/src/components/chat/MessageActions.tsx",lineNumber:56,columnNumber:7},this),e.jsxDEV(Te,{open:a,onOpenChange:n,children:e.jsxDEV(Le,{children:[e.jsxDEV(Pe,{children:[e.jsxDEV(Me,{children:"Delete Message"},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/components/chat/MessageActions.tsx",lineNumber:116,columnNumber:13},this),e.jsxDEV(Ie,{children:"Are you sure you want to delete this message? This action cannot be undone."},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/components/chat/MessageActions.tsx",lineNumber:117,columnNumber:13},this)]},void 0,!0,{fileName:"C:/Users/thudao/coding/example-react/client/src/components/chat/MessageActions.tsx",lineNumber:115,columnNumber:11},this),e.jsxDEV(Ae,{children:[e.jsxDEV($e,{children:"Cancel"},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/components/chat/MessageActions.tsx",lineNumber:122,columnNumber:13},this),e.jsxDEV(Fe,{onClick:m,className:"bg-red-600 hover:bg-red-700",children:"Delete"},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/components/chat/MessageActions.tsx",lineNumber:123,columnNumber:13},this)]},void 0,!0,{fileName:"C:/Users/thudao/coding/example-react/client/src/components/chat/MessageActions.tsx",lineNumber:121,columnNumber:11},this)]},void 0,!0,{fileName:"C:/Users/thudao/coding/example-react/client/src/components/chat/MessageActions.tsx",lineNumber:114,columnNumber:9},this)},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/components/chat/MessageActions.tsx",lineNumber:113,columnNumber:7},this)]},void 0,!0,{fileName:"C:/Users/thudao/coding/example-react/client/src/components/chat/MessageActions.tsx",lineNumber:55,columnNumber:5},this)}function di({message:o,isOwn:t,showAvatar:s,onEdit:r,onDelete:i}){const[a,n]=l.useState(!1),[c,m]=l.useState(o.content),u=()=>{c.trim()&&c!==o.content&&r(o.id,c.trim()),n(!1)},b=y=>{y.key==="Enter"&&!y.shiftKey?(y.preventDefault(),u()):y.key==="Escape"&&(n(!1),m(o.content))},h=y=>{n(!0)},g=y=>{i(y)};return e.jsxDEV("div",{className:`flex gap-3 p-3 hover:bg-gray-50 group ${t?"flex-row-reverse":""}`,children:[s&&e.jsxDEV(le,{className:"w-8 h-8 flex-shrink-0",children:[e.jsxDEV(ce,{src:o.author.avatarUrl},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/components/chat/MessageList.tsx",lineNumber:60,columnNumber:11},this),e.jsxDEV(me,{children:o.author.username.charAt(0).toUpperCase()},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/components/chat/MessageList.tsx",lineNumber:61,columnNumber:11},this)]},void 0,!0,{fileName:"C:/Users/thudao/coding/example-react/client/src/components/chat/MessageList.tsx",lineNumber:59,columnNumber:9},this),e.jsxDEV("div",{className:`flex-1 min-w-0 ${t?"text-right":""}`,children:[s&&e.jsxDEV("div",{className:`flex items-center gap-2 mb-1 ${t?"justify-end":""}`,children:[e.jsxDEV("span",{className:"text-sm font-medium text-gray-900",children:o.author.username},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/components/chat/MessageList.tsx",lineNumber:70,columnNumber:13},this),e.jsxDEV("span",{className:"text-xs text-gray-500",children:Pt(new Date(o.createdAt),{addSuffix:!0})},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/components/chat/MessageList.tsx",lineNumber:73,columnNumber:13},this)]},void 0,!0,{fileName:"C:/Users/thudao/coding/example-react/client/src/components/chat/MessageList.tsx",lineNumber:69,columnNumber:11},this),e.jsxDEV("div",{className:`relative ${t?"ml-8":"mr-8"}`,children:[a?e.jsxDEV("div",{className:"space-y-2",children:[e.jsxDEV("textarea",{value:c,onChange:y=>m(y.target.value),onKeyDown:b,className:"w-full p-2 text-sm border rounded resize-none focus:outline-none focus:ring-2 focus:ring-blue-500",rows:Math.min(c.split(`
`).length,5),autoFocus:!0},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/components/chat/MessageList.tsx",lineNumber:82,columnNumber:15},this),e.jsxDEV("div",{className:"flex gap-2 text-xs",children:[e.jsxDEV(d,{size:"sm",onClick:u,children:"Save"},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/components/chat/MessageList.tsx",lineNumber:91,columnNumber:17},this),e.jsxDEV(d,{size:"sm",variant:"outline",onClick:()=>n(!1),children:"Cancel"},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/components/chat/MessageList.tsx",lineNumber:92,columnNumber:17},this)]},void 0,!0,{fileName:"C:/Users/thudao/coding/example-react/client/src/components/chat/MessageList.tsx",lineNumber:90,columnNumber:15},this)]},void 0,!0,{fileName:"C:/Users/thudao/coding/example-react/client/src/components/chat/MessageList.tsx",lineNumber:81,columnNumber:13},this):e.jsxDEV("div",{className:`inline-block max-w-full p-3 rounded-lg text-sm break-words ${t?"bg-blue-500 text-white":"bg-gray-100 text-gray-900"} ${o.error?"bg-red-100 border border-red-300":""}`,children:[o.content,o.error&&e.jsxDEV("div",{className:"mt-1 text-xs text-red-600",children:["Failed to send: ",o.error]},void 0,!0,{fileName:"C:/Users/thudao/coding/example-react/client/src/components/chat/MessageList.tsx",lineNumber:107,columnNumber:17},this)]},void 0,!0,{fileName:"C:/Users/thudao/coding/example-react/client/src/components/chat/MessageList.tsx",lineNumber:98,columnNumber:13},this),!a&&e.jsxDEV("div",{className:`absolute top-0 ${t?"left-0 -translate-x-full":"right-0 translate-x-full"}`,children:e.jsxDEV(ui,{message:o,isOwner:t,onEdit:h,onDelete:g},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/components/chat/MessageList.tsx",lineNumber:117,columnNumber:15},this)},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/components/chat/MessageList.tsx",lineNumber:116,columnNumber:13},this)]},void 0,!0,{fileName:"C:/Users/thudao/coding/example-react/client/src/components/chat/MessageList.tsx",lineNumber:79,columnNumber:9},this)]},void 0,!0,{fileName:"C:/Users/thudao/coding/example-react/client/src/components/chat/MessageList.tsx",lineNumber:67,columnNumber:7},this)]},void 0,!0,{fileName:"C:/Users/thudao/coding/example-react/client/src/components/chat/MessageList.tsx",lineNumber:57,columnNumber:5},this)}function hi({roomId:o,messages:t,isLoading:s,hasNextPage:r,onLoadMore:i}){const a=l.useRef(null),n=l.useRef(null),[c,m]=l.useState(!0),[u,b]=l.useState(!1),{user:h}=L(),{typingUsersByRoom:g}=_e(),y=_r(o),R=zr(o),w=g[o]||[],x=l.useCallback(()=>{if(!n.current)return;const{scrollTop:f,scrollHeight:v,clientHeight:O}=n.current,Z=v-f-O<100;m(Z);const re=window.scrollY>300;b(re),f===0&&r&&i&&i()},[r,i]),U=(f,v)=>{y.mutate({messageId:f,data:{content:v}})},N=f=>{R.mutate(f)},S=()=>{window.scrollTo({top:0,behavior:"smooth"})};return l.useEffect(()=>(window.addEventListener("scroll",x),()=>{window.removeEventListener("scroll",x)}),[]),l.useEffect(()=>{c&&a.current&&a.current.scrollIntoView({behavior:"smooth"})},[t,c]),s&&t.length===0?e.jsxDEV("div",{className:"flex-1 flex items-center justify-center",children:e.jsxDEV("div",{className:"text-gray-500",children:"Loading messages..."},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/components/chat/MessageList.tsx",lineNumber:192,columnNumber:9},this)},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/components/chat/MessageList.tsx",lineNumber:191,columnNumber:7},this):e.jsxDEV("div",{className:"flex-1 flex flex-col relative",children:[e.jsxDEV("div",{ref:n,onScroll:x,className:"flex-1 overflow-y-auto",children:[r&&e.jsxDEV("div",{className:"p-4 text-center",children:e.jsxDEV(d,{variant:"outline",size:"sm",onClick:i,disabled:s,children:s?"Loading...":"Load more messages"},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/components/chat/MessageList.tsx",lineNumber:206,columnNumber:13},this)},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/components/chat/MessageList.tsx",lineNumber:205,columnNumber:11},this),e.jsxDEV("div",{className:"space-y-1",children:t.map((f,v)=>{const O=t[v-1],Z=f.author.id===h?.id,re=!O||O.author.id!==f.author.id||new Date(f.createdAt).getTime()-new Date(O.createdAt).getTime()>5*60*1e3;return e.jsxDEV(di,{message:f,isOwn:Z,showAvatar:re,onEdit:U,onDelete:N},f.id,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/components/chat/MessageList.tsx",lineNumber:226,columnNumber:15},this)})},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/components/chat/MessageList.tsx",lineNumber:217,columnNumber:9},this),w.length>0&&e.jsxDEV("div",{className:"p-3 text-sm text-gray-500",children:w.length===1?e.jsxDEV("span",{children:[w[0].username," is typing..."]},void 0,!0,{fileName:"C:/Users/thudao/coding/example-react/client/src/components/chat/MessageList.tsx",lineNumber:242,columnNumber:15},this):e.jsxDEV("span",{children:[w.map(f=>f.username).join(", ")," are typing..."]},void 0,!0,{fileName:"C:/Users/thudao/coding/example-react/client/src/components/chat/MessageList.tsx",lineNumber:244,columnNumber:15},this)},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/components/chat/MessageList.tsx",lineNumber:240,columnNumber:11},this),e.jsxDEV("div",{ref:a},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/components/chat/MessageList.tsx",lineNumber:249,columnNumber:9},this)]},void 0,!0,{fileName:"C:/Users/thudao/coding/example-react/client/src/components/chat/MessageList.tsx",lineNumber:199,columnNumber:7},this),u&&e.jsxDEV("div",{className:"fixed bottom-24 right-6 z-50",children:e.jsxDEV(d,{onClick:S,size:"sm",className:"rounded-full w-12 h-12 p-0 shadow-xl bg-white border border-gray-200 hover:bg-gray-50 text-gray-600 hover:text-gray-800 transition-all duration-200 hover:scale-105 backdrop-blur-sm",title:"Scroll to top",children:e.jsxDEV(ro,{className:"w-5 h-5"},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/components/chat/MessageList.tsx",lineNumber:260,columnNumber:13},this)},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/components/chat/MessageList.tsx",lineNumber:254,columnNumber:11},this)},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/components/chat/MessageList.tsx",lineNumber:253,columnNumber:9},this)]},void 0,!0,{fileName:"C:/Users/thudao/coding/example-react/client/src/components/chat/MessageList.tsx",lineNumber:198,columnNumber:5},this)}function xi({onEmojiSelect:o,disabled:t=!1}){const[s,r]=l.useState(!1),i=l.useRef(null),a=l.useRef(null);l.useEffect(()=>{const c=m=>{i.current&&a.current&&!i.current.contains(m.target)&&!a.current.contains(m.target)&&r(!1)};if(s)return document.addEventListener("mousedown",c),()=>document.removeEventListener("mousedown",c)},[s]);const n=c=>{o(c.native),r(!1)};return e.jsxDEV("div",{className:"relative",children:[e.jsxDEV(d,{ref:a,type:"button",variant:"ghost",size:"sm",className:"h-8 w-8 p-0",onClick:()=>r(!s),disabled:t,title:"Add emoji",children:e.jsxDEV(io,{className:"w-4 h-4"},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/components/chat/EmojiPicker.tsx",lineNumber:53,columnNumber:9},this)},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/components/chat/EmojiPicker.tsx",lineNumber:43,columnNumber:7},this),s&&e.jsxDEV("div",{ref:i,className:"absolute bottom-full right-0 mb-2 z-50",children:e.jsxDEV("div",{className:"bg-white rounded-lg shadow-lg border",children:e.jsxDEV(no,{data:ao,onEmojiSelect:n,theme:"light",set:"native",previewPosition:"none",skinTonePosition:"none",maxFrequentRows:2,perLine:8,emojiSize:20,emojiButtonSize:28,searchPosition:"sticky",navPosition:"bottom"},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/components/chat/EmojiPicker.tsx",lineNumber:62,columnNumber:13},this)},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/components/chat/EmojiPicker.tsx",lineNumber:61,columnNumber:11},this)},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/components/chat/EmojiPicker.tsx",lineNumber:57,columnNumber:9},this)]},void 0,!0,{fileName:"C:/Users/thudao/coding/example-react/client/src/components/chat/EmojiPicker.tsx",lineNumber:42,columnNumber:5},this)}function Ni({roomId:o,disabled:t=!1,placeholder:s="Type a message..."}){const[r,i]=l.useState(""),[a,n]=l.useState(!1),c=l.useRef(null),m=l.useRef(null),u=l.useRef(0),{sendMessage:b,setTyping:h}=_e(),g=x=>{const U=c.current;if(!U)return;const N=U.selectionStart,S=U.selectionEnd,f=r.slice(0,N)+x+r.slice(S);i(f),w({target:{value:f}}),setTimeout(()=>{U.focus();const v=N+x.length;U.setSelectionRange(v,v)},0)},y=l.useCallback(x=>{x.preventDefault(),!(!r.trim()||t)&&(b(o,r.trim()),i(""),a&&(h(o,!1),n(!1)),c.current&&(c.current.style.height="auto"))},[r,t,o,b,h]),R=l.useCallback(x=>{x.key==="Enter"&&(x.preventDefault(),y(x))},[y]),w=l.useCallback(x=>{const U=x.target.value;i(U),c.current&&(c.current.style.height="auto",c.current.style.height=`${Math.min(c.current.scrollHeight,120)}px`);const N=Date.now();U.trim()?(a?N-u.current>1e3&&(h(o,!0),u.current=N):(n(!0),h(o,!0),u.current=N),m.current&&clearTimeout(m.current),m.current=window.setTimeout(()=>{n(!1),h(o,!1)},3e3)):a&&(n(!1),h(o,!1),m.current&&(clearTimeout(m.current),m.current=null))},[a,o,h]);return l.useEffect(()=>()=>{m.current&&clearTimeout(m.current),a&&h(o,!1)},[o,a,h]),e.jsxDEV("div",{className:"sticky bottom-0 z-10 border-t bg-white p-4 shadow-lg",children:[e.jsxDEV("div",{className:"flex items-end gap-2",children:[e.jsxDEV("div",{className:"flex-1 relative",children:[e.jsxDEV("textarea",{ref:c,value:r,onChange:w,onKeyDown:R,placeholder:s,disabled:t,className:"w-full resize-none rounded-lg border border-gray-300 px-3 py-2 pr-10 text-sm focus:border-blue-500 focus:outline-none focus:ring-1 focus:ring-blue-500 disabled:bg-gray-100 disabled:cursor-not-allowed",style:{minHeight:"40px",maxHeight:"120px"},rows:1},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/components/chat/MessageInput.tsx",lineNumber:153,columnNumber:11},this),e.jsxDEV("div",{className:"absolute right-2 top-1/2 -translate-y-1/2",children:e.jsxDEV(xi,{onEmojiSelect:g,disabled:t},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/components/chat/MessageInput.tsx",lineNumber:167,columnNumber:13},this)},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/components/chat/MessageInput.tsx",lineNumber:166,columnNumber:11},this)]},void 0,!0,{fileName:"C:/Users/thudao/coding/example-react/client/src/components/chat/MessageInput.tsx",lineNumber:152,columnNumber:9},this),e.jsxDEV(d,{type:"button",size:"sm",disabled:!r.trim()||t,className:"h-10 px-3",onClick:x=>y(x),children:[e.jsxDEV(lo,{className:"w-4 h-4"},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/components/chat/MessageInput.tsx",lineNumber:181,columnNumber:11},this),e.jsxDEV("span",{className:"sr-only",children:"Send message"},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/components/chat/MessageInput.tsx",lineNumber:182,columnNumber:11},this)]},void 0,!0,{fileName:"C:/Users/thudao/coding/example-react/client/src/components/chat/MessageInput.tsx",lineNumber:174,columnNumber:9},this)]},void 0,!0,{fileName:"C:/Users/thudao/coding/example-react/client/src/components/chat/MessageInput.tsx",lineNumber:151,columnNumber:7},this),r.length>1800&&e.jsxDEV("div",{className:"mt-1 text-xs text-gray-500 text-right",children:[r.length,"/2000"]},void 0,!0,{fileName:"C:/Users/thudao/coding/example-react/client/src/components/chat/MessageInput.tsx",lineNumber:188,columnNumber:9},this)]},void 0,!0,{fileName:"C:/Users/thudao/coding/example-react/client/src/components/chat/MessageInput.tsx",lineNumber:150,columnNumber:5},this)}const ts=l.forwardRef(({className:o,...t},s)=>e.jsxDEV(Bt,{ref:s,className:p("peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",o),...t,children:e.jsxDEV(co,{className:p("flex items-center justify-center text-current"),children:e.jsxDEV(Ce,{className:"h-4 w-4"},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/components/ui/checkbox.tsx",lineNumber:24,columnNumber:7},void 0)},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/components/ui/checkbox.tsx",lineNumber:21,columnNumber:5},void 0)},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/components/ui/checkbox.tsx",lineNumber:13,columnNumber:3},void 0));ts.displayName=Bt.displayName;class fi{baseUrl="/users";async searchUsers(t,s=1,r=10,i){const a=new URLSearchParams({page:s.toString(),limit:r.toString()});return t&&t.trim()&&a.append("q",t.trim()),i&&a.append("roomId",i),(await j.get(`${this.baseUrl}/search?${a.toString()}`)).data||{users:[],total:0,page:1,limit:10,totalPages:0}}}const pi=new fi,ss={all:["users"],search:(o,t,s,r)=>[...ss.all,"search",{query:o,page:t,limit:s,roomId:r}]};function gi(o,t=1,s=10,r){return de({queryKey:ss.search(o,t,s,r),queryFn:()=>pi.searchUsers(o,t,s,r),staleTime:5*60*1e3,enabled:!0})}function bi(o,t){const[s,r]=l.useState(o);return l.useEffect(()=>{const i=setTimeout(()=>{r(o)},t);return()=>{clearTimeout(i)}},[o,t]),s}function vi({open:o,onOpenChange:t,roomId:s,roomName:r}){const[i,a]=l.useState(""),[n,c]=l.useState([]),m=bi(i,300),{data:u,isLoading:b}=gi(m,1,20,s),h=Ir(),g=u?.users||[],y=(x,U)=>{c(U?N=>[...N,x]:N=>N.filter(S=>S!==x))},R=async()=>{if(n.length!==0)try{await h.mutateAsync({roomId:s,userIds:n}),c([]),a(""),t(!1)}catch(x){console.error("Failed to invite users:",x)}},w=()=>{c([]),a(""),t(!1)};return e.jsxDEV(ye,{open:o,onOpenChange:w,children:e.jsxDEV(xe,{className:"sm:max-w-md",children:[e.jsxDEV(Ne,{children:[e.jsxDEV(fe,{className:"flex items-center gap-2",children:[e.jsxDEV(Ye,{className:"h-5 w-5"},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/components/chat/InviteUsersDialog.tsx",lineNumber:90,columnNumber:13},this),"Invite Users to ",r]},void 0,!0,{fileName:"C:/Users/thudao/coding/example-react/client/src/components/chat/InviteUsersDialog.tsx",lineNumber:89,columnNumber:11},this),e.jsxDEV(pe,{children:"Search and select users to invite to this chat room."},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/components/chat/InviteUsersDialog.tsx",lineNumber:93,columnNumber:11},this)]},void 0,!0,{fileName:"C:/Users/thudao/coding/example-react/client/src/components/chat/InviteUsersDialog.tsx",lineNumber:88,columnNumber:9},this),e.jsxDEV("div",{className:"space-y-4",children:[e.jsxDEV("div",{className:"space-y-2",children:[e.jsxDEV(A,{htmlFor:"search",children:"Search Users"},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/components/chat/InviteUsersDialog.tsx",lineNumber:101,columnNumber:13},this),e.jsxDEV("div",{className:"relative",children:[e.jsxDEV(Lt,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/components/chat/InviteUsersDialog.tsx",lineNumber:103,columnNumber:15},this),e.jsxDEV(P,{id:"search",placeholder:"Search by username or email...",value:i,onChange:x=>a(x.target.value),className:"pl-10"},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/components/chat/InviteUsersDialog.tsx",lineNumber:104,columnNumber:15},this)]},void 0,!0,{fileName:"C:/Users/thudao/coding/example-react/client/src/components/chat/InviteUsersDialog.tsx",lineNumber:102,columnNumber:13},this)]},void 0,!0,{fileName:"C:/Users/thudao/coding/example-react/client/src/components/chat/InviteUsersDialog.tsx",lineNumber:100,columnNumber:11},this),n.length>0&&e.jsxDEV("div",{className:"text-sm text-gray-600",children:[n.length," user(s) selected"]},void 0,!0,{fileName:"C:/Users/thudao/coding/example-react/client/src/components/chat/InviteUsersDialog.tsx",lineNumber:116,columnNumber:13},this),e.jsxDEV("div",{className:"space-y-2",children:[e.jsxDEV(A,{children:"Available Users"},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/components/chat/InviteUsersDialog.tsx",lineNumber:123,columnNumber:13},this),e.jsxDEV("div",{className:"h-64 border rounded-md p-2 overflow-y-auto",children:b?e.jsxDEV("div",{className:"flex items-center justify-center py-8",children:[e.jsxDEV(Y,{className:"h-6 w-6 animate-spin"},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/components/chat/InviteUsersDialog.tsx",lineNumber:127,columnNumber:19},this),e.jsxDEV("span",{className:"ml-2",children:"Searching users..."},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/components/chat/InviteUsersDialog.tsx",lineNumber:128,columnNumber:19},this)]},void 0,!0,{fileName:"C:/Users/thudao/coding/example-react/client/src/components/chat/InviteUsersDialog.tsx",lineNumber:126,columnNumber:17},this):g.length===0?e.jsxDEV("div",{className:"text-center py-8 text-gray-500",children:i?"No users found":"No users available"},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/components/chat/InviteUsersDialog.tsx",lineNumber:131,columnNumber:17},this):e.jsxDEV("div",{className:"space-y-2",children:g.map(x=>e.jsxDEV("div",{className:"flex items-center space-x-3 p-2 rounded-lg hover:bg-gray-50",children:[e.jsxDEV(ts,{id:x.id,checked:n.includes(x.id),onCheckedChange:U=>y(x.id,U)},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/components/chat/InviteUsersDialog.tsx",lineNumber:141,columnNumber:23},this),e.jsxDEV(le,{className:"h-8 w-8",children:[e.jsxDEV(ce,{src:x.avatarUrl,alt:x.username},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/components/chat/InviteUsersDialog.tsx",lineNumber:149,columnNumber:25},this),e.jsxDEV(me,{children:x.username.charAt(0).toUpperCase()},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/components/chat/InviteUsersDialog.tsx",lineNumber:150,columnNumber:25},this)]},void 0,!0,{fileName:"C:/Users/thudao/coding/example-react/client/src/components/chat/InviteUsersDialog.tsx",lineNumber:148,columnNumber:23},this),e.jsxDEV("div",{className:"flex-1 min-w-0",children:[e.jsxDEV("p",{className:"text-sm font-medium text-gray-900 truncate",children:x.username},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/components/chat/InviteUsersDialog.tsx",lineNumber:155,columnNumber:25},this),e.jsxDEV("p",{className:"text-xs text-gray-500 truncate",children:x.email},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/components/chat/InviteUsersDialog.tsx",lineNumber:158,columnNumber:25},this)]},void 0,!0,{fileName:"C:/Users/thudao/coding/example-react/client/src/components/chat/InviteUsersDialog.tsx",lineNumber:154,columnNumber:23},this)]},x.id,!0,{fileName:"C:/Users/thudao/coding/example-react/client/src/components/chat/InviteUsersDialog.tsx",lineNumber:137,columnNumber:21},this))},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/components/chat/InviteUsersDialog.tsx",lineNumber:135,columnNumber:17},this)},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/components/chat/InviteUsersDialog.tsx",lineNumber:124,columnNumber:13},this)]},void 0,!0,{fileName:"C:/Users/thudao/coding/example-react/client/src/components/chat/InviteUsersDialog.tsx",lineNumber:122,columnNumber:11},this)]},void 0,!0,{fileName:"C:/Users/thudao/coding/example-react/client/src/components/chat/InviteUsersDialog.tsx",lineNumber:98,columnNumber:9},this),e.jsxDEV(Oe,{children:[e.jsxDEV(d,{variant:"outline",onClick:w,children:"Cancel"},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/components/chat/InviteUsersDialog.tsx",lineNumber:171,columnNumber:11},this),e.jsxDEV(d,{onClick:R,disabled:n.length===0||h.isPending,children:h.isPending?e.jsxDEV(e.Fragment,{children:[e.jsxDEV(Y,{className:"h-4 w-4 animate-spin mr-2"},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/components/chat/InviteUsersDialog.tsx",lineNumber:180,columnNumber:17},this),"Inviting..."]},void 0,!0,{fileName:"C:/Users/thudao/coding/example-react/client/src/components/chat/InviteUsersDialog.tsx",lineNumber:179,columnNumber:15},this):e.jsxDEV(e.Fragment,{children:[e.jsxDEV(Ye,{className:"h-4 w-4 mr-2"},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/components/chat/InviteUsersDialog.tsx",lineNumber:185,columnNumber:17},this),"Invite ",n.length," User(s)"]},void 0,!0,{fileName:"C:/Users/thudao/coding/example-react/client/src/components/chat/InviteUsersDialog.tsx",lineNumber:184,columnNumber:15},this)},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/components/chat/InviteUsersDialog.tsx",lineNumber:174,columnNumber:11},this)]},void 0,!0,{fileName:"C:/Users/thudao/coding/example-react/client/src/components/chat/InviteUsersDialog.tsx",lineNumber:170,columnNumber:9},this)]},void 0,!0,{fileName:"C:/Users/thudao/coding/example-react/client/src/components/chat/InviteUsersDialog.tsx",lineNumber:87,columnNumber:7},this)},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/components/chat/InviteUsersDialog.tsx",lineNumber:86,columnNumber:5},this)}function Nt({className:o,orientation:t="horizontal",decorative:s=!0,...r}){return e.jsxDEV(mo,{"data-slot":"separator",decorative:s,orientation:t,className:p("bg-border shrink-0 data-[orientation=horizontal]:h-px data-[orientation=horizontal]:w-full data-[orientation=vertical]:h-full data-[orientation=vertical]:w-px",o),...r},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/components/ui/separator.tsx",lineNumber:13,columnNumber:5},this)}function Ci({room:o,trigger:t}){const[s,r]=l.useState(!1),[i,a]=l.useState({name:o.name,avatarUrl:o.avatarUrl||""}),n=Lr(o.id),c=async h=>{h.preventDefault();try{await n.mutateAsync({name:i.name.trim(),avatarUrl:i.avatarUrl.trim()||void 0}),r(!1)}catch(g){console.error("Failed to update room:",g)}},m=(h,g)=>{a(y=>({...y,[h]:g}))},u=i.name.trim().length>0,b=i.name!==o.name||i.avatarUrl!==(o.avatarUrl||"");return e.jsxDEV(ye,{open:s,onOpenChange:r,children:[e.jsxDEV(Yt,{asChild:!0,children:t||e.jsxDEV(d,{variant:"outline",className:"justify-start",children:[e.jsxDEV(We,{className:"w-4 h-4 mr-2"},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/components/chat/EditRoomDialog.tsx",lineNumber:60,columnNumber:13},this),"Edit Room Info"]},void 0,!0,{fileName:"C:/Users/thudao/coding/example-react/client/src/components/chat/EditRoomDialog.tsx",lineNumber:59,columnNumber:11},this)},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/components/chat/EditRoomDialog.tsx",lineNumber:57,columnNumber:7},this),e.jsxDEV(xe,{className:"sm:max-w-md",children:[e.jsxDEV(Ne,{children:[e.jsxDEV(fe,{className:"flex items-center gap-2",children:[e.jsxDEV(We,{className:"w-5 h-5"},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/components/chat/EditRoomDialog.tsx",lineNumber:68,columnNumber:13},this),"Edit Room Information"]},void 0,!0,{fileName:"C:/Users/thudao/coding/example-react/client/src/components/chat/EditRoomDialog.tsx",lineNumber:67,columnNumber:11},this),e.jsxDEV(pe,{children:"Update the room name and avatar URL."},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/components/chat/EditRoomDialog.tsx",lineNumber:71,columnNumber:11},this)]},void 0,!0,{fileName:"C:/Users/thudao/coding/example-react/client/src/components/chat/EditRoomDialog.tsx",lineNumber:66,columnNumber:9},this),e.jsxDEV("form",{onSubmit:c,className:"space-y-4",children:[e.jsxDEV("div",{className:"space-y-2",children:[e.jsxDEV(A,{htmlFor:"room-name",children:"Room Name"},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/components/chat/EditRoomDialog.tsx",lineNumber:78,columnNumber:13},this),e.jsxDEV(P,{id:"room-name",value:i.name,onChange:h=>m("name",h.target.value),placeholder:"Enter room name",maxLength:100,required:!0},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/components/chat/EditRoomDialog.tsx",lineNumber:79,columnNumber:13},this),e.jsxDEV("p",{className:"text-xs text-gray-500",children:[i.name.length,"/100 characters"]},void 0,!0,{fileName:"C:/Users/thudao/coding/example-react/client/src/components/chat/EditRoomDialog.tsx",lineNumber:87,columnNumber:13},this)]},void 0,!0,{fileName:"C:/Users/thudao/coding/example-react/client/src/components/chat/EditRoomDialog.tsx",lineNumber:77,columnNumber:11},this),e.jsxDEV("div",{className:"space-y-2",children:[e.jsxDEV(A,{htmlFor:"avatar-url",children:"Avatar URL (optional)"},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/components/chat/EditRoomDialog.tsx",lineNumber:93,columnNumber:13},this),e.jsxDEV(P,{id:"avatar-url",type:"url",value:i.avatarUrl,onChange:h=>m("avatarUrl",h.target.value),placeholder:"https://example.com/avatar.jpg"},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/components/chat/EditRoomDialog.tsx",lineNumber:94,columnNumber:13},this),e.jsxDEV("p",{className:"text-xs text-gray-500",children:"Provide a URL for the room's avatar image"},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/components/chat/EditRoomDialog.tsx",lineNumber:101,columnNumber:13},this)]},void 0,!0,{fileName:"C:/Users/thudao/coding/example-react/client/src/components/chat/EditRoomDialog.tsx",lineNumber:92,columnNumber:11},this),i.avatarUrl&&e.jsxDEV("div",{className:"space-y-2",children:[e.jsxDEV(A,{children:"Preview"},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/components/chat/EditRoomDialog.tsx",lineNumber:109,columnNumber:15},this),e.jsxDEV("div",{className:"flex items-center gap-3 p-3 bg-gray-50 rounded-lg",children:[e.jsxDEV("img",{src:i.avatarUrl,alt:"Room avatar preview",className:"w-10 h-10 rounded-full object-cover",onError:h=>{h.target.style.display="none"}},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/components/chat/EditRoomDialog.tsx",lineNumber:111,columnNumber:17},this),e.jsxDEV("div",{children:[e.jsxDEV("p",{className:"font-medium",children:i.name},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/components/chat/EditRoomDialog.tsx",lineNumber:120,columnNumber:19},this),e.jsxDEV("p",{className:"text-sm text-gray-500",children:"Room preview"},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/components/chat/EditRoomDialog.tsx",lineNumber:121,columnNumber:19},this)]},void 0,!0,{fileName:"C:/Users/thudao/coding/example-react/client/src/components/chat/EditRoomDialog.tsx",lineNumber:119,columnNumber:17},this)]},void 0,!0,{fileName:"C:/Users/thudao/coding/example-react/client/src/components/chat/EditRoomDialog.tsx",lineNumber:110,columnNumber:15},this)]},void 0,!0,{fileName:"C:/Users/thudao/coding/example-react/client/src/components/chat/EditRoomDialog.tsx",lineNumber:108,columnNumber:13},this),e.jsxDEV("div",{className:"flex justify-end gap-2 pt-4",children:[e.jsxDEV(d,{type:"button",variant:"outline",onClick:()=>r(!1),disabled:n.isPending,children:[e.jsxDEV(nt,{className:"w-4 h-4 mr-2"},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/components/chat/EditRoomDialog.tsx",lineNumber:134,columnNumber:15},this),"Cancel"]},void 0,!0,{fileName:"C:/Users/thudao/coding/example-react/client/src/components/chat/EditRoomDialog.tsx",lineNumber:128,columnNumber:13},this),e.jsxDEV(d,{type:"submit",disabled:!u||!b||n.isPending,children:[e.jsxDEV(Tt,{className:"w-4 h-4 mr-2"},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/components/chat/EditRoomDialog.tsx",lineNumber:141,columnNumber:15},this),n.isPending?"Saving...":"Save Changes"]},void 0,!0,{fileName:"C:/Users/thudao/coding/example-react/client/src/components/chat/EditRoomDialog.tsx",lineNumber:137,columnNumber:13},this)]},void 0,!0,{fileName:"C:/Users/thudao/coding/example-react/client/src/components/chat/EditRoomDialog.tsx",lineNumber:127,columnNumber:11},this)]},void 0,!0,{fileName:"C:/Users/thudao/coding/example-react/client/src/components/chat/EditRoomDialog.tsx",lineNumber:76,columnNumber:9},this)]},void 0,!0,{fileName:"C:/Users/thudao/coding/example-react/client/src/components/chat/EditRoomDialog.tsx",lineNumber:65,columnNumber:7},this)]},void 0,!0,{fileName:"C:/Users/thudao/coding/example-react/client/src/components/chat/EditRoomDialog.tsx",lineNumber:56,columnNumber:5},this)}function Di({roomId:o,roomName:t,trigger:s}){const[r,i]=l.useState(!1),[a,n]=l.useState(""),c=ae(),m=Pr(),u=async()=>{try{await m.mutateAsync(o),i(!1),c({to:"/chat"})}catch(h){console.error("Failed to delete room:",h)}},b=a===t;return e.jsxDEV(Te,{open:r,onOpenChange:i,children:[e.jsxDEV(ar,{asChild:!0,children:s||e.jsxDEV(d,{variant:"outline",className:"justify-start text-red-600 hover:text-red-700",children:[e.jsxDEV(ve,{className:"w-4 h-4 mr-2"},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/components/chat/DeleteRoomDialog.tsx",lineNumber:51,columnNumber:13},this),"Delete Room"]},void 0,!0,{fileName:"C:/Users/thudao/coding/example-react/client/src/components/chat/DeleteRoomDialog.tsx",lineNumber:50,columnNumber:11},this)},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/components/chat/DeleteRoomDialog.tsx",lineNumber:48,columnNumber:7},this),e.jsxDEV(Le,{className:"sm:max-w-md",children:[e.jsxDEV(Pe,{children:[e.jsxDEV(Me,{className:"flex items-center gap-2 text-red-600",children:[e.jsxDEV(Ge,{className:"w-5 h-5"},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/components/chat/DeleteRoomDialog.tsx",lineNumber:59,columnNumber:13},this),"Delete Room"]},void 0,!0,{fileName:"C:/Users/thudao/coding/example-react/client/src/components/chat/DeleteRoomDialog.tsx",lineNumber:58,columnNumber:11},this),e.jsxDEV(Ie,{className:"space-y-3",children:[e.jsxDEV("p",{children:["This action cannot be undone. This will permanently delete the room",e.jsxDEV("strong",{className:"font-semibold",children:[' "',t,'"']},void 0,!0,{fileName:"C:/Users/thudao/coding/example-react/client/src/components/chat/DeleteRoomDialog.tsx",lineNumber:65,columnNumber:15},this)," and remove all messages."]},void 0,!0,{fileName:"C:/Users/thudao/coding/example-react/client/src/components/chat/DeleteRoomDialog.tsx",lineNumber:63,columnNumber:13},this),e.jsxDEV("p",{children:"All members will lose access to this room and its message history."},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/components/chat/DeleteRoomDialog.tsx",lineNumber:67,columnNumber:13},this)]},void 0,!0,{fileName:"C:/Users/thudao/coding/example-react/client/src/components/chat/DeleteRoomDialog.tsx",lineNumber:62,columnNumber:11},this)]},void 0,!0,{fileName:"C:/Users/thudao/coding/example-react/client/src/components/chat/DeleteRoomDialog.tsx",lineNumber:57,columnNumber:9},this),e.jsxDEV("div",{className:"space-y-4 py-4",children:[e.jsxDEV("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:e.jsxDEV("div",{className:"flex items-start gap-3",children:[e.jsxDEV(Ge,{className:"w-5 h-5 text-red-500 mt-0.5 flex-shrink-0"},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/components/chat/DeleteRoomDialog.tsx",lineNumber:76,columnNumber:15},this),e.jsxDEV("div",{className:"space-y-2",children:[e.jsxDEV("p",{className:"text-sm font-medium text-red-800",children:"Warning: This action is irreversible"},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/components/chat/DeleteRoomDialog.tsx",lineNumber:78,columnNumber:17},this),e.jsxDEV("ul",{className:"text-sm text-red-700 space-y-1",children:[e.jsxDEV("li",{children:"• All messages will be permanently deleted"},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/components/chat/DeleteRoomDialog.tsx",lineNumber:82,columnNumber:19},this),e.jsxDEV("li",{children:"• All members will be removed from the room"},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/components/chat/DeleteRoomDialog.tsx",lineNumber:83,columnNumber:19},this),e.jsxDEV("li",{children:"• Room history cannot be recovered"},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/components/chat/DeleteRoomDialog.tsx",lineNumber:84,columnNumber:19},this)]},void 0,!0,{fileName:"C:/Users/thudao/coding/example-react/client/src/components/chat/DeleteRoomDialog.tsx",lineNumber:81,columnNumber:17},this)]},void 0,!0,{fileName:"C:/Users/thudao/coding/example-react/client/src/components/chat/DeleteRoomDialog.tsx",lineNumber:77,columnNumber:15},this)]},void 0,!0,{fileName:"C:/Users/thudao/coding/example-react/client/src/components/chat/DeleteRoomDialog.tsx",lineNumber:75,columnNumber:13},this)},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/components/chat/DeleteRoomDialog.tsx",lineNumber:74,columnNumber:11},this),e.jsxDEV("div",{className:"space-y-2",children:[e.jsxDEV(A,{htmlFor:"confirmation",children:["Type ",e.jsxDEV("strong",{children:t},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/components/chat/DeleteRoomDialog.tsx",lineNumber:92,columnNumber:20},this)," to confirm deletion:"]},void 0,!0,{fileName:"C:/Users/thudao/coding/example-react/client/src/components/chat/DeleteRoomDialog.tsx",lineNumber:91,columnNumber:13},this),e.jsxDEV(P,{id:"confirmation",value:a,onChange:h=>n(h.target.value),placeholder:`Type "${t}" here`,className:"font-mono"},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/components/chat/DeleteRoomDialog.tsx",lineNumber:94,columnNumber:13},this)]},void 0,!0,{fileName:"C:/Users/thudao/coding/example-react/client/src/components/chat/DeleteRoomDialog.tsx",lineNumber:90,columnNumber:11},this)]},void 0,!0,{fileName:"C:/Users/thudao/coding/example-react/client/src/components/chat/DeleteRoomDialog.tsx",lineNumber:73,columnNumber:9},this),e.jsxDEV(Ae,{children:[e.jsxDEV($e,{onClick:()=>{n(""),i(!1)},disabled:m.isPending,children:"Cancel"},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/components/chat/DeleteRoomDialog.tsx",lineNumber:105,columnNumber:11},this),e.jsxDEV(Fe,{onClick:u,disabled:!b||m.isPending,className:"bg-red-600 hover:bg-red-700 focus:ring-red-600",children:m.isPending?"Deleting...":"Delete Room"},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/components/chat/DeleteRoomDialog.tsx",lineNumber:114,columnNumber:11},this)]},void 0,!0,{fileName:"C:/Users/thudao/coding/example-react/client/src/components/chat/DeleteRoomDialog.tsx",lineNumber:104,columnNumber:9},this)]},void 0,!0,{fileName:"C:/Users/thudao/coding/example-react/client/src/components/chat/DeleteRoomDialog.tsx",lineNumber:56,columnNumber:7},this)]},void 0,!0,{fileName:"C:/Users/thudao/coding/example-react/client/src/components/chat/DeleteRoomDialog.tsx",lineNumber:47,columnNumber:5},this)}function Ei({roomId:o,roomName:t,isAuthor:s,room:r}){const[i,a]=l.useState(!1),[n,c]=l.useState(!1),[m,u]=l.useState(!1),[b,h]=l.useState(!1),{user:g}=L(),y=ae(),{data:R,isLoading:w,error:x}=Fr(o),U=Mr(),N=$r(),S=async()=>{try{await U.mutateAsync(o),c(!1),a(!1),y({to:"/chat"})}catch(V){console.error("Failed to leave room:",V)}},f=V=>new Date(V).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}),v=V=>V.isOnline?"Online":"Offline",O=async(V,je)=>{if(confirm(`Are you sure you want to remove ${je} from this room?`))try{await N.mutateAsync({roomId:o,memberId:V})}catch(we){console.error("Failed to remove member:",we)}},Z=async()=>{try{await navigator.clipboard.writeText(t),u(!0),setTimeout(()=>u(!1),2e3)}catch(V){console.error("Failed to copy room name:",V)}},re=async()=>{try{await navigator.clipboard.writeText(o),h(!0),setTimeout(()=>h(!1),2e3)}catch(V){console.error("Failed to copy room ID:",V)}};return e.jsxDEV(e.Fragment,{children:[e.jsxDEV(ye,{open:i,onOpenChange:a,children:[e.jsxDEV(Yt,{asChild:!0,children:e.jsxDEV(d,{variant:"ghost",size:"sm",children:e.jsxDEV(ht,{className:"w-4 h-4"},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/components/chat/RoomSettings.tsx",lineNumber:122,columnNumber:13},this)},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/components/chat/RoomSettings.tsx",lineNumber:121,columnNumber:11},this)},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/components/chat/RoomSettings.tsx",lineNumber:120,columnNumber:9},this),e.jsxDEV(xe,{className:"max-w-2xl max-h-[80vh] overflow-y-auto",children:[e.jsxDEV(Ne,{children:[e.jsxDEV(fe,{className:"flex items-center gap-2",children:[e.jsxDEV(ht,{className:"w-5 h-5"},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/components/chat/RoomSettings.tsx",lineNumber:128,columnNumber:15},this),"Room Settings"]},void 0,!0,{fileName:"C:/Users/thudao/coding/example-react/client/src/components/chat/RoomSettings.tsx",lineNumber:127,columnNumber:13},this),e.jsxDEV(pe,{children:["Manage ",t," settings and members"]},void 0,!0,{fileName:"C:/Users/thudao/coding/example-react/client/src/components/chat/RoomSettings.tsx",lineNumber:131,columnNumber:13},this)]},void 0,!0,{fileName:"C:/Users/thudao/coding/example-react/client/src/components/chat/RoomSettings.tsx",lineNumber:126,columnNumber:11},this),e.jsxDEV("div",{className:"space-y-6",children:[e.jsxDEV("div",{className:"space-y-2",children:[e.jsxDEV("h3",{className:"text-lg font-semibold",children:"Room Information"},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/components/chat/RoomSettings.tsx",lineNumber:139,columnNumber:15},this),e.jsxDEV("div",{className:"bg-gray-50 p-4 rounded-lg",children:e.jsxDEV("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[e.jsxDEV("div",{children:[e.jsxDEV("span",{className:"font-medium text-gray-600",children:"Name:"},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/components/chat/RoomSettings.tsx",lineNumber:143,columnNumber:21},this),e.jsxDEV("div",{className:"mt-1 flex items-center gap-2",children:[e.jsxDEV("p",{className:"flex-1",children:R?.roomInfo.name},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/components/chat/RoomSettings.tsx",lineNumber:145,columnNumber:23},this),e.jsxDEV(d,{variant:"ghost",size:"sm",className:"h-6 w-6 p-0",onClick:Z,title:"Copy room name",children:m?e.jsxDEV(Ce,{className:"w-3 h-3 text-green-600"},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/components/chat/RoomSettings.tsx",lineNumber:154,columnNumber:27},this):e.jsxDEV(Je,{className:"w-3 h-3"},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/components/chat/RoomSettings.tsx",lineNumber:156,columnNumber:27},this)},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/components/chat/RoomSettings.tsx",lineNumber:146,columnNumber:23},this)]},void 0,!0,{fileName:"C:/Users/thudao/coding/example-react/client/src/components/chat/RoomSettings.tsx",lineNumber:144,columnNumber:21},this)]},void 0,!0,{fileName:"C:/Users/thudao/coding/example-react/client/src/components/chat/RoomSettings.tsx",lineNumber:142,columnNumber:19},this),e.jsxDEV("div",{children:[e.jsxDEV("span",{className:"font-medium text-gray-600",children:"Created:"},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/components/chat/RoomSettings.tsx",lineNumber:162,columnNumber:21},this),e.jsxDEV("p",{className:"mt-1",children:R?.roomInfo.createdAt&&f(R.roomInfo.createdAt)},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/components/chat/RoomSettings.tsx",lineNumber:163,columnNumber:21},this)]},void 0,!0,{fileName:"C:/Users/thudao/coding/example-react/client/src/components/chat/RoomSettings.tsx",lineNumber:161,columnNumber:19},this),e.jsxDEV("div",{children:[e.jsxDEV("span",{className:"font-medium text-gray-600",children:"Total Members:"},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/components/chat/RoomSettings.tsx",lineNumber:170,columnNumber:21},this),e.jsxDEV("p",{className:"mt-1",children:R?.totalMembers||0},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/components/chat/RoomSettings.tsx",lineNumber:171,columnNumber:21},this)]},void 0,!0,{fileName:"C:/Users/thudao/coding/example-react/client/src/components/chat/RoomSettings.tsx",lineNumber:169,columnNumber:19},this),e.jsxDEV("div",{children:[e.jsxDEV("span",{className:"font-medium text-gray-600",children:"Online Members:"},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/components/chat/RoomSettings.tsx",lineNumber:174,columnNumber:21},this),e.jsxDEV("p",{className:"mt-1 text-green-600",children:R?.members.filter(V=>V.isOnline).length||0},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/components/chat/RoomSettings.tsx",lineNumber:175,columnNumber:21},this)]},void 0,!0,{fileName:"C:/Users/thudao/coding/example-react/client/src/components/chat/RoomSettings.tsx",lineNumber:173,columnNumber:19},this),e.jsxDEV("div",{children:[e.jsxDEV("span",{className:"font-medium text-gray-600",children:"Room ID:"},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/components/chat/RoomSettings.tsx",lineNumber:180,columnNumber:21},this),e.jsxDEV("div",{className:"mt-1 flex items-center gap-2",children:[e.jsxDEV("p",{className:"flex-1 font-mono text-xs text-gray-500 break-all",children:o},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/components/chat/RoomSettings.tsx",lineNumber:182,columnNumber:23},this),e.jsxDEV(d,{variant:"ghost",size:"sm",className:"h-6 w-6 p-0 flex-shrink-0",onClick:re,title:"Copy room ID",children:b?e.jsxDEV(Ce,{className:"w-3 h-3 text-green-600"},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/components/chat/RoomSettings.tsx",lineNumber:193,columnNumber:27},this):e.jsxDEV(Je,{className:"w-3 h-3"},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/components/chat/RoomSettings.tsx",lineNumber:195,columnNumber:27},this)},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/components/chat/RoomSettings.tsx",lineNumber:185,columnNumber:23},this)]},void 0,!0,{fileName:"C:/Users/thudao/coding/example-react/client/src/components/chat/RoomSettings.tsx",lineNumber:181,columnNumber:21},this)]},void 0,!0,{fileName:"C:/Users/thudao/coding/example-react/client/src/components/chat/RoomSettings.tsx",lineNumber:179,columnNumber:19},this)]},void 0,!0,{fileName:"C:/Users/thudao/coding/example-react/client/src/components/chat/RoomSettings.tsx",lineNumber:141,columnNumber:17},this)},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/components/chat/RoomSettings.tsx",lineNumber:140,columnNumber:15},this)]},void 0,!0,{fileName:"C:/Users/thudao/coding/example-react/client/src/components/chat/RoomSettings.tsx",lineNumber:138,columnNumber:13},this),e.jsxDEV(Nt,{},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/components/chat/RoomSettings.tsx",lineNumber:204,columnNumber:13},this),e.jsxDEV("div",{className:"space-y-4",children:[e.jsxDEV("div",{className:"flex items-center justify-between",children:e.jsxDEV("h3",{className:"text-lg font-semibold flex items-center gap-2",children:[e.jsxDEV(Se,{className:"w-5 h-5"},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/components/chat/RoomSettings.tsx",lineNumber:210,columnNumber:19},this),"Members (",R?.totalMembers||0,")"]},void 0,!0,{fileName:"C:/Users/thudao/coding/example-react/client/src/components/chat/RoomSettings.tsx",lineNumber:209,columnNumber:17},this)},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/components/chat/RoomSettings.tsx",lineNumber:208,columnNumber:15},this),w&&e.jsxDEV("div",{className:"text-center py-8 text-gray-500",children:"Loading members..."},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/components/chat/RoomSettings.tsx",lineNumber:216,columnNumber:17},this),x&&e.jsxDEV("div",{className:"text-center py-8 text-red-500",children:"Failed to load members"},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/components/chat/RoomSettings.tsx",lineNumber:222,columnNumber:17},this),R?.members&&e.jsxDEV("div",{className:"space-y-3 max-h-60 overflow-y-auto",children:R.members.map(V=>e.jsxDEV("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[e.jsxDEV("div",{className:"flex items-center gap-3",children:[e.jsxDEV(le,{className:"w-10 h-10",children:[e.jsxDEV(ce,{src:V.avatarUrl},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/components/chat/RoomSettings.tsx",lineNumber:236,columnNumber:27},this),e.jsxDEV(me,{children:V.username.charAt(0).toUpperCase()},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/components/chat/RoomSettings.tsx",lineNumber:237,columnNumber:27},this)]},void 0,!0,{fileName:"C:/Users/thudao/coding/example-react/client/src/components/chat/RoomSettings.tsx",lineNumber:235,columnNumber:25},this),e.jsxDEV("div",{className:"flex-1",children:[e.jsxDEV("div",{className:"flex items-center gap-2",children:[e.jsxDEV("span",{className:"font-medium",children:V.username},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/components/chat/RoomSettings.tsx",lineNumber:244,columnNumber:29},this),V.isAuthor&&e.jsxDEV(Ve,{variant:"secondary",className:"text-xs",children:[e.jsxDEV(uo,{className:"w-3 h-3 mr-1"},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/components/chat/RoomSettings.tsx",lineNumber:247,columnNumber:33},this),"Owner"]},void 0,!0,{fileName:"C:/Users/thudao/coding/example-react/client/src/components/chat/RoomSettings.tsx",lineNumber:246,columnNumber:31},this),V.id===g?.id&&e.jsxDEV(Ve,{variant:"outline",className:"text-xs",children:"You"},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/components/chat/RoomSettings.tsx",lineNumber:252,columnNumber:31},this)]},void 0,!0,{fileName:"C:/Users/thudao/coding/example-react/client/src/components/chat/RoomSettings.tsx",lineNumber:243,columnNumber:27},this),e.jsxDEV("div",{className:"flex items-center gap-4 text-sm text-gray-500",children:[e.jsxDEV("span",{children:V.email},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/components/chat/RoomSettings.tsx",lineNumber:258,columnNumber:29},this),e.jsxDEV("span",{children:"•"},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/components/chat/RoomSettings.tsx",lineNumber:259,columnNumber:29},this),e.jsxDEV("span",{className:V.isOnline?"text-green-600":"text-gray-400",children:v(V)},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/components/chat/RoomSettings.tsx",lineNumber:260,columnNumber:29},this),e.jsxDEV("span",{children:"•"},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/components/chat/RoomSettings.tsx",lineNumber:263,columnNumber:29},this),e.jsxDEV("span",{children:["Joined ",f(V.joinedAt)]},void 0,!0,{fileName:"C:/Users/thudao/coding/example-react/client/src/components/chat/RoomSettings.tsx",lineNumber:264,columnNumber:29},this)]},void 0,!0,{fileName:"C:/Users/thudao/coding/example-react/client/src/components/chat/RoomSettings.tsx",lineNumber:257,columnNumber:27},this)]},void 0,!0,{fileName:"C:/Users/thudao/coding/example-react/client/src/components/chat/RoomSettings.tsx",lineNumber:242,columnNumber:25},this)]},void 0,!0,{fileName:"C:/Users/thudao/coding/example-react/client/src/components/chat/RoomSettings.tsx",lineNumber:234,columnNumber:23},this),s&&V.id!==g?.id&&!V.isAuthor&&e.jsxDEV("div",{className:"flex items-center gap-1",children:e.jsxDEV(d,{variant:"ghost",size:"sm",className:"text-red-600 hover:text-red-700",onClick:()=>O(V.id,V.username),disabled:N.isPending,title:`Remove ${V.username} from room`,children:e.jsxDEV(ho,{className:"w-4 h-4"},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/components/chat/RoomSettings.tsx",lineNumber:280,columnNumber:29},this)},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/components/chat/RoomSettings.tsx",lineNumber:272,columnNumber:27},this)},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/components/chat/RoomSettings.tsx",lineNumber:271,columnNumber:25},this)]},V.id,!0,{fileName:"C:/Users/thudao/coding/example-react/client/src/components/chat/RoomSettings.tsx",lineNumber:230,columnNumber:21},this))},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/components/chat/RoomSettings.tsx",lineNumber:228,columnNumber:17},this)]},void 0,!0,{fileName:"C:/Users/thudao/coding/example-react/client/src/components/chat/RoomSettings.tsx",lineNumber:207,columnNumber:13},this),e.jsxDEV(Nt,{},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/components/chat/RoomSettings.tsx",lineNumber:290,columnNumber:13},this),e.jsxDEV("div",{className:"space-y-4",children:[e.jsxDEV("h3",{className:"text-lg font-semibold",children:"Actions"},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/components/chat/RoomSettings.tsx",lineNumber:294,columnNumber:15},this),e.jsxDEV("div",{className:"flex flex-col gap-2",children:[s&&r&&e.jsxDEV(e.Fragment,{children:[e.jsxDEV(Ci,{room:r},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/components/chat/RoomSettings.tsx",lineNumber:299,columnNumber:21},this),e.jsxDEV(Di,{roomId:o,roomName:t},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/components/chat/RoomSettings.tsx",lineNumber:300,columnNumber:21},this)]},void 0,!0,{fileName:"C:/Users/thudao/coding/example-react/client/src/components/chat/RoomSettings.tsx",lineNumber:298,columnNumber:19},this),!s&&e.jsxDEV(d,{variant:"outline",className:"justify-start text-red-600 hover:text-red-700",onClick:()=>c(!0),disabled:U.isPending,children:[e.jsxDEV(it,{className:"w-4 h-4 mr-2"},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/components/chat/RoomSettings.tsx",lineNumber:311,columnNumber:21},this),U.isPending?"Leaving...":"Leave Room"]},void 0,!0,{fileName:"C:/Users/thudao/coding/example-react/client/src/components/chat/RoomSettings.tsx",lineNumber:305,columnNumber:19},this)]},void 0,!0,{fileName:"C:/Users/thudao/coding/example-react/client/src/components/chat/RoomSettings.tsx",lineNumber:296,columnNumber:15},this)]},void 0,!0,{fileName:"C:/Users/thudao/coding/example-react/client/src/components/chat/RoomSettings.tsx",lineNumber:293,columnNumber:13},this)]},void 0,!0,{fileName:"C:/Users/thudao/coding/example-react/client/src/components/chat/RoomSettings.tsx",lineNumber:136,columnNumber:11},this)]},void 0,!0,{fileName:"C:/Users/thudao/coding/example-react/client/src/components/chat/RoomSettings.tsx",lineNumber:125,columnNumber:9},this)]},void 0,!0,{fileName:"C:/Users/thudao/coding/example-react/client/src/components/chat/RoomSettings.tsx",lineNumber:119,columnNumber:7},this),e.jsxDEV(Te,{open:n,onOpenChange:c,children:e.jsxDEV(Le,{children:[e.jsxDEV(Pe,{children:[e.jsxDEV(Me,{className:"flex items-center gap-2",children:[e.jsxDEV(Ge,{className:"w-5 h-5 text-orange-500"},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/components/chat/RoomSettings.tsx",lineNumber:326,columnNumber:15},this),"Leave Room"]},void 0,!0,{fileName:"C:/Users/thudao/coding/example-react/client/src/components/chat/RoomSettings.tsx",lineNumber:325,columnNumber:13},this),e.jsxDEV(Ie,{children:['Are you sure you want to leave "',t,`"? You won't be able to see new messages unless someone invites you back.`]},void 0,!0,{fileName:"C:/Users/thudao/coding/example-react/client/src/components/chat/RoomSettings.tsx",lineNumber:329,columnNumber:13},this)]},void 0,!0,{fileName:"C:/Users/thudao/coding/example-react/client/src/components/chat/RoomSettings.tsx",lineNumber:324,columnNumber:11},this),e.jsxDEV(Ae,{children:[e.jsxDEV($e,{children:"Cancel"},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/components/chat/RoomSettings.tsx",lineNumber:335,columnNumber:13},this),e.jsxDEV(Fe,{onClick:S,className:"bg-red-600 hover:bg-red-700",disabled:U.isPending,children:U.isPending?"Leaving...":"Leave Room"},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/components/chat/RoomSettings.tsx",lineNumber:336,columnNumber:13},this)]},void 0,!0,{fileName:"C:/Users/thudao/coding/example-react/client/src/components/chat/RoomSettings.tsx",lineNumber:334,columnNumber:11},this)]},void 0,!0,{fileName:"C:/Users/thudao/coding/example-react/client/src/components/chat/RoomSettings.tsx",lineNumber:323,columnNumber:9},this)},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/components/chat/RoomSettings.tsx",lineNumber:322,columnNumber:7},this)]},void 0,!0,{fileName:"C:/Users/thudao/coding/example-react/client/src/components/chat/RoomSettings.tsx",lineNumber:118,columnNumber:5},this)}const os=l.createContext({connected:!1,socketId:null,connectionError:null}),rs=()=>{const o=l.useContext(os);if(!o)throw new Error("useSocket must be used within a SocketProvider");return o};function Ui({children:o}){const{isAuthenticated:t,tokens:s}=L(),[r,i]=l.useState(T.connected),[a,n]=l.useState(T.socketId),[c,m]=l.useState(null);l.useEffect(()=>{t&&s?.accessToken?(console.log("SocketProvider: User authenticated, connecting socket..."),(async()=>{try{m(null),await T.connect()}catch(h){console.error("SocketProvider: Failed to connect socket:",h),m(h instanceof Error?h.message:"Connection failed")}})()):(console.log("SocketProvider: User not authenticated, disconnecting socket..."),T.disconnect())},[t,s?.accessToken]),l.useEffect(()=>T.onConnectionChange(h=>{console.log("SocketProvider: Connection state changed:",h),i(h),n(T.socketId),h&&m(null)}),[]),l.useEffect(()=>()=>{console.log("SocketProvider: Cleaning up socket connection"),T.disconnect()},[]);const u={connected:r,socketId:a,connectionError:c};return e.jsxDEV(os.Provider,{value:u,children:o},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/providers/SocketProvider.tsx",lineNumber:87,columnNumber:5},this)}const yi=Re("relative w-full rounded-lg border px-4 py-3 text-sm grid has-[>svg]:grid-cols-[calc(var(--spacing)*4)_1fr] grid-cols-[0_1fr] has-[>svg]:gap-x-3 gap-y-0.5 items-start [&>svg]:size-4 [&>svg]:translate-y-0.5 [&>svg]:text-current",{variants:{variant:{default:"bg-card text-card-foreground",destructive:"text-destructive bg-card [&>svg]:text-current *:data-[slot=alert-description]:text-destructive/90"}},defaultVariants:{variant:"default"}});function ft({className:o,variant:t,...s}){return e.jsxDEV("div",{"data-slot":"alert",role:"alert",className:p(yi({variant:t}),o),...s},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/components/ui/alert.tsx",lineNumber:28,columnNumber:5},this)}function pt({className:o,...t}){return e.jsxDEV("div",{"data-slot":"alert-description",className:p("text-muted-foreground col-start-2 grid justify-items-start gap-1 text-sm [&_p]:leading-relaxed",o),...t},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/components/ui/alert.tsx",lineNumber:55,columnNumber:5},this)}function ji(){const{connected:o,connectionError:t}=rs();return o&&!t?null:e.jsxDEV("div",{className:"fixed top-4 right-4 z-50 max-w-sm",children:t?e.jsxDEV(ft,{variant:"destructive",children:[e.jsxDEV(Kt,{className:"h-4 w-4"},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/components/ConnectionStatus.tsx",lineNumber:18,columnNumber:11},this),e.jsxDEV(pt,{children:["Connection Error: ",t]},void 0,!0,{fileName:"C:/Users/thudao/coding/example-react/client/src/components/ConnectionStatus.tsx",lineNumber:19,columnNumber:11},this)]},void 0,!0,{fileName:"C:/Users/thudao/coding/example-react/client/src/components/ConnectionStatus.tsx",lineNumber:17,columnNumber:9},this):o?null:e.jsxDEV(ft,{variant:"default",className:"border-yellow-200 bg-yellow-50",children:[e.jsxDEV(Qt,{className:"h-4 w-4 text-yellow-600"},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/components/ConnectionStatus.tsx",lineNumber:25,columnNumber:11},this),e.jsxDEV(pt,{className:"text-yellow-800",children:"Connecting to chat server..."},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/components/ConnectionStatus.tsx",lineNumber:26,columnNumber:11},this)]},void 0,!0,{fileName:"C:/Users/thudao/coding/example-react/client/src/components/ConnectionStatus.tsx",lineNumber:24,columnNumber:9},this)},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/components/ConnectionStatus.tsx",lineNumber:15,columnNumber:5},this)}function wi(){const{connected:o,connectionError:t}=rs();return o&&!t?e.jsxDEV("div",{className:"flex items-center text-green-600 text-sm",children:[e.jsxDEV(xo,{className:"h-3 w-3 mr-1"},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/components/ConnectionStatus.tsx",lineNumber:42,columnNumber:9},this),e.jsxDEV("span",{children:"Connected"},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/components/ConnectionStatus.tsx",lineNumber:43,columnNumber:9},this)]},void 0,!0,{fileName:"C:/Users/thudao/coding/example-react/client/src/components/ConnectionStatus.tsx",lineNumber:41,columnNumber:7},this):t?e.jsxDEV("div",{className:"flex items-center text-red-600 text-sm",children:[e.jsxDEV(Kt,{className:"h-3 w-3 mr-1"},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/components/ConnectionStatus.tsx",lineNumber:51,columnNumber:9},this),e.jsxDEV("span",{children:"Connection Error"},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/components/ConnectionStatus.tsx",lineNumber:52,columnNumber:9},this)]},void 0,!0,{fileName:"C:/Users/thudao/coding/example-react/client/src/components/ConnectionStatus.tsx",lineNumber:50,columnNumber:7},this):e.jsxDEV("div",{className:"flex items-center text-yellow-600 text-sm",children:[e.jsxDEV(Qt,{className:"h-3 w-3 mr-1"},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/components/ConnectionStatus.tsx",lineNumber:59,columnNumber:7},this),e.jsxDEV("span",{children:"Connecting..."},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/components/ConnectionStatus.tsx",lineNumber:60,columnNumber:7},this)]},void 0,!0,{fileName:"C:/Users/thudao/coding/example-react/client/src/components/ConnectionStatus.tsx",lineNumber:58,columnNumber:5},this)}function is({roomId:o}){const[t,s]=l.useState(!1),{setCurrentRoom:r,joinRoom:i,messagesByRoom:a}=_e(),{connected:n}=Xr(),{user:c}=L(),{data:m,isLoading:u,error:b}=Sr(o),{data:h,isLoading:g,hasNextPage:y,fetchNextPage:R,isFetchingNextPage:w}=Or(o);qr(o),Br(o),Kr(),Hr(o),Wr(o),Yr(),Gr();const x=a[o]||[],U=h?.pages.flatMap(f=>f.messages)||[],N=new Map;U.forEach(f=>{N.set(f.id,f)}),x.forEach(f=>{N.set(f.id,f)});const S=Array.from(N.values()).sort((f,v)=>new Date(f.createdAt).getTime()-new Date(v.createdAt).getTime());return l.useEffect(()=>(r(o),n&&i(o),()=>{r(null)}),[o,n,r,i]),b?e.jsxDEV("div",{className:"h-full flex items-center justify-center",children:e.jsxDEV("div",{className:"text-center",children:[e.jsxDEV("p",{className:"text-red-600 mb-2",children:"Failed to load room"},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/components/chat/ChatRoom.tsx",lineNumber:103,columnNumber:11},this),e.jsxDEV(d,{variant:"outline",onClick:()=>window.location.reload(),children:"Retry"},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/components/chat/ChatRoom.tsx",lineNumber:104,columnNumber:11},this)]},void 0,!0,{fileName:"C:/Users/thudao/coding/example-react/client/src/components/chat/ChatRoom.tsx",lineNumber:102,columnNumber:9},this)},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/components/chat/ChatRoom.tsx",lineNumber:101,columnNumber:7},this):u?e.jsxDEV("div",{className:"h-full flex items-center justify-center",children:e.jsxDEV("div",{className:"text-gray-500",children:"Loading room..."},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/components/chat/ChatRoom.tsx",lineNumber:115,columnNumber:9},this)},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/components/chat/ChatRoom.tsx",lineNumber:114,columnNumber:7},this):m?e.jsxDEV("div",{className:"h-full flex flex-col bg-white",children:[e.jsxDEV("div",{className:"sticky top-0 z-10 flex items-center justify-between p-4 border-b bg-gray-50 shadow-sm",children:[e.jsxDEV("div",{className:"flex items-center gap-3",children:[e.jsxDEV(le,{className:"w-10 h-10",children:[e.jsxDEV(ce,{src:m.avatarUrl},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/components/chat/ChatRoom.tsx",lineNumber:134,columnNumber:13},this),e.jsxDEV(me,{children:m.name.charAt(0).toUpperCase()},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/components/chat/ChatRoom.tsx",lineNumber:135,columnNumber:13},this)]},void 0,!0,{fileName:"C:/Users/thudao/coding/example-react/client/src/components/chat/ChatRoom.tsx",lineNumber:133,columnNumber:11},this),e.jsxDEV("div",{children:[e.jsxDEV("h1",{className:"font-semibold text-gray-900",children:m.name},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/components/chat/ChatRoom.tsx",lineNumber:141,columnNumber:13},this),e.jsxDEV("div",{className:"flex items-center gap-2 text-sm text-gray-500",children:[e.jsxDEV(Se,{className:"w-4 h-4"},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/components/chat/ChatRoom.tsx",lineNumber:143,columnNumber:15},this),e.jsxDEV("span",{children:[m.participants.length," members"]},void 0,!0,{fileName:"C:/Users/thudao/coding/example-react/client/src/components/chat/ChatRoom.tsx",lineNumber:144,columnNumber:15},this),e.jsxDEV("span",{children:"•"},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/components/chat/ChatRoom.tsx",lineNumber:145,columnNumber:15},this),e.jsxDEV(wi,{},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/components/chat/ChatRoom.tsx",lineNumber:146,columnNumber:15},this)]},void 0,!0,{fileName:"C:/Users/thudao/coding/example-react/client/src/components/chat/ChatRoom.tsx",lineNumber:142,columnNumber:13},this)]},void 0,!0,{fileName:"C:/Users/thudao/coding/example-react/client/src/components/chat/ChatRoom.tsx",lineNumber:140,columnNumber:11},this)]},void 0,!0,{fileName:"C:/Users/thudao/coding/example-react/client/src/components/chat/ChatRoom.tsx",lineNumber:132,columnNumber:9},this),e.jsxDEV("div",{className:"flex items-center gap-2",children:[c&&m.authorId===c.id&&e.jsxDEV(d,{size:"sm",variant:"ghost",className:"h-8 w-8 p-0",onClick:()=>s(!0),title:"Invite users to this room",children:e.jsxDEV(Ye,{className:"w-4 h-4"},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/components/chat/ChatRoom.tsx",lineNumber:161,columnNumber:15},this)},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/components/chat/ChatRoom.tsx",lineNumber:154,columnNumber:13},this),e.jsxDEV(d,{size:"sm",variant:"ghost",className:"h-8 w-8 p-0",children:e.jsxDEV(No,{className:"w-4 h-4"},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/components/chat/ChatRoom.tsx",lineNumber:166,columnNumber:13},this)},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/components/chat/ChatRoom.tsx",lineNumber:165,columnNumber:11},this),e.jsxDEV(d,{size:"sm",variant:"ghost",className:"h-8 w-8 p-0",children:e.jsxDEV(fo,{className:"w-4 h-4"},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/components/chat/ChatRoom.tsx",lineNumber:169,columnNumber:13},this)},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/components/chat/ChatRoom.tsx",lineNumber:168,columnNumber:11},this),e.jsxDEV(Ei,{roomId:o,roomName:m.name,isAuthor:c?.id===m.authorId,room:m},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/components/chat/ChatRoom.tsx",lineNumber:171,columnNumber:11},this)]},void 0,!0,{fileName:"C:/Users/thudao/coding/example-react/client/src/components/chat/ChatRoom.tsx",lineNumber:151,columnNumber:9},this)]},void 0,!0,{fileName:"C:/Users/thudao/coding/example-react/client/src/components/chat/ChatRoom.tsx",lineNumber:131,columnNumber:7},this),!n&&e.jsxDEV("div",{className:"sticky top-[73px] z-10 bg-yellow-50 border-b border-yellow-200 px-4 py-2",children:e.jsxDEV("div",{className:"flex items-center gap-2 text-sm text-yellow-800",children:[e.jsxDEV("div",{className:"w-2 h-2 bg-yellow-500 rounded-full animate-pulse"},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/components/chat/ChatRoom.tsx",lineNumber:184,columnNumber:13},this),e.jsxDEV("span",{children:"Reconnecting to chat..."},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/components/chat/ChatRoom.tsx",lineNumber:185,columnNumber:13},this)]},void 0,!0,{fileName:"C:/Users/thudao/coding/example-react/client/src/components/chat/ChatRoom.tsx",lineNumber:183,columnNumber:11},this)},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/components/chat/ChatRoom.tsx",lineNumber:182,columnNumber:9},this),e.jsxDEV(hi,{roomId:o,messages:S,isLoading:g||w,hasNextPage:y,onLoadMore:()=>R()},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/components/chat/ChatRoom.tsx",lineNumber:191,columnNumber:7},this),e.jsxDEV(Ni,{roomId:o,disabled:!n,placeholder:n?"Type a message...":"Connecting to chat..."},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/components/chat/ChatRoom.tsx",lineNumber:200,columnNumber:7},this),e.jsxDEV(vi,{open:t,onOpenChange:s,roomId:o,roomName:m.name},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/components/chat/ChatRoom.tsx",lineNumber:211,columnNumber:7},this)]},void 0,!0,{fileName:"C:/Users/thudao/coding/example-react/client/src/components/chat/ChatRoom.tsx",lineNumber:129,columnNumber:5},this):e.jsxDEV("div",{className:"h-full flex items-center justify-center",children:e.jsxDEV("div",{className:"text-gray-500",children:"Room not found"},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/components/chat/ChatRoom.tsx",lineNumber:123,columnNumber:9},this)},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/components/chat/ChatRoom.tsx",lineNumber:122,columnNumber:7},this)}const Vi=G("/chat")({beforeLoad:({location:o})=>{if(!L.getState().isAuthenticated)throw ke({to:"/login",search:{redirect:o.href}})},component:Ri});function Ri(){const[o,t]=l.useState(null),s=ae(),r=i=>{t(i),s({to:"/room/$id",params:{id:i}}).catch(()=>{t(i)})};return e.jsxDEV("div",{className:"min-h-screen bg-gray-50",children:[e.jsxDEV(ue,{title:"Chat"},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/routes/chat.tsx",lineNumber:44,columnNumber:7},this),e.jsxDEV("div",{className:"h-[calc(100vh-4rem)] flex",children:[e.jsxDEV("div",{className:"w-80 flex-shrink-0",children:e.jsxDEV(oi,{onRoomSelect:r,selectedRoomId:o||void 0},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/routes/chat.tsx",lineNumber:48,columnNumber:11},this)},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/routes/chat.tsx",lineNumber:47,columnNumber:9},this),e.jsxDEV("div",{className:"flex-1",children:o?e.jsxDEV(is,{roomId:o},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/routes/chat.tsx",lineNumber:53,columnNumber:29},this):e.jsxDEV("div",{className:"h-full flex items-center justify-center bg-white",children:e.jsxDEV("div",{className:"text-center text-gray-500",children:[e.jsxDEV("div",{className:"w-16 h-16 mx-auto mb-4 bg-gray-100 rounded-full flex items-center justify-center",children:e.jsxDEV("svg",{className:"w-8 h-8",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsxDEV("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/routes/chat.tsx",lineNumber:57,columnNumber:21},this)},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/routes/chat.tsx",lineNumber:56,columnNumber:19},this)},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/routes/chat.tsx",lineNumber:55,columnNumber:17},this),e.jsxDEV("h3",{className:"text-lg font-medium mb-2",children:"Select a room to start chatting"},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/routes/chat.tsx",lineNumber:60,columnNumber:17},this),e.jsxDEV("p",{className:"text-sm",children:"Choose a room from the sidebar to begin your conversation"},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/routes/chat.tsx",lineNumber:61,columnNumber:17},this)]},void 0,!0,{fileName:"C:/Users/thudao/coding/example-react/client/src/routes/chat.tsx",lineNumber:54,columnNumber:15},this)},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/routes/chat.tsx",lineNumber:53,columnNumber:68},this)},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/routes/chat.tsx",lineNumber:52,columnNumber:9},this)]},void 0,!0,{fileName:"C:/Users/thudao/coding/example-react/client/src/routes/chat.tsx",lineNumber:45,columnNumber:7},this)]},void 0,!0,{fileName:"C:/Users/thudao/coding/example-react/client/src/routes/chat.tsx",lineNumber:43,columnNumber:10},this)}const ki=G("/404")({component:Si});function Si(){return e.jsxDEV("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 relative",children:[e.jsxDEV(D,{to:"/",className:"absolute top-4 left-4",children:e.jsxDEV(d,{variant:"ghost",size:"sm",children:[e.jsxDEV(ne,{className:"w-4 h-4 mr-2"},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/routes/404.tsx",lineNumber:12,columnNumber:11},this),"Back to Home"]},void 0,!0,{fileName:"C:/Users/thudao/coding/example-react/client/src/routes/404.tsx",lineNumber:11,columnNumber:9},this)},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/routes/404.tsx",lineNumber:10,columnNumber:7},this),e.jsxDEV("div",{className:"max-w-md mx-auto text-center",children:[e.jsxDEV("div",{className:"mb-8",children:[e.jsxDEV("div",{className:"text-8xl mb-4",children:"🔍"},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/routes/404.tsx",lineNumber:19,columnNumber:11},this),e.jsxDEV("h1",{className:"text-6xl font-bold text-gray-900 mb-4",children:"404"},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/routes/404.tsx",lineNumber:20,columnNumber:11},this),e.jsxDEV("h2",{className:"text-2xl font-semibold text-gray-700 mb-2",children:"Page Not Found"},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/routes/404.tsx",lineNumber:21,columnNumber:11},this),e.jsxDEV("p",{className:"text-gray-600 mb-8",children:"Oops! The page you're looking for doesn't exist. It might have been moved, deleted, or you entered the wrong URL."},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/routes/404.tsx",lineNumber:22,columnNumber:11},this)]},void 0,!0,{fileName:"C:/Users/thudao/coding/example-react/client/src/routes/404.tsx",lineNumber:18,columnNumber:9},this),e.jsxDEV("div",{className:"space-y-4",children:[e.jsxDEV(D,{to:"/",children:e.jsxDEV(d,{className:"w-full",children:[e.jsxDEV(Et,{className:"w-4 h-4 mr-2"},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/routes/404.tsx",lineNumber:30,columnNumber:15},this),"Go to Homepage"]},void 0,!0,{fileName:"C:/Users/thudao/coding/example-react/client/src/routes/404.tsx",lineNumber:29,columnNumber:13},this)},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/routes/404.tsx",lineNumber:28,columnNumber:11},this),e.jsxDEV("div",{className:"flex space-x-2",children:[e.jsxDEV(D,{to:"/todo",className:"flex-1",children:e.jsxDEV(d,{variant:"outline",className:"w-full",children:"Todo App"},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/routes/404.tsx",lineNumber:36,columnNumber:15},this)},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/routes/404.tsx",lineNumber:35,columnNumber:13},this),e.jsxDEV(D,{to:"/chat",className:"flex-1",children:e.jsxDEV(d,{variant:"outline",className:"w-full",children:"Chat Rooms"},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/routes/404.tsx",lineNumber:41,columnNumber:15},this)},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/routes/404.tsx",lineNumber:40,columnNumber:13},this)]},void 0,!0,{fileName:"C:/Users/thudao/coding/example-react/client/src/routes/404.tsx",lineNumber:34,columnNumber:11},this)]},void 0,!0,{fileName:"C:/Users/thudao/coding/example-react/client/src/routes/404.tsx",lineNumber:27,columnNumber:9},this)]},void 0,!0,{fileName:"C:/Users/thudao/coding/example-react/client/src/routes/404.tsx",lineNumber:17,columnNumber:7},this)]},void 0,!0,{fileName:"C:/Users/thudao/coding/example-react/client/src/routes/404.tsx",lineNumber:8,columnNumber:10},this)}const Ti=G("/")({component:Li});function Li(){const{isAuthenticated:o}=L(),t=[{icon:e.jsxDEV(po,{className:"w-8 h-8"},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/routes/index.tsx",lineNumber:17,columnNumber:11},this),title:"Modern Tech Stack",description:"Built with React, TypeScript, TanStack Router, and TailwindCSS",color:"bg-blue-500"},{icon:e.jsxDEV(go,{className:"w-8 h-8"},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/routes/index.tsx",lineNumber:22,columnNumber:11},this),title:"Full Stack Ready",description:"Complete MERN stack with MongoDB, Express, React, and Node.js",color:"bg-green-500"},{icon:e.jsxDEV(bo,{className:"w-8 h-8"},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/routes/index.tsx",lineNumber:27,columnNumber:11},this),title:"High Performance",description:"Optimized for speed with modern bundling and state management",color:"bg-yellow-500"},{icon:e.jsxDEV(vo,{className:"w-8 h-8"},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/routes/index.tsx",lineNumber:32,columnNumber:11},this),title:"Responsive Design",description:"Beautiful UI that works perfectly on all devices",color:"bg-purple-500"}],s=[{title:"Todo Manager",description:"Organize your tasks efficiently with our intuitive todo application",icon:e.jsxDEV(Co,{className:"w-6 h-6"},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/routes/index.tsx",lineNumber:40,columnNumber:11},this),link:"/todo",color:"from-blue-500 to-blue-600"},{title:"Chat Rooms",description:"Connect with others in real-time chat rooms",icon:e.jsxDEV(Do,{className:"w-6 h-6"},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/routes/index.tsx",lineNumber:46,columnNumber:11},this),link:"/chat",color:"from-green-500 to-green-600"},{title:"User Profile",description:"Manage your account settings and preferences",icon:e.jsxDEV(Se,{className:"w-6 h-6"},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/routes/index.tsx",lineNumber:52,columnNumber:11},this),link:"/profile",color:"from-purple-500 to-purple-600"}];return e.jsxDEV("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 to-gray-100",children:[e.jsxDEV(ue,{transparent:!0},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/routes/index.tsx",lineNumber:57,columnNumber:7},this),e.jsxDEV("div",{className:"relative overflow-hidden",children:e.jsxDEV("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-24",children:e.jsxDEV("div",{className:"text-center",children:[e.jsxDEV(Ve,{variant:"secondary",className:"mb-4",children:"🚀 Modern Full Stack Application"},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/routes/index.tsx",lineNumber:63,columnNumber:13},this),e.jsxDEV("h1",{className:"text-4xl md:text-6xl font-bold text-gray-900 mb-6",children:["Welcome to"," ",e.jsxDEV("span",{className:"bg-gradient-to-r from-blue-600 to-purple-600 bg-clip-text text-transparent",children:"MERN Stack"},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/routes/index.tsx",lineNumber:68,columnNumber:15},this)]},void 0,!0,{fileName:"C:/Users/thudao/coding/example-react/client/src/routes/index.tsx",lineNumber:66,columnNumber:13},this),e.jsxDEV("p",{className:"text-xl text-gray-600 mb-8 max-w-3xl mx-auto",children:"A modern, full-featured web application built with the latest technologies. Experience the power of React, TanStack Router, shadcn/ui, and TailwindCSS."},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/routes/index.tsx",lineNumber:72,columnNumber:13},this),e.jsxDEV("div",{className:"flex flex-col sm:flex-row gap-4 justify-center",children:o?e.jsxDEV(e.Fragment,{children:[e.jsxDEV(D,{to:"/todo",children:e.jsxDEV(d,{size:"lg",className:"w-full sm:w-auto",children:["Try Todo App",e.jsxDEV(Qe,{className:"ml-2 w-4 h-4"},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/routes/index.tsx",lineNumber:81,columnNumber:23},this)]},void 0,!0,{fileName:"C:/Users/thudao/coding/example-react/client/src/routes/index.tsx",lineNumber:79,columnNumber:21},this)},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/routes/index.tsx",lineNumber:78,columnNumber:19},this),e.jsxDEV(D,{to:"/chat",children:e.jsxDEV(d,{variant:"outline",size:"lg",className:"w-full sm:w-auto",children:"Join Chat Rooms"},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/routes/index.tsx",lineNumber:85,columnNumber:21},this)},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/routes/index.tsx",lineNumber:84,columnNumber:19},this)]},void 0,!0,{fileName:"C:/Users/thudao/coding/example-react/client/src/routes/index.tsx",lineNumber:77,columnNumber:34},this):e.jsxDEV(e.Fragment,{children:[e.jsxDEV(D,{search:{redirect:"/todo"},to:"/login",children:e.jsxDEV(d,{size:"lg",className:"w-full sm:w-auto",children:["Sign In to Get Started",e.jsxDEV(Qe,{className:"ml-2 w-4 h-4"},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/routes/index.tsx",lineNumber:95,columnNumber:23},this)]},void 0,!0,{fileName:"C:/Users/thudao/coding/example-react/client/src/routes/index.tsx",lineNumber:93,columnNumber:21},this)},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/routes/index.tsx",lineNumber:90,columnNumber:19},this),e.jsxDEV(D,{to:"/register",children:e.jsxDEV(d,{variant:"outline",size:"lg",className:"w-full sm:w-auto",children:"Create Account"},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/routes/index.tsx",lineNumber:99,columnNumber:21},this)},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/routes/index.tsx",lineNumber:98,columnNumber:19},this)]},void 0,!0,{fileName:"C:/Users/thudao/coding/example-react/client/src/routes/index.tsx",lineNumber:89,columnNumber:23},this)},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/routes/index.tsx",lineNumber:76,columnNumber:13},this),!o&&e.jsxDEV("div",{className:"mt-6 p-4 bg-blue-50 border border-blue-200 rounded-lg max-w-md mx-auto",children:[e.jsxDEV("div",{className:"flex items-center gap-2 text-blue-800",children:[e.jsxDEV(He,{className:"w-4 h-4"},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/routes/index.tsx",lineNumber:108,columnNumber:19},this),e.jsxDEV("span",{className:"text-sm font-medium",children:"Authentication Required"},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/routes/index.tsx",lineNumber:109,columnNumber:19},this)]},void 0,!0,{fileName:"C:/Users/thudao/coding/example-react/client/src/routes/index.tsx",lineNumber:107,columnNumber:17},this),e.jsxDEV("p",{className:"text-sm text-blue-700 mt-1",children:"Sign in to access Todo Manager, Chat Rooms, and Profile features."},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/routes/index.tsx",lineNumber:111,columnNumber:17},this)]},void 0,!0,{fileName:"C:/Users/thudao/coding/example-react/client/src/routes/index.tsx",lineNumber:106,columnNumber:34},this)]},void 0,!0,{fileName:"C:/Users/thudao/coding/example-react/client/src/routes/index.tsx",lineNumber:62,columnNumber:11},this)},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/routes/index.tsx",lineNumber:61,columnNumber:9},this)},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/routes/index.tsx",lineNumber:60,columnNumber:7},this),e.jsxDEV("div",{className:"py-24 bg-white",children:e.jsxDEV("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[e.jsxDEV("div",{className:"text-center mb-16",children:[e.jsxDEV("h2",{className:"text-3xl font-bold text-gray-900 mb-4",children:"Built with Modern Technologies"},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/routes/index.tsx",lineNumber:123,columnNumber:13},this),e.jsxDEV("p",{className:"text-lg text-gray-600 max-w-2xl mx-auto",children:"Our application leverages the latest and greatest technologies to provide you with the best possible experience."},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/routes/index.tsx",lineNumber:126,columnNumber:13},this)]},void 0,!0,{fileName:"C:/Users/thudao/coding/example-react/client/src/routes/index.tsx",lineNumber:122,columnNumber:11},this),e.jsxDEV("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-8",children:t.map((r,i)=>e.jsxDEV(K,{className:"text-center hover:shadow-lg transition-shadow",children:[e.jsxDEV(H,{children:[e.jsxDEV("div",{className:`w-16 h-16 ${r.color} rounded-lg flex items-center justify-center text-white mx-auto mb-4`,children:r.icon},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/routes/index.tsx",lineNumber:134,columnNumber:19},this),e.jsxDEV(J,{className:"text-lg",children:r.title},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/routes/index.tsx",lineNumber:137,columnNumber:19},this)]},void 0,!0,{fileName:"C:/Users/thudao/coding/example-react/client/src/routes/index.tsx",lineNumber:133,columnNumber:17},this),e.jsxDEV(Q,{children:e.jsxDEV(ie,{children:r.description},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/routes/index.tsx",lineNumber:140,columnNumber:19},this)},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/routes/index.tsx",lineNumber:139,columnNumber:17},this)]},i,!0,{fileName:"C:/Users/thudao/coding/example-react/client/src/routes/index.tsx",lineNumber:132,columnNumber:47},this))},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/routes/index.tsx",lineNumber:131,columnNumber:11},this)]},void 0,!0,{fileName:"C:/Users/thudao/coding/example-react/client/src/routes/index.tsx",lineNumber:121,columnNumber:9},this)},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/routes/index.tsx",lineNumber:120,columnNumber:7},this),e.jsxDEV("div",{className:"py-24 bg-gray-50",children:e.jsxDEV("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[e.jsxDEV("div",{className:"text-center mb-16",children:[e.jsxDEV("h2",{className:"text-3xl font-bold text-gray-900 mb-4",children:"Explore Our Applications"},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/routes/index.tsx",lineNumber:151,columnNumber:13},this),e.jsxDEV("p",{className:"text-lg text-gray-600 max-w-2xl mx-auto",children:"Discover the powerful applications we've built to showcase the capabilities of our modern tech stack."},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/routes/index.tsx",lineNumber:154,columnNumber:13},this)]},void 0,!0,{fileName:"C:/Users/thudao/coding/example-react/client/src/routes/index.tsx",lineNumber:150,columnNumber:11},this),e.jsxDEV("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8",children:s.map((r,i)=>e.jsxDEV(K,{className:"hover:shadow-lg transition-all duration-300 hover:-translate-y-1",children:[e.jsxDEV(H,{children:[e.jsxDEV("div",{className:`w-12 h-12 bg-gradient-to-r ${r.color} rounded-lg flex items-center justify-center text-white mb-4`,children:r.icon},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/routes/index.tsx",lineNumber:162,columnNumber:19},this),e.jsxDEV(J,{className:"text-xl",children:r.title},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/routes/index.tsx",lineNumber:165,columnNumber:19},this),e.jsxDEV(ie,{children:r.description},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/routes/index.tsx",lineNumber:166,columnNumber:19},this)]},void 0,!0,{fileName:"C:/Users/thudao/coding/example-react/client/src/routes/index.tsx",lineNumber:161,columnNumber:17},this),e.jsxDEV(Q,{children:o?e.jsxDEV(D,{to:r.link,children:e.jsxDEV(d,{className:"w-full",children:["Try it now",e.jsxDEV(Qe,{className:"ml-2 w-4 h-4"},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/routes/index.tsx",lineNumber:172,columnNumber:25},this)]},void 0,!0,{fileName:"C:/Users/thudao/coding/example-react/client/src/routes/index.tsx",lineNumber:170,columnNumber:23},this)},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/routes/index.tsx",lineNumber:169,columnNumber:38},this):e.jsxDEV(D,{search:{redirect:r.link},to:"/login",children:e.jsxDEV(d,{variant:"outline",className:"w-full",children:[e.jsxDEV(He,{className:"w-4 h-4 mr-2"},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/routes/index.tsx",lineNumber:178,columnNumber:25},this),"Sign in to access"]},void 0,!0,{fileName:"C:/Users/thudao/coding/example-react/client/src/routes/index.tsx",lineNumber:177,columnNumber:23},this)},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/routes/index.tsx",lineNumber:174,columnNumber:31},this)},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/routes/index.tsx",lineNumber:168,columnNumber:17},this)]},i,!0,{fileName:"C:/Users/thudao/coding/example-react/client/src/routes/index.tsx",lineNumber:160,columnNumber:39},this))},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/routes/index.tsx",lineNumber:159,columnNumber:11},this)]},void 0,!0,{fileName:"C:/Users/thudao/coding/example-react/client/src/routes/index.tsx",lineNumber:149,columnNumber:9},this)},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/routes/index.tsx",lineNumber:148,columnNumber:7},this),e.jsxDEV("footer",{className:"bg-gray-900 text-white py-12",children:e.jsxDEV("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[e.jsxDEV("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-8",children:[e.jsxDEV("div",{className:"col-span-1 md:col-span-2",children:[e.jsxDEV("div",{className:"flex items-center mb-4",children:[e.jsxDEV("div",{className:"w-8 h-8 bg-gradient-to-r from-blue-500 to-purple-600 rounded-lg flex items-center justify-center",children:e.jsxDEV("span",{className:"text-white font-bold text-sm",children:"MS"},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/routes/index.tsx",lineNumber:195,columnNumber:19},this)},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/routes/index.tsx",lineNumber:194,columnNumber:17},this),e.jsxDEV("span",{className:"ml-3 text-xl font-semibold",children:"MERN Stack"},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/routes/index.tsx",lineNumber:197,columnNumber:17},this)]},void 0,!0,{fileName:"C:/Users/thudao/coding/example-react/client/src/routes/index.tsx",lineNumber:193,columnNumber:15},this),e.jsxDEV("p",{className:"text-gray-400 mb-4",children:"A modern full-stack application showcasing the power of React, TanStack Router, and modern web technologies."},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/routes/index.tsx",lineNumber:199,columnNumber:15},this)]},void 0,!0,{fileName:"C:/Users/thudao/coding/example-react/client/src/routes/index.tsx",lineNumber:192,columnNumber:13},this),e.jsxDEV("div",{children:[e.jsxDEV("h3",{className:"text-lg font-semibold mb-4",children:"Applications"},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/routes/index.tsx",lineNumber:205,columnNumber:15},this),e.jsxDEV("ul",{className:"space-y-2",children:[e.jsxDEV("li",{children:e.jsxDEV(D,{to:"/todo",className:"text-gray-400 hover:text-white",children:"Todo Manager"},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/routes/index.tsx",lineNumber:207,columnNumber:21},this)},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/routes/index.tsx",lineNumber:207,columnNumber:17},this),e.jsxDEV("li",{children:e.jsxDEV(D,{to:"/chat",className:"text-gray-400 hover:text-white",children:"Chat Rooms"},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/routes/index.tsx",lineNumber:208,columnNumber:21},this)},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/routes/index.tsx",lineNumber:208,columnNumber:17},this),e.jsxDEV("li",{children:e.jsxDEV(D,{to:"/profile",className:"text-gray-400 hover:text-white",children:"User Profile"},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/routes/index.tsx",lineNumber:209,columnNumber:21},this)},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/routes/index.tsx",lineNumber:209,columnNumber:17},this)]},void 0,!0,{fileName:"C:/Users/thudao/coding/example-react/client/src/routes/index.tsx",lineNumber:206,columnNumber:15},this)]},void 0,!0,{fileName:"C:/Users/thudao/coding/example-react/client/src/routes/index.tsx",lineNumber:204,columnNumber:13},this),e.jsxDEV("div",{children:[e.jsxDEV("h3",{className:"text-lg font-semibold mb-4",children:"Account"},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/routes/index.tsx",lineNumber:213,columnNumber:15},this),e.jsxDEV("ul",{className:"space-y-2",children:[e.jsxDEV("li",{children:e.jsxDEV(D,{to:"/login",className:"text-gray-400 hover:text-white",search:{redirect:"/todo"},children:"Sign In"},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/routes/index.tsx",lineNumber:215,columnNumber:21},this)},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/routes/index.tsx",lineNumber:215,columnNumber:17},this),e.jsxDEV("li",{children:e.jsxDEV(D,{to:"/register",className:"text-gray-400 hover:text-white",children:"Sign Up"},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/routes/index.tsx",lineNumber:218,columnNumber:21},this)},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/routes/index.tsx",lineNumber:218,columnNumber:17},this),e.jsxDEV("li",{children:e.jsxDEV(D,{to:"/forgot-password",className:"text-gray-400 hover:text-white",children:"Forgot Password"},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/routes/index.tsx",lineNumber:219,columnNumber:21},this)},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/routes/index.tsx",lineNumber:219,columnNumber:17},this)]},void 0,!0,{fileName:"C:/Users/thudao/coding/example-react/client/src/routes/index.tsx",lineNumber:214,columnNumber:15},this)]},void 0,!0,{fileName:"C:/Users/thudao/coding/example-react/client/src/routes/index.tsx",lineNumber:212,columnNumber:13},this)]},void 0,!0,{fileName:"C:/Users/thudao/coding/example-react/client/src/routes/index.tsx",lineNumber:191,columnNumber:11},this),e.jsxDEV("div",{className:"border-t border-gray-800 mt-8 pt-8 text-center",children:e.jsxDEV("p",{className:"text-gray-400",children:"© 2025 MERN Stack App. Built with ❤️ using modern web technologies."},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/routes/index.tsx",lineNumber:224,columnNumber:13},this)},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/routes/index.tsx",lineNumber:223,columnNumber:11},this)]},void 0,!0,{fileName:"C:/Users/thudao/coding/example-react/client/src/routes/index.tsx",lineNumber:190,columnNumber:9},this)},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/routes/index.tsx",lineNumber:189,columnNumber:7},this)]},void 0,!0,{fileName:"C:/Users/thudao/coding/example-react/client/src/routes/index.tsx",lineNumber:56,columnNumber:10},this)}const Pi=G("/room/$id")({beforeLoad:({location:o})=>{if(!L.getState().isAuthenticated)throw ke({to:"/login",search:{redirect:o.href}})},component:Ai});function Ai(){const{id:o}=Eo({from:"/room/$id"});return e.jsxDEV("div",{className:"min-h-screen bg-gray-50",children:[e.jsxDEV("div",{className:"bg-white border-b px-4 py-3 sticky top-0 z-50",children:e.jsxDEV("div",{className:"max-w-4xl mx-auto flex items-center justify-between",children:[e.jsxDEV("div",{className:"flex items-center space-x-3",children:e.jsxDEV(D,{to:"/chat",children:e.jsxDEV(d,{variant:"ghost",size:"sm",children:[e.jsxDEV(ne,{className:"w-4 h-4 mr-2"},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/routes/room.$id.tsx",lineNumber:39,columnNumber:17},this),"Back to Chat"]},void 0,!0,{fileName:"C:/Users/thudao/coding/example-react/client/src/routes/room.$id.tsx",lineNumber:38,columnNumber:15},this)},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/routes/room.$id.tsx",lineNumber:37,columnNumber:13},this)},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/routes/room.$id.tsx",lineNumber:36,columnNumber:11},this),e.jsxDEV("div",{className:"flex items-center space-x-2",children:e.jsxDEV(D,{to:"/",children:e.jsxDEV(d,{variant:"outline",size:"sm",children:"Home"},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/routes/room.$id.tsx",lineNumber:46,columnNumber:15},this)},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/routes/room.$id.tsx",lineNumber:45,columnNumber:13},this)},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/routes/room.$id.tsx",lineNumber:44,columnNumber:11},this)]},void 0,!0,{fileName:"C:/Users/thudao/coding/example-react/client/src/routes/room.$id.tsx",lineNumber:35,columnNumber:9},this)},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/routes/room.$id.tsx",lineNumber:34,columnNumber:7},this),e.jsxDEV("div",{className:"h-[calc(100vh-4rem)]",children:e.jsxDEV(is,{roomId:o},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/routes/room.$id.tsx",lineNumber:56,columnNumber:9},this)},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/routes/room.$id.tsx",lineNumber:55,columnNumber:7},this)]},void 0,!0,{fileName:"C:/Users/thudao/coding/example-react/client/src/routes/room.$id.tsx",lineNumber:32,columnNumber:10},this)}const Mi=Mo.update({id:"/verify-otp",path:"/verify-otp",getParentRoute:()=>W}),Ii=ur.update({id:"/todo",path:"/todo",getParentRoute:()=>W}),Fi=hr.update({id:"/register",path:"/register",getParentRoute:()=>W}),$i=Cr.update({id:"/profile",path:"/profile",getParentRoute:()=>W}),Oi=Er.update({id:"/login",path:"/login",getParentRoute:()=>W}),_i=yr.update({id:"/forgot-password",path:"/forgot-password",getParentRoute:()=>W}),zi=Vi.update({id:"/chat",path:"/chat",getParentRoute:()=>W}),qi=ki.update({id:"/404",path:"/404",getParentRoute:()=>W}),Bi=Ti.update({id:"/",path:"/",getParentRoute:()=>W}),Ki=Pi.update({id:"/room/$id",path:"/room/$id",getParentRoute:()=>W}),Qi={IndexRoute:Bi,R404Route:qi,ChatRoute:zi,ForgotPasswordRoute:_i,LoginRoute:Oi,ProfileRoute:$i,RegisterRoute:Fi,TodoRoute:Ii,VerifyOtpRoute:Mi,RoomIdRoute:Ki},Hi=W._addFileChildren(Qi)._addFileTypes(),Ji=new Uo({defaultOptions:{queries:{staleTime:60*1e3,gcTime:10*60*1e3,retry:(o,t)=>t?.status>=400&&t?.status<500&&![408,429].includes(t?.status)?!1:o<3,refetchOnWindowFocus:!1},mutations:{retry:(o,t)=>t?.status>=400&&t?.status<500&&![408,429].includes(t?.status)?!1:o<2}}}),Wi=yo({routeTree:Hi}),gt=document.getElementById("root");gt.innerHTML||jo.createRoot(gt).render(e.jsxDEV(wo,{client:Ji,children:e.jsxDEV(Ui,{children:[e.jsxDEV(Vo,{router:Wi},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/main.tsx",lineNumber:31,columnNumber:9},void 0),e.jsxDEV(ji,{},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/main.tsx",lineNumber:32,columnNumber:9},void 0)]},void 0,!0,{fileName:"C:/Users/thudao/coding/example-react/client/src/main.tsx",lineNumber:30,columnNumber:7},void 0)},void 0,!1,{fileName:"C:/Users/thudao/coding/example-react/client/src/main.tsx",lineNumber:29,columnNumber:5},void 0));
